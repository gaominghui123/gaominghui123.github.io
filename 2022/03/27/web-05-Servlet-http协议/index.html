<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>web-05-Servlet-http协议 | Jason</title><meta name="keywords" content="http,servlet"><meta name="author" content="高明辉"><meta name="copyright" content="高明辉"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="上篇博客回顾idea 小技巧 cltr+12 可以查看类的变量和成员方法有哪里 1234567891011121314Tomcat: 本质上对ServerSocket进行的封装.    能够调用web项目中的servlet java类,完成指定的业务处理.  	能够将web项目中的静态资源直接写回给浏览器,进行展示.  	Servlet: 本质上就是一个运行在服务器上Java类,该java类可以直">
<meta property="og:type" content="article">
<meta property="og:title" content="web-05-Servlet-http协议">
<meta property="og:url" content="http://example.com/2022/03/27/web-05-Servlet-http%E5%8D%8F%E8%AE%AE/index.html">
<meta property="og:site_name" content="Jason">
<meta property="og:description" content="上篇博客回顾idea 小技巧 cltr+12 可以查看类的变量和成员方法有哪里 1234567891011121314Tomcat: 本质上对ServerSocket进行的封装.    能够调用web项目中的servlet java类,完成指定的业务处理.  	能够将web项目中的静态资源直接写回给浏览器,进行展示.  	Servlet: 本质上就是一个运行在服务器上Java类,该java类可以直">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day04-tomcat-servlet/%E5%B0%81%E9%9D%A2.png">
<meta property="article:published_time" content="2022-03-27T08:11:19.000Z">
<meta property="article:modified_time" content="2022-03-27T12:39:04.510Z">
<meta property="article:author" content="高明辉">
<meta property="article:tag" content="http">
<meta property="article:tag" content="servlet">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day04-tomcat-servlet/%E5%B0%81%E9%9D%A2.png"><link rel="shortcut icon" href="/img/%E7%BD%91%E7%AB%99%E5%9B%BE%E6%A0%87.png"><link rel="canonical" href="http://example.com/2022/03/27/web-05-Servlet-http%E5%8D%8F%E8%AE%AE/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'web-05-Servlet-http协议',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-03-27 20:39:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Jason" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/%E5%A4%B4%E5%83%8F.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">169</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">204</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">32</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E5%85%B3%E4%BA%8E"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/butterfly%E4%B8%BB%E9%A2%98"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day04-tomcat-servlet/%E5%B0%81%E9%9D%A2.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jason</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E5%85%B3%E4%BA%8E"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/butterfly%E4%B8%BB%E9%A2%98"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">web-05-Servlet-http协议</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-27T08:11:19.000Z" title="发表于 2022-03-27 16:11:19">2022-03-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-03-27T12:39:04.510Z" title="更新于 2022-03-27 20:39:04">2022-03-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/web/">web</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="web-05-Servlet-http协议"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="上篇博客回顾"><a href="#上篇博客回顾" class="headerlink" title="上篇博客回顾"></a>上篇博客回顾</h1><p>idea 小技巧 cltr+12 可以查看类的变量和成员方法有哪里</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Tomcat: 本质上对ServerSocket进行的封装.</span><br><span class="line">    能够调用web项目中的servlet java类,完成指定的业务处理.</span><br><span class="line">  	能够将web项目中的静态资源直接写回给浏览器,进行展示.</span><br><span class="line">  	</span><br><span class="line">Servlet: 本质上就是一个运行在服务器上Java类,该java类可以直接被Tomcat调用.</span><br><span class="line">  	Tomcat在调用java类时,不是胡乱调的.Tomcat会调用类中的指定名称的方法.</span><br><span class="line">  	为了保证一个java类中的方法能够被Tomcat服务器调用,SUN公司制定了规范.</span><br><span class="line">  	Servlet接口: Tomcat只会调用接口中存在的方法</span><br><span class="line">      	init</span><br><span class="line">      	service</span><br><span class="line">      	destroy</span><br><span class="line">      	getServletConfig</span><br><span class="line">      	getServletInfo</span><br></pre></td></tr></table></figure>



<h2 id="第三章-Servlet体系结构和API"><a href="#第三章-Servlet体系结构和API" class="headerlink" title="第三章 Servlet体系结构和API"></a>第三章 Servlet体系结构和API</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请求来的时候,只会调用servlet接口中的方法 service()</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest var1, ServletResponse var2)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="Servlet的API"><a href="#Servlet的API" class="headerlink" title="Servlet的API"></a>Servlet的API</h3><table>
<thead>
<tr>
<th>对象</th>
<th>方法/描述</th>
</tr>
</thead>
<tbody><tr>
<td>Servlet:接口</td>
<td>(掌握★)init:初始化                                                                                                                    (掌握★)service:提供服务                                                                                                           (掌握★)destroy:销毁                                                                                                                            (理解)getServletConfig():获取当前Servlet的配置对象                                                                                                 (了解)getServletInfo():获取Servlet信息</td>
</tr>
<tr>
<td>GenericServlet:(通用Servlet)</td>
<td>实现了servlet接口的抽象类,实现servlet中除service方法之外的所有方法</td>
</tr>
<tr>
<td>HttpServlet:抽象类</td>
<td>继承GenericServlet,实现了Servlet的所有方法.<br/>HttpServlet是<strong>针对http协议提供的一个Servlet</strong>(能解析http协议携带的一切数据信息)</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">tomcat在调用init方法初始化时,将本Servlet的配置信息传递给了当前<span class="function">Servlet</span></span><br><span class="line"><span class="function">    <span class="title">init</span><span class="params">(ServletConfig config)</span>: 初始化方法</span></span><br><span class="line"><span class="function">        实例化: 创建一个类的实例,创建类对象</span></span><br><span class="line"><span class="function">        初始化: 实例化后调用类中的一个方法,对实例中的属性进行初始化赋值操作</span></span><br><span class="line"><span class="function">                初始化方法在类对象实例化后立即调用执行</span></span><br><span class="line"><span class="function">    <span class="title">service</span><span class="params">(ServletRequest,ServletResponse)</span></span>; 提供服务的方法</span><br><span class="line">         每次浏览器请求来的时候,服务器都会调用此方法提供服务</span><br><span class="line">    destory(); 销毁的方法</span><br><span class="line">        在对象从内存中删除前执行</span><br><span class="line">    getServletConfig(); 获取当前Servlet的配置信息</span><br><span class="line">        包含,当前Servlet注册给tomcat时的名字</span><br><span class="line">    getServletInfo(); 获取当前Servlet的版本或作者等..</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<h4 id="Servlet接口API分析"><a href="#Servlet接口API分析" class="headerlink" title="Servlet接口API分析"></a>Servlet接口API分析</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 初始化方法,在Servlet对象实例化完毕后,调用</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig var1)</span> <span class="keyword">throws</span> ServletException</span>;</span><br><span class="line">	<span class="comment">// 获取当前servlet的配置信息</span></span><br><span class="line">    <span class="function">ServletConfig <span class="title">getServletConfig</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">// 提供服务的方法,每次请求来的时候都会调用此方法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest var1, ServletResponse var2)</span> <span class="keyword">throws</span> ServletException, IOException</span>;</span><br><span class="line">	<span class="comment">// 获取Servlet的基本信息</span></span><br><span class="line">    <span class="function">String <span class="title">getServletInfo</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">// 销毁的方法,当服务器关闭时,需要释放内存,在释放内存前调用此方法销毁Servlet</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">了解:</span><br><span class="line">	ServletConfig: 在ServletConfig中存放有Servlet的基本信息</span><br><span class="line">经过我们的分析,我们发现Servle接口中的方法对于我们而言不都是重要的,我们主要想使用的是service.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>解决方案:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">问题: 为了一个service方法不得不重写其他<span class="number">4</span>个方法</span><br><span class="line">解决:提供一个中间类,在中间类中将不常用的方法重写,常用的方法还保留抽象</span><br></pre></td></tr></table></figure>

<h4 id="GenericServlet-通用Servlet"><a href="#GenericServlet-通用Servlet" class="headerlink" title="GenericServlet:通用Servlet"></a>GenericServlet:通用Servlet</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现Servlet接口,重写4个抽象方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 存Servlet的配置信息</span></span><br><span class="line">    <span class="keyword">private</span> ServletConfig config;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GenericServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重写Servlet接口中的</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 重写Servlet接口中的</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.config;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 重写Servlet接口中的</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// 重写Servlet接口中的</span></span><br><span class="line">    <span class="comment">// 初始化时为的是将当前Servlet的配置信息传递给当前Servlet</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.config = config;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 重写Servlet接口中的</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest var1, ServletResponse var2)</span> <span class="keyword">throws</span> ServletException, IOException</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="HttpServlet-源码"><a href="#HttpServlet-源码" class="headerlink" title="HttpServlet 源码"></a>HttpServlet 源码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">无论浏览器在发送请求时,使用的是任何协议,此Servlet都可以接收请求.</span><br><span class="line">我们在使用浏览器发送请求时,使用的是Http协议,而在API中为HTTP协议单独提供了一个Servlet 叫做 HttpServlet</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 针对HTTP协议提供的Servlet</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpServlet</span> <span class="keyword">extends</span> <span class="title">GenericServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HttpServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// 重写的service方法</span></span><br><span class="line">    <span class="comment">// ServletRequest: 请求信息对象,此对象中存放有浏览器携带的一切数据</span></span><br><span class="line">    <span class="comment">// ServletResponse: 响应信息对象,此对象中存放有服务器返回给浏览器的一切数据</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span></span>&#123;</span><br><span class="line">        HttpServletRequest request;</span><br><span class="line">        HttpServletResponse response;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 将父对象转成子对象,为了方便获取http请求携带的数据</span></span><br><span class="line">            request = (HttpServletRequest)req;</span><br><span class="line">            response = (HttpServletResponse)res;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassCastException var6) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ServletException(<span class="string">&quot;non-HTTP request or response&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 调用本类中的service方法</span></span><br><span class="line">        <span class="keyword">this</span>.service(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// &lt;form method=&quot;get|post&quot; &gt;&lt;/form&gt;</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 获取请求方式</span></span><br><span class="line">        String method = req.getMethod();</span><br><span class="line">        <span class="keyword">long</span> lastModified;</span><br><span class="line">        <span class="comment">// 判断请求方式</span></span><br><span class="line">        <span class="keyword">if</span> (method.equals(<span class="string">&quot;GET&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">this</span>.doGet(req, resp);  </span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.equals(<span class="string">&quot;POST&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">this</span>.doPost(req, resp);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String protocol = req.getProtocol();</span><br><span class="line">        String msg = lStrings.getString(<span class="string">&quot;http.method_get_not_supported&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (protocol.endsWith(<span class="string">&quot;1.1&quot;</span>)) &#123;</span><br><span class="line">            resp.sendError(<span class="number">405</span>, msg);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resp.sendError(<span class="number">400</span>, msg);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String protocol = req.getProtocol();</span><br><span class="line">        String msg = lStrings.getString(<span class="string">&quot;http.method_post_not_supported&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (protocol.endsWith(<span class="string">&quot;1.1&quot;</span>)) &#123;</span><br><span class="line">            resp.sendError(<span class="number">405</span>, msg);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resp.sendError(<span class="number">400</span>, msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">当有了HttpServlet后,我们在编写被浏览器访问到的java类是:</span><br><span class="line">	编写一个java类,继承HttpServlet,</span><br><span class="line">	重写service(HttpServletRequest,HttpServletResponse);</span><br></pre></td></tr></table></figure>

<p>示例代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 最终方式:</span></span><br><span class="line"><span class="comment"> *  1.编写一个类继承HttpServlet,重写service方法</span></span><br><span class="line"><span class="comment"> *  2.在类上添加注解</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo4Servlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo4Servlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Demo4Servlet执行了啊&quot;</span>);</span><br><span class="line">        String method = req.getMethod();</span><br><span class="line">        System.out.println(<span class="string">&quot;请求方式为: &quot;</span>+method);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>新问题：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">上述中只是重写了service方法，这种方法有缺陷，没有处理缓存问题。</span><br><span class="line">比如说浏览器刚访问了hello.html文件，又继续访问时，从浏览器中加载（如果没过期）</span><br><span class="line">肯定比再次从服务器加载要好是吧，减轻了服务器的压力（下面会讲到如何现实的）</span><br><span class="line">    因此我们使用下面的最终方法，流程分析：</span><br><span class="line">Tomcat调用service 会去HttpServlet调用，强转之后再次调用service方法，此时调用的还是</span><br><span class="line">HttpServle本类的service方法，此方法在调用DoGet之前会进行缓存处理，</span><br><span class="line">如果我们在HttpServlet实现类中重写了DoGet方法来处理我们的业务逻辑，父类HttpServlet处理完</span><br><span class="line">缓存问题调用的Doget方法就是我们实现类中的方法（多态执行看子类），我们如果没在实现类中重写Doget方法的话会去执行HttpServlet的Doget，里面的处理是直接返回报错信息给浏览器。</span><br></pre></td></tr></table></figure>

<p><strong>最终方式：</strong></p>
<pre><code>★编写一个java类,继承HttpServlet,
    重写doGet(HttpServletRequest,HttpServletResponse);
    和doPost(HttpServletRequest,HttpServletResponse);
</code></pre>
<p>注意问题：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1</span> <span class="string">如果没有重写service方法的话就一定要重写Doget和DoPost方法了，否则给浏览器报错</span></span><br><span class="line"><span class="attr">2</span> <span class="string">在HttpServlet中区分Doget跟DoPost是为了处理缓存问题，在实习类中处理逻辑时就没必要</span></span><br><span class="line"><span class="attr">再区分Doget还是DoPost了，那样只会代码重复，我们的做法是将全部逻辑处理都放在DoPost中，</span></span><br><span class="line"><span class="attr">然后DoGet去调用Dopost，这样子请求无论是post还是get都执行同一样的业务代码就好了。</span></span><br></pre></td></tr></table></figure>

<p>我们在idea中：new —-&gt;file  —-&gt;servlet 是会自动生成我们的最终模板代码，但是DoPost和DoGet之间谁调用谁需要我们自己手动写，可以加入如下模板，建立servlet  实现类时默认Doget 调用DoPost。</p>
<h3 id="Servlet模板★"><a href="#Servlet模板★" class="headerlink" title="Servlet模板★"></a>Servlet模板★</h3><p><img src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day05-servlet-http/image-20210515095433571.png" alt="image-20210515095433571"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="meta">@javax</span>.servlet.annotation.WebServlet(<span class="string">&quot;/$&#123;Entity_Name&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> $</span>&#123;Class_Name&#125; extends javax.servlet.http.HttpServlet &#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最终版的Servlet实现类代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.day01_web.a_servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo5Servlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;使用模板（doGet中调用doPost)来创建Servlet实现类Demo5Servlet&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;class 文件的模板内容需要手动添加到idea中&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="第四章-Servlet其他细节"><a href="#第四章-Servlet其他细节" class="headerlink" title="第四章 Servlet其他细节"></a>第四章 Servlet其他细节</h2><h3 id="4-1-Servlet的生命周期★"><a href="#4-1-Servlet的生命周期★" class="headerlink" title="4.1 Servlet的生命周期★"></a>4.1 Servlet的生命周期★</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Servlet生命周期: 从创建到死亡的整个过程 (从对象创建到对象销毁)</span><br><span class="line">控制生命周期的三个方法:</span><br><span class="line">	init:初始化 (当servlet类被实例化后,立即调用init方法进行初始化)</span><br><span class="line">	service:提供服务</span><br><span class="line">	destroy:销毁 (从内存中移除前执行destory方法进行销毁操作)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.b_life;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/life&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LifeServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实例化: 实例化对象,创建对象</span></span><br><span class="line"><span class="comment">     * 初始化方法: 在类对象创建完毕后,完成类的初始化工作</span></span><br><span class="line"><span class="comment">     * 调用者: Tomcat</span></span><br><span class="line"><span class="comment">     * 执行时机: 在当前类对象实例化完毕后,立即调用此方法执行</span></span><br><span class="line"><span class="comment">     * 执行次数: 1次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LifeServlet的init方法执行了,servlet出生了...5555555555555555&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 提供服务的方法: 每次调用此类时,都会执行service方法处理业务</span></span><br><span class="line"><span class="comment">     * 调用者: Tomcat</span></span><br><span class="line"><span class="comment">     * 执行时机: 每次请求来的时候</span></span><br><span class="line"><span class="comment">     * 执行次数: 请求一次执行一次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LifeServlet的service方法执行了,service为你提供服务...6666666666666666&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 销毁方法: 当servlet类从内存移除前调用此方法进行销毁操作</span></span><br><span class="line"><span class="comment">     * 调用者: Tomcat</span></span><br><span class="line"><span class="comment">     * 执行时机: 正常关闭服务器,项目从服务器上移除</span></span><br><span class="line"><span class="comment">     * 执行次数: 1次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LifeServlet的destroy方法执行了,servlet销毁了...4444444444444444&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 了解: 通过此方法获取当前Servlet的配置信息,</span></span><br><span class="line"><span class="comment">     *       配置信息已经在类初始化时传递给当前类了</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 了解: 获取当前类的基本信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>总结:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">当浏览器第一次访问该servlet的时候,服务器会给我们创建该servlet的对象,</span><br><span class="line">并调用init()方法进行初始化,init()方法执行完毕后service方法会跟着执行.</span><br><span class="line">    </span><br><span class="line">以后再访问该servlet的时候,直接调用service()方法提供服务,</span><br><span class="line">并且是访问一次调用一次.(服务器不会再创建该servlet的对象,也不会调用init()方法进行初始化)</span><br><span class="line">    </span><br><span class="line">当服务器正常关闭的时候或项目从服务器中移除的时候,</span><br><span class="line">服务器会的调用destroy()方法,将该servlet的对象销毁</span><br><span class="line"></span><br><span class="line">★: 不论访问多少次只有一个servlet对象；（单实例,多线程）</span><br></pre></td></tr></table></figure>

<h3 id="4-2-servlet初始化时机★"><a href="#4-2-servlet初始化时机★" class="headerlink" title="4.2 servlet初始化时机★"></a>4.2 servlet初始化时机★</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>第一次请求来的时候,创建servlet对象并执行初始化方法</span><br><span class="line">	在初始化时,用户处于等待状态,用户体验度不高</span><br><span class="line"><span class="number">2.</span>更改Servlet的初始化时机,将第一次请求来时初始化,</span><br><span class="line">	更改为服务器一启动就创建Servlet对象并初始化；可以提高用户体验度.提高运行效率</span><br><span class="line">	Servlet实现类的注解加入loadOnStartup参数，设置为<span class="number">1</span>；</span><br><span class="line">	<span class="meta">@WebServlet(urlPatterns = &quot;/life1Servlet&quot;,loadOnStartup = 1)</span></span><br></pre></td></tr></table></figure>

<h5 id="示例代码-1"><a href="#示例代码-1" class="headerlink" title="示例代码:"></a>示例代码:</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--------------------- web.xml 配置文件方式</span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>lifeServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.itheima.b_life.LifeServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- <span class="doctag">TODO:</span>★★★设置servlet的初始化时机 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>lifeServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/life<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Servlet实现类的注解加入loadOnStartup参数，设置为1 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- @WebServlet(urlPatterns = &quot;/life1Servlet&quot;,loadOnStartup = 1) --&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-Servlet的多种绑定路径"><a href="#4-3-Servlet的多种绑定路径" class="headerlink" title="4.3 Servlet的多种绑定路径"></a>4.3 Servlet的多种绑定路径</h3><p><strong>绑定路径</strong>指的是在当前页面中点击超链接将要调用的web后台中的servlet实现类。</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.完全匹配</span></span><br><span class="line">    <span class="meta">以</span> <span class="string">/ 开头,匹配/后面的所有内容,必须完全匹配</span></span><br><span class="line">    <span class="attr">eg</span>:<span class="string"></span></span><br><span class="line">	<span class="attr">/demo1Servlet</span></span><br><span class="line">    <span class="attr">/abc/demo1Servlet</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/hello/test1&quot;)</span> <span class="string">// 完全匹配</span></span><br><span class="line"><span class="attr">public</span> <span class="string">class UrlServlet extends HttpServlet &#123;、、、</span></span><br><span class="line"><span class="meta">&lt;a</span> <span class="string">href=&quot;/day01_web_war_exploded/hello/test1&quot;&gt;完全匹配&lt;/a&gt; &lt;br&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2.目录匹配</span></span><br><span class="line">    <span class="meta">以</span> <span class="string">/ 开头</span></span><br><span class="line">    <span class="attr">eg</span>:<span class="string"></span></span><br><span class="line">	<span class="attr">aa/*</span></span><br><span class="line">	<span class="attr">/*</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/abc/*&quot;)</span> <span class="string">// 目录匹配</span></span><br><span class="line"><span class="attr">public</span> <span class="string">class UrlServlet extends HttpServlet &#123;、、、</span></span><br><span class="line"><span class="meta">&lt;a</span> <span class="string">href=&quot;/day01_web_war_exploded/aa/test2&quot;&gt;目录匹配&lt;/a&gt; &lt;br&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">3.后缀名匹配</span></span><br><span class="line">	<span class="meta">以</span> <span class="string">* 开头</span></span><br><span class="line">	<span class="attr">eg</span>:<span class="string"></span></span><br><span class="line">		<span class="attr">*.abc</span></span><br><span class="line">		<span class="attr">*.action</span></span><br><span class="line">		<span class="attr">*.do</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;*.do&quot;)</span> <span class="string">// 扩展名匹配</span></span><br><span class="line"><span class="attr">public</span> <span class="string">class UrlServlet extends HttpServlet &#123;。。。</span></span><br><span class="line"><span class="meta">&lt;a</span> <span class="string">href=&quot;/day01_web_war_exploded/zxcx.do&quot;&gt;扩展名匹配&lt;/a&gt; &lt;br&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">4.缺省匹配(我们不能使用留个服务器和框架使用的)</span></span><br><span class="line">	 <span class="meta">/</span>  : <span class="string">一般留给服务器使用,可以匹配一切资源</span></span><br><span class="line"></span><br><span class="line"><span class="meta">优先级</span>:<span class="string"></span></span><br><span class="line"> 	<span class="meta">完全匹配</span> <span class="string">&gt; 目录匹配 &gt; 后缀名匹配 &gt; 缺省匹配</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.url;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@WebServlet(&quot;/aaa/urlServlet&quot;) // 完全匹配</span></span><br><span class="line"><span class="comment">//@WebServlet(&quot;/abc/*&quot;) // 目录匹配</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;*.do&quot;)</span> <span class="comment">// 扩展名匹配</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UrlServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UrlServlet执行了...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="DefaultServlet"><a href="#DefaultServlet" class="headerlink" title="DefaultServlet"></a>DefaultServlet</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">当访问静态资源时：</span><br><span class="line">    http:<span class="comment">//localhost:8080/day01_web_war_exploded/  或者</span></span><br><span class="line">	http:<span class="comment">//localhost:8080/day01_web_war_exploded/hello.html</span></span><br><span class="line">由于servlet绑定的路径优先级问题，先去我们部署的servlet实现类匹配，</span><br><span class="line">发现匹配不到才会匹配TomCat的缺省匹配，</span><br><span class="line">    </span><br><span class="line">因为服务器提供的DefaultServlet绑定路径为 / (可以匹配一切,且优先级最低)，</span><br><span class="line">如果找到了hello.html 就将hello.html返回给浏览器</span><br><span class="line">找不到就将文件找不到的错误信息写回给浏览器。</span><br><span class="line">    </span><br><span class="line">如果url只有一个/,如上面第一个url的话,DefaultServlet会将默认的index.html写回给浏览器.</span><br><span class="line">index.html 要位于WEB_INF同级目录哦。也就是返回web项目默认的首页！</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day05-servlet-http/image-20210515113008946.png" alt="image-20210515113008946"></p>
<p>web项目的默认首页设置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">设置更改web项目的默认页面，由于优先加载我们项目的web.xml文件，因此我们可以“截胡”</span><br><span class="line">在我们部署的项目的target/day01_web-1.0-SNAPSHOT/WEB-INF/web.xml</span><br><span class="line">最下面添加如下标签来指定默认首页哦！</span><br><span class="line">可以在welcome-file-list下添加多个<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>xxx.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">来指定默认文件（从第一个标签按照顺序查找，没有的话就下一个作为默认首页）</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>hello.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-ServletConfig对象-了解"><a href="#4-4-ServletConfig对象-了解" class="headerlink" title="4.4 ServletConfig对象(了解)"></a>4.4 ServletConfig对象(了解)</h3><p><img src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day05-servlet-http/image-20210515114727568.png" alt="image-20210515114727568"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在init方法调用前,tomcat会创建当前Servlet的ServletConfig对象,封装当前Servlet的配置信息</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletConfigDemo</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletConfig servletConfig = <span class="keyword">this</span>.getServletConfig();</span><br><span class="line">        <span class="comment">// 当前Servlet注册给tomcat时的名称</span></span><br><span class="line">        String servletName = servletConfig.getServletName();</span><br><span class="line">        System.out.println(servletName);</span><br><span class="line">        <span class="comment">// 获取config对象中的初始化参数</span></span><br><span class="line">        Enumeration&lt;String&gt; names = servletConfig.getInitParameterNames();</span><br><span class="line">        <span class="keyword">while</span>(names.hasMoreElements())&#123;</span><br><span class="line">            String key = names.nextElement();</span><br><span class="line">            System.out.println(key);</span><br><span class="line">            String value = servletConfig.getInitParameter(key);</span><br><span class="line">            System.out.println(value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取上下文对象</span></span><br><span class="line">        ServletContext servletContext = servletConfig.getServletContext();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ServletConfig: 当前Servlet的配置信息对象</span></span><br><span class="line"><span class="comment">         当tomcat服务器解析完web.xml文件后,会创建ServletConfig对象</span></span><br><span class="line"><span class="comment">         在ServletConfig中存放当前Servlet的配置信息</span></span><br><span class="line"><span class="comment">         这个配置信息是通过init(servletConfig)传递给当前Servlet对象的</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>XXXXX<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.itheima.config.ServletConfigDemo<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 给当前Servlet设置初始化参数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>str1<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>itheima<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>str2<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>itcast<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>XXXXX<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/config<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="第五章-http协议-请求"><a href="#第五章-http协议-请求" class="headerlink" title="第五章 http协议-请求"></a>第五章 http协议-请求</h2><p>协议: 就是一种约束,一种规则, http协议用来约束浏览器和服务器传递数据时,数据的格式</p>
<h3 id="5-1-协议概述"><a href="#5-1-协议概述" class="headerlink" title="5.1 协议概述:"></a>5.1 协议概述:</h3><h4 id="什么是协议"><a href="#什么是协议" class="headerlink" title="什么是协议"></a>什么是协议</h4><p>​    规定内容的传输的格式</p>
<h4 id="http协议是什么"><a href="#http协议是什么" class="headerlink" title="http协议是什么:"></a>http协议是什么:</h4><p>​    用来制定互联网上数据的传输的格式</p>
<h3 id="5-2-http协议的组成"><a href="#5-2-http协议的组成" class="headerlink" title="5.2 http协议的组成:"></a>5.2 http协议的组成:</h3><p>​    浏览器发送给服务器的内容  请求 (request 规定请求数据的格式)</p>
<p>​    服务器返回给浏览器的内容  响应 (response 规定响应数据的格式)</p>
<h3 id="5-3-抓取http协议中的内容-抓包-★★★"><a href="#5-3-抓取http协议中的内容-抓包-★★★" class="headerlink" title="5.3 抓取http协议中的内容-抓包: ★★★"></a>5.3 抓取http协议中的内容-抓包: ★★★</h3><p>​    通过浏览器的抓包就可以查看当前请求所包含的请求信息和响应信息.</p>
<p>浏览器中：ctrl+shift+delete 可以清楚浏览器缓存。</p>
<p>浏览器中f12打开开发者模式</p>
<p>​    注: <strong>get请求没有请求体</strong></p>
<p><img src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day05-servlet-http/image-20201226153709383.png" alt="image-20201226153709383"></p>
<h3 id="5-4-请求的格式"><a href="#5-4-请求的格式" class="headerlink" title="5.4 请求的格式:"></a>5.4 请求的格式:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">http协议可以约束请求和响应数据的格式:</span><br><span class="line">http协议-请求</span><br><span class="line">  <span class="number">1</span>请求行:请求信息的第一行</span><br><span class="line">  <span class="number">2</span>请求头:从第二行开始到一个空行结束</span><br><span class="line">  <span class="number">3</span></span><br><span class="line">  <span class="number">4</span>请求体:空行下的所有内容</span><br></pre></td></tr></table></figure>

<h4 id="1-：请求行"><a href="#1-：请求行" class="headerlink" title="1 ：请求行:"></a>1 ：请求行:</h4><p>请求行,其实就是请求携带信息的第一行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">格式: 请求方式 请求资源 协议/版本</span><br><span class="line">	eg:  GET /index.html HTTP/<span class="number">1.1</span></span><br><span class="line">    </span><br><span class="line">HTTP1<span class="number">.0</span> : 短链接</span><br><span class="line">HTTP1<span class="number">.1</span> : 长连接(默认)</span><br><span class="line">请求方式:</span><br><span class="line">	get:</span><br><span class="line">		请求参数会在地址栏上显示,提交数据量受限,不安全</span><br><span class="line">	post:</span><br><span class="line">		请求参数不会在地址栏上显示,提交数据量不受限制,相对安全</span><br><span class="line">------------ 浏览器发送请求方式:</span><br><span class="line">	在地址栏输入地址发送请求: get请求</span><br><span class="line">	超链接发送请求: get请求</span><br><span class="line">	js的location.href=路径 ,发送请求: get请求</span><br><span class="line">	form表单发送请求:</span><br><span class="line">		默认是 get 请求</span><br><span class="line">		设置method=<span class="string">&quot;post&quot;</span>: 才是post请求</span><br></pre></td></tr></table></figure>

<p><img src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day05-servlet-http/image-20201226154747896.png" alt="image-20201226154747896"></p>
<h4 id="2-：请求头-约束请求参数的类型和格式"><a href="#2-：请求头-约束请求参数的类型和格式" class="headerlink" title="2 ：请求头: 约束请求参数的类型和格式"></a>2 ：请求头: 约束请求参数的类型和格式</h4><p>从第二行开始,到一个空行结束</p>
<h5 id="常见的请求头-了解"><a href="#常见的请求头-了解" class="headerlink" title="常见的请求头:(了解)"></a>常见的请求头:(了解)</h5><table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Accept</strong></td>
<td>支持数据类型</td>
</tr>
<tr>
<td>Accept-Charset</td>
<td>字符集</td>
</tr>
<tr>
<td>Accept-Encoding</td>
<td>支持压缩</td>
</tr>
<tr>
<td>Accept-Language</td>
<td>语言环境</td>
</tr>
<tr>
<td>Host</td>
<td>访问主机</td>
</tr>
<tr>
<td><strong>If-Modified-Since</strong></td>
<td>缓存文件的最后修改时间</td>
</tr>
<tr>
<td><strong>Referer</strong> ★</td>
<td>来自哪个页面、防盗链(防止被盗用的连接)</td>
</tr>
<tr>
<td><strong>User-Agent</strong> ★</td>
<td>用户代理</td>
</tr>
<tr>
<td><strong>Cookie</strong>  ★</td>
<td>小饼干,会话</td>
</tr>
<tr>
<td>Connection</td>
<td>close/Keep-Alive       –链接状态</td>
</tr>
</tbody></table>
<p><strong>If-Modified-Since</strong> 请求头：</p>
<p><img src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day05-servlet-http/20220326215705.png" alt="22"></p>
<h5 id="重要的头"><a href="#重要的头" class="headerlink" title="重要的头:"></a>重要的头:</h5><p>​        <strong>Referer</strong>   : 描述请求来自哪个页面</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">从第三方平台查询商品，然后跳转到淘宝，京东下单，</span></span><br><span class="line"><span class="attr">向淘宝京东服务器请求数据时会发送该参数，就可以知道是从哪个平台跳转过来下单的，</span></span><br><span class="line"><span class="attr">然后淘宝京东就可以根据这个参数的统计数量以及交易的具体利润来向第三方平台支付平台费了。</span></span><br><span class="line"></span><br><span class="line"><span class="attr">这个参数还可以防盗作用，比如说，服务器上某个资源，</span></span><br><span class="line"><span class="attr">只能是从本公司的官网上的某个地址进行访问该资源时才能访问，否则不能访问，因此起到了防盗作用</span></span><br></pre></td></tr></table></figure>

<p>​        <strong>User-Agent</strong>: 判断用户所使的浏览器类型,根据浏览器类型返回指定编码的数据</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">该参数其实还附带比如操作系统等其他信息，通过IP+UA参数几乎可以确定唯一的访问者</span></span><br><span class="line"><span class="attr">因此有时候访问某网站，虽然没有进行登录，但是也是突然就被关进小黑屋</span></span><br><span class="line"><span class="attr">或者说访问次数已经达到了今日的访问上限次数，要充值会员，哈哈哈哈。</span></span><br></pre></td></tr></table></figure>

<p>​        <strong>Cookie</strong>  : 重要，后面花一篇博客去讲。</p>
<h4 id="3：请求体"><a href="#3：请求体" class="headerlink" title="3：请求体:"></a>3：请求体:</h4><p>​    存放post请求的参数,<strong>get请求方式没有请求体</strong>.</p>
<p>​    只有<strong>表单提交的时候明确了method=”post”这时候是post请求,其他的都是get请求</strong></p>
<h2 id="第六章-请求信息对象-Request"><a href="#第六章-请求信息对象-Request" class="headerlink" title="第六章 请求信息对象-Request"></a>第六章 请求信息对象-Request</h2><h3 id="操作request对象获取请求携带的数据"><a href="#操作request对象获取请求携带的数据" class="headerlink" title="操作request对象获取请求携带的数据:"></a>操作request对象获取请求携带的数据:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请求来的时候,tomcat服务器会帮我们解析请求,并将请求行头体的信息封装到ServletRequest对象,</span><br><span class="line">在HttpServlet中已经将ServletRequest转成了HttpServletRequest</span><br></pre></td></tr></table></figure>

<p>​    HttpServletRequest: 查询javaEE API</p>
<p><img src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day05-servlet-http/image-20210515161421063.png" alt="image-20210515161421063"></p>
<h4 id="操作请求行"><a href="#操作请求行" class="headerlink" title="操作请求行:"></a>操作请求行:</h4><p>​    请求方式 请求路径 协议/版本</p>
<h5 id="重要方法"><a href="#重要方法" class="headerlink" title="重要方法"></a>重要方法</h5><p>​            String <strong>getMethod</strong>():    获取请求方式</p>
<p>​            ★String <strong>getContextPath</strong>():    获取项目路径    </p>
<p>​            String <strong>getRemoteAddr</strong>():    获取请求者的ip</p>
<p>​            int <strong>getLocalPort</strong>():        获取端口 </p>
<h5 id="了解的方法"><a href="#了解的方法" class="headerlink" title="了解的方法"></a>了解的方法</h5><p>​            String <strong>getRequestURI</strong>():    获取请求资源(不带get请求的参数)</p>
<p>​            String <strong>getQueryString</strong>():    获取get请求参数以一个字符串返回get请求的参数</p>
<p>​            String <strong>getProtocol</strong>():    获取协议和版本</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.e_row;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletInputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/row&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RowServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//ServletInputStream is = request.getInputStream();</span></span><br><span class="line">        System.out.println(<span class="string">&quot;===================&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取请求行中的数据信息</span></span><br><span class="line">        <span class="comment">// 获取请求方式</span></span><br><span class="line">        String method = request.getMethod();</span><br><span class="line">        System.out.println(<span class="string">&quot;请求方式为: &quot;</span>+method);</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span>★获取当前项目的项目名称</span></span><br><span class="line">        String contextPath = request.getContextPath();</span><br><span class="line">        System.out.println(<span class="string">&quot;项目名为: &quot;</span>+contextPath);</span><br><span class="line">        <span class="comment">// 获取请求者的ip地址</span></span><br><span class="line">        String addr = request.getRemoteAddr();</span><br><span class="line">        System.out.println(<span class="string">&quot;请求者ip为: &quot;</span>+addr);</span><br><span class="line">        <span class="comment">// 获取端口号</span></span><br><span class="line">        <span class="keyword">int</span> localPort = request.getLocalPort();</span><br><span class="line">        System.out.println(<span class="string">&quot;端口号为: &quot;</span>+localPort);</span><br><span class="line">        <span class="comment">// 了解</span></span><br><span class="line">        <span class="comment">// 获取请求路径</span></span><br><span class="line">        String uri = request.getRequestURI();</span><br><span class="line">        StringBuffer url = request.getRequestURL();</span><br><span class="line">        System.out.println(<span class="string">&quot;请求路径uri: &quot;</span>+uri);</span><br><span class="line">        System.out.println(<span class="string">&quot;请求路径url: &quot;</span>+url);</span><br><span class="line">        <span class="comment">// 获取协议和版本</span></span><br><span class="line">        String protocol = request.getProtocol();</span><br><span class="line">        System.out.println(<span class="string">&quot;请求使用的协议为: &quot;</span>+protocol);</span><br><span class="line">        <span class="comment">// 获取请求携带的参数,以一个字符串的形式返回</span></span><br><span class="line">        String queryString = request.getQueryString();</span><br><span class="line">        System.out.println(<span class="string">&quot;请求携带的参数为: &quot;</span>+queryString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="操作请求头"><a href="#操作请求头" class="headerlink" title="操作请求头:"></a>操作请求头:</h4><h5 id="重要方法-★"><a href="#重要方法-★" class="headerlink" title="重要方法:★"></a>重要方法:★</h5><p>​                String <strong>getHeader</strong>(String name):        以字符串形式返回一个请求头的值</p>
<h5 id="了解的方法-1"><a href="#了解的方法-1" class="headerlink" title="了解的方法:"></a>了解的方法:</h5><p>​                Enumration <strong>getHeaderNames</strong>():     获取所有请求头的名称</p>
<h5 id="常用的请求头"><a href="#常用的请求头" class="headerlink" title="常用的请求头:"></a>常用的请求头:</h5><p>​                <strong>user-agent</strong>:用户代理</p>
<p>​                <strong>referer</strong>:页面的来源   防盗链</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.f_head;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/head&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeadServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===================&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取请求头信息</span></span><br><span class="line">        <span class="comment">// 获取referer头的值</span></span><br><span class="line">        String referer = request.getHeader(<span class="string">&quot;referer&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;请求来自: &quot;</span>+referer);</span><br><span class="line">        <span class="comment">// 获取user-agent头的值</span></span><br><span class="line">        String ua = request.getHeader(<span class="string">&quot;user-agent&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;请求者的ua为: &quot;</span>+ua);</span><br><span class="line">        <span class="comment">// 获取请求携带的所有头名称</span></span><br><span class="line">        Enumeration&lt;String&gt; names = request.getHeaderNames();</span><br><span class="line">        <span class="keyword">while</span>(names.hasMoreElements())&#123;</span><br><span class="line">            System.out.println(names.nextElement());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="操作请求体-操作请求参数"><a href="#操作请求体-操作请求参数" class="headerlink" title="操作请求体: 操作请求参数"></a>操作请求体: 操作请求参数</h4><p>以下这些API既可以<strong>获取get请求携带的参数</strong>又可以<strong>获取post请求携带的参数</strong></p>
<p>在tomcat7中,get和post方式都存在中文乱码问题</p>
<p>在tomcat8中,<strong>对get方式的中文乱码进行了处理</strong>,但post并没有处理</p>
<h5 id="重要方法-1"><a href="#重要方法-1" class="headerlink" title="重要方法:"></a>重要方法:</h5><p>​                String <strong>getParameter</strong>(String name):<br>​                    获取指定请求参数的值,如果不存在返回null</p>
<p>​                String[] <strong>getParameterValues</strong>(String name)<br>​                    获取指定请求参数的多个值数组,如果不存在返回null</p>
<p>​                ★ Map <strong>getParameterMap</strong>():   Map&lt;String key,String[] value&gt;<br>​                    获取所有的请求参数名称和值</p>
<h5 id="请求的中文乱码处理方法"><a href="#请求的中文乱码处理方法" class="headerlink" title="请求的中文乱码处理方法"></a>请求的中文乱码处理方法</h5><p>request.setCharacterEncoding(“utf-8”); <strong>必须在获取参数之前设置。</strong></p>
<p>为什么post方法需要我们自己手动设置编码格式呢？？？因为有时候post方式上传各式各样编码的文件，我们要根据不同的编码进行解码获取保存上传的文件，如果Tomcat将编码格式写死为utf-8，那不是凉凉，因此需要我们手动设置！</p>
<p><img src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day05-servlet-http/20220327001056.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.g_param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletInputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/params&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParamsServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//<span class="doctag">TODO:</span>在获取参数前,设置request对象的编码方式</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;========获取请求携带的参数信息=======&quot;</span>);</span><br><span class="line">        <span class="comment">// 如果没有携带该这个名称的数据,则获取的值为 null</span></span><br><span class="line">        String aaa = request.getParameter(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;aaa的值: &quot;</span>+aaa);</span><br><span class="line">        <span class="comment">// 获取请求携带的参数信息 (当用户不填写数据时,获取的数据为 空字符串 )</span></span><br><span class="line">        String username = request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(username+<span class="string">&quot; : &quot;</span>+password);</span><br><span class="line">        <span class="comment">// 获取一个参数对应的多个值</span></span><br><span class="line">        String[] hobbies = request.getParameterValues(<span class="string">&quot;hobby&quot;</span>);</span><br><span class="line">        System.out.println(Arrays.toString(hobbies));</span><br><span class="line">        <span class="comment">// 获取请求携带的所有参数信息</span></span><br><span class="line">        Map&lt;String, String[]&gt; map = request.getParameterMap();</span><br><span class="line">        <span class="keyword">for</span>(String key:map.keySet())&#123;</span><br><span class="line">            System.out.println(key+<span class="string">&quot; : &quot;</span>+Arrays.toString(map.get(key)));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">========<span class="meta">获取请求携带的参数信息</span>=<span class="string">======</span></span><br><span class="line"><span class="meta">aaa的值</span>: <span class="string">null</span></span><br><span class="line"><span class="meta">张杰</span> : <span class="string"></span></span><br><span class="line"><span class="attr">[drink]</span></span><br><span class="line"><span class="attr">username</span> : <span class="string">[张杰]</span></span><br><span class="line"><span class="attr">password</span> : <span class="string">[123]</span></span><br><span class="line"><span class="attr">hobby</span> : <span class="string">[drink]</span></span><br></pre></td></tr></table></figure>

<p>可以知道当前端表单子标签中的name与方法传递的“name”不同时，直接返回null，而如果name相同，但是</p>
<p>表单提交时没有给name赋值，只是返回””长度为0的字符串而已。</p>
<h2 id="案例-用户登录"><a href="#案例-用户登录" class="headerlink" title="案例-用户登录"></a>案例-用户登录</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">需求分析</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">当用户在登录网页上,添加完用户名和密码后,点击&quot;登录&quot;按钮时,</span></span><br><span class="line">    <span class="attr">向服务器发送一个用户登录的请求,完成用户登录功能.</span></span><br><span class="line"><span class="meta">技术分析</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">1</span>:<span class="string">前端:</span></span><br><span class="line">        <span class="attr">form表单.收集用户填写的数据信息,将信息提交给服务器.</span></span><br><span class="line">        <span class="meta">&lt;form</span> <span class="string">action=&quot;login&quot;&gt;</span></span><br><span class="line">            <span class="attr">username</span>:<span class="string">&quot;柳岩&quot;</span></span><br><span class="line">            <span class="attr">password</span>:<span class="string">&quot;123&quot;</span></span><br><span class="line">        <span class="attr">&lt;/form&gt;</span></span><br><span class="line">    <span class="attr">2</span>:<span class="string">后台:</span></span><br><span class="line">        <span class="meta">（1）web</span>: <span class="string">控制层</span></span><br><span class="line">            <span class="attr">//servlet代码</span></span><br><span class="line">            <span class="attr">@WebServlet(&quot;/login&quot;)</span></span><br><span class="line">            <span class="meta">LoginServlet.java</span> <span class="string">继承 HttpServlet</span></span><br><span class="line">            <span class="attr">doGet(req,resp)&#123;</span></span><br><span class="line">            <span class="meta">//1.获取请求携带的数据信息</span>  <span class="string">username password</span></span><br><span class="line">            <span class="attr">//2.调用service处理业务逻辑</span></span><br><span class="line">            <span class="attr">UserService</span> <span class="string">service = new UserService();</span></span><br><span class="line">            <span class="attr">boolean</span> <span class="string">flag = service.login(username,password);</span></span><br><span class="line">            <span class="attr">//3.判断登录结果</span></span><br><span class="line">            <span class="attr">&#125;</span></span><br><span class="line">        <span class="meta">（2）service</span>: <span class="string">业务逻辑层</span></span><br><span class="line">            <span class="attr">UserService.java</span></span><br><span class="line">            <span class="attr">boolean</span> <span class="string">login(username,password)&#123;</span></span><br><span class="line">            <span class="meta">//</span> <span class="string">获取SqlSession对象</span></span><br><span class="line">            <span class="meta">//</span> <span class="string">获取dao接口的实现类对象</span></span><br><span class="line">            <span class="attr">UserMapper</span> <span class="string">mapper=sqlSession.getMapper(UserMapper.class);</span></span><br><span class="line">            <span class="meta">//</span> <span class="string">调用方法执行</span></span><br><span class="line">            <span class="attr">int</span> <span class="string">i = mapper.login(username,password);</span></span><br><span class="line">            <span class="attr">return</span> <span class="string">i&gt;0;</span></span><br><span class="line">            <span class="attr">&#125;</span></span><br><span class="line">        <span class="meta">（3）dao</span>: <span class="string">持久层</span></span><br><span class="line">        <span class="meta">@Select(&quot;select</span> <span class="string">* from user where username=#&#123;username&#125;...&quot;)</span></span><br><span class="line">        <span class="attr">int</span> <span class="string">login(@Param(&quot;username&quot;)username,</span></span><br><span class="line">        <span class="attr">@Param(&quot;password&quot;)password)</span></span><br></pre></td></tr></table></figure>

<p>看着上面的过程，关键信息，自己操作一遍就可以了。目录结构分析如下：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1</span>:<span class="string">前端  </span></span><br><span class="line">	<span class="meta">编写login.htmo</span> <span class="string">文件，放在target/day01_web-1.0-SNAPSHOT 目录下。</span></span><br><span class="line"><span class="attr">2</span>:<span class="string">后台</span></span><br><span class="line">	<span class="meta">整合了servlet+Tomcat+mybatis</span> <span class="string">知识。</span></span><br><span class="line">	<span class="meta">target/day01_web-1.0-SNAPSHOT/WEB-INF/lib</span> <span class="string">下存放mybatis所需的jar包</span></span><br><span class="line">	<span class="meta">src/main/java/lib</span> <span class="string">下也存放mybatis所需的jar包</span></span><br><span class="line">	<span class="meta">src/main/resources</span> <span class="string">下存放 mybatis的核心配置文件，日记文件，连接mysql的properties文件。</span></span><br><span class="line">	<span class="meta">src/main/java/com/itheima</span> <span class="string">下存放 dao，pojo，service，utils，web 包，分别存放：</span></span><br><span class="line">	<span class="attr">dao</span>: <span class="string">UserMapper.java 接口，注释方式查询数据 </span></span><br><span class="line">	<span class="attr">pojo</span>: <span class="string">实体类文件</span></span><br><span class="line">	<span class="attr">utils</span>: <span class="string">封装了连接数据库方法的类</span></span><br><span class="line">	<span class="attr">service</span> : <span class="string">与数据库的交互，供 servlet调用（web包下的servlet实现类调用）UserService.java</span></span><br><span class="line">	<span class="attr">web</span>: <span class="string">响应数据库，并且做出业务处理。 LoginServlet.java </span></span><br><span class="line"><span class="attr">3</span>:<span class="string">数据库</span></span><br><span class="line">	<span class="meta">在db9数据库添加表格user1，有id，username，password</span> <span class="string">三个列，并插入几条数据。</span></span><br></pre></td></tr></table></figure>

<p>UserMapper.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.dao;</span><br><span class="line"><span class="keyword">import</span> com.itheima.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from user1 where username=#&#123;username&#125; and password=#&#123;password&#125;&quot;)</span></span><br><span class="line">    <span class="function">User <span class="title">login</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username, <span class="meta">@Param(&quot;password&quot;)</span> String password)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserService.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service;</span><br><span class="line"><span class="keyword">import</span> com.itheima.dao.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.utils.MybatisUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String username,String password)</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        User user = mapper.login(username, password);</span><br><span class="line">        <span class="comment">// 如果查询结果不为空则说明登录成功</span></span><br><span class="line">        <span class="keyword">return</span> user!=<span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>LoginServlet.java </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        String username = request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(username + <span class="string">&quot;:&quot;</span> + password);</span><br><span class="line">        <span class="comment">// 调用service处理业务</span></span><br><span class="line">        UserService userService = <span class="keyword">new</span> UserService();</span><br><span class="line">        <span class="keyword">boolean</span> login = userService.login(username, password);</span><br><span class="line">        <span class="keyword">if</span>(login)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;登录成功&quot;</span>);</span><br><span class="line">            response.getWriter().print(<span class="string">&quot;&lt;h1&gt;login success !&lt;h1&gt;&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;登录失败&quot;</span>);</span><br><span class="line">            response.getWriter().print(<span class="string">&quot;&lt;h1&gt;login failed !&lt;h1&gt;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>login.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>mybatis tomcat servlet 的综合测试<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>实现登录功能<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> &gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">value</span>=<span class="string">&quot;用户登录&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">高明辉</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/03/27/web-05-Servlet-http%E5%8D%8F%E8%AE%AE/">http://example.com/2022/03/27/web-05-Servlet-http%E5%8D%8F%E8%AE%AE/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Jason</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/http/">http</a><a class="post-meta__tags" href="/tags/servlet/">servlet</a></div><div class="post_share"><div class="social-share" data-image="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day04-tomcat-servlet/%E5%B0%81%E9%9D%A2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="添加微信"/></a><div class="post-qr-code-desc">添加微信</div></li><li class="reward-item"><a href="/img/pay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/pay.jpg" alt="付款码"/></a><div class="post-qr-code-desc">付款码</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/03/29/web-06-http%E5%8D%8F%E8%AE%AE%E5%93%8D%E5%BA%94-Servlet%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/"><img class="prev-cover" src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day06-http-servlet/%E5%B0%81%E9%9D%A2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">web-06-http协议响应-Servlet处理文件下载</div></div></a></div><div class="next-post pull-right"><a href="/2022/03/27/web-04-TomCat-Servlet/"><img class="next-cover" src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day04-tomcat-servlet/%E5%B0%81%E9%9D%A2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">web-04-TomCat-Servlet</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/04/10/web-11-practice/" title="web-11-practice"><img class="cover" src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day11/%E5%B0%81%E9%9D%A2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-10</div><div class="title">web-11-practice</div></div></a></div><div><a href="/2022/04/10/web-10-practice/" title="web-10-practice"><img class="cover" src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day10/%E5%B0%81%E9%9D%A2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-10</div><div class="title">web-10-practice</div></div></a></div><div><a href="/2022/03/29/web-06-http%E5%8D%8F%E8%AE%AE%E5%93%8D%E5%BA%94-Servlet%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/" title="web-06-http协议响应-Servlet处理文件下载"><img class="cover" src="/img/java/03%E9%98%B6%E6%AE%B5Web%E6%A0%B8%E5%BF%83/day06-http-servlet/%E5%B0%81%E9%9D%A2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-29</div><div class="title">web-06-http协议响应-Servlet处理文件下载</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%8A%E7%AF%87%E5%8D%9A%E5%AE%A2%E5%9B%9E%E9%A1%BE"><span class="toc-number">1.</span> <span class="toc-text">上篇博客回顾</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-Servlet%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%92%8CAPI"><span class="toc-number">1.1.</span> <span class="toc-text">第三章 Servlet体系结构和API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet%E7%9A%84API"><span class="toc-number">1.1.1.</span> <span class="toc-text">Servlet的API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Servlet%E6%8E%A5%E5%8F%A3API%E5%88%86%E6%9E%90"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">Servlet接口API分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GenericServlet-%E9%80%9A%E7%94%A8Servlet"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">GenericServlet:通用Servlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HttpServlet-%E6%BA%90%E7%A0%81"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">HttpServlet 源码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet%E6%A8%A1%E6%9D%BF%E2%98%85"><span class="toc-number">1.1.2.</span> <span class="toc-text">Servlet模板★</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-Servlet%E5%85%B6%E4%BB%96%E7%BB%86%E8%8A%82"><span class="toc-number">1.2.</span> <span class="toc-text">第四章 Servlet其他细节</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-Servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E2%98%85"><span class="toc-number">1.2.1.</span> <span class="toc-text">4.1 Servlet的生命周期★</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">1.2.1.0.1.</span> <span class="toc-text">示例代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-servlet%E5%88%9D%E5%A7%8B%E5%8C%96%E6%97%B6%E6%9C%BA%E2%98%85"><span class="toc-number">1.2.2.</span> <span class="toc-text">4.2 servlet初始化时机★</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-1"><span class="toc-number">1.2.2.0.1.</span> <span class="toc-text">示例代码:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-Servlet%E7%9A%84%E5%A4%9A%E7%A7%8D%E7%BB%91%E5%AE%9A%E8%B7%AF%E5%BE%84"><span class="toc-number">1.2.3.</span> <span class="toc-text">4.3 Servlet的多种绑定路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DefaultServlet"><span class="toc-number">1.2.4.</span> <span class="toc-text">DefaultServlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-ServletConfig%E5%AF%B9%E8%B1%A1-%E4%BA%86%E8%A7%A3"><span class="toc-number">1.2.5.</span> <span class="toc-text">4.4 ServletConfig对象(了解)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-http%E5%8D%8F%E8%AE%AE-%E8%AF%B7%E6%B1%82"><span class="toc-number">1.3.</span> <span class="toc-text">第五章 http协议-请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">1.3.1.</span> <span class="toc-text">5.1 协议概述:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">什么是协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http%E5%8D%8F%E8%AE%AE%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">http协议是什么:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-http%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">1.3.2.</span> <span class="toc-text">5.2 http协议的组成:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E6%8A%93%E5%8F%96http%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E5%86%85%E5%AE%B9-%E6%8A%93%E5%8C%85-%E2%98%85%E2%98%85%E2%98%85"><span class="toc-number">1.3.3.</span> <span class="toc-text">5.3 抓取http协议中的内容-抓包: ★★★</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E8%AF%B7%E6%B1%82%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.3.4.</span> <span class="toc-text">5.4 请求的格式:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%EF%BC%9A%E8%AF%B7%E6%B1%82%E8%A1%8C"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">1 ：请求行:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%EF%BC%9A%E8%AF%B7%E6%B1%82%E5%A4%B4-%E7%BA%A6%E6%9D%9F%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%92%8C%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">2 ：请求头: 约束请求参数的类型和格式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E8%AF%B7%E6%B1%82%E5%A4%B4-%E4%BA%86%E8%A7%A3"><span class="toc-number">1.3.4.2.1.</span> <span class="toc-text">常见的请求头:(了解)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E7%9A%84%E5%A4%B4"><span class="toc-number">1.3.4.2.2.</span> <span class="toc-text">重要的头:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%9A%E8%AF%B7%E6%B1%82%E4%BD%93"><span class="toc-number">1.3.4.3.</span> <span class="toc-text">3：请求体:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AF%E5%AF%B9%E8%B1%A1-Request"><span class="toc-number">1.4.</span> <span class="toc-text">第六章 请求信息对象-Request</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9Crequest%E5%AF%B9%E8%B1%A1%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E6%90%BA%E5%B8%A6%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.1.</span> <span class="toc-text">操作request对象获取请求携带的数据:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E8%AF%B7%E6%B1%82%E8%A1%8C"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">操作请求行:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.1.1.1.</span> <span class="toc-text">重要方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.1.1.2.</span> <span class="toc-text">了解的方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">操作请求头:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E6%96%B9%E6%B3%95-%E2%98%85"><span class="toc-number">1.4.1.2.1.</span> <span class="toc-text">重要方法:★</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3%E7%9A%84%E6%96%B9%E6%B3%95-1"><span class="toc-number">1.4.1.2.2.</span> <span class="toc-text">了解的方法:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">1.4.1.2.3.</span> <span class="toc-text">常用的请求头:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E8%AF%B7%E6%B1%82%E4%BD%93-%E6%93%8D%E4%BD%9C%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">操作请求体: 操作请求参数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E6%96%B9%E6%B3%95-1"><span class="toc-number">1.4.1.3.1.</span> <span class="toc-text">重要方法:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E7%9A%84%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.1.3.2.</span> <span class="toc-text">请求的中文乱码处理方法</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="toc-number">1.5.</span> <span class="toc-text">案例-用户登录</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 高明辉</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'Aaee0Vekhg5KbLhMOJQrEU6A-gzGzoHsz',
      appKey: 'mmLHPEEtqvOSJhsqWra8Sq6K',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script type="text/javascript" src="/js/fairyDustCursor.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>