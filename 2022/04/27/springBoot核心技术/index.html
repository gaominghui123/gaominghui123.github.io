<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>springBoot核心技术 | Jason</title><meta name="keywords" content="springBoot,springBoot整合Mybatis以及redis"><meta name="author" content="高明辉"><meta name="copyright" content="高明辉"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="SpringBoot 核心技术！！！Spring Boot 并不是Spring功能上的增强，而是提供了一种快速使用Spring的方式。！！！ 本篇文章目标 12345- Spring概述、快速入门- SpringBoot配置文件- SpringBoot web开发- SpringBoot Junit单元测试- SpringBoot 数据访问    1 SpringBoot 快速入门01-Sprin">
<meta property="og:type" content="article">
<meta property="og:title" content="springBoot核心技术">
<meta property="og:url" content="http://example.com/2022/04/27/springBoot%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/index.html">
<meta property="og:site_name" content="Jason">
<meta property="og:description" content="SpringBoot 核心技术！！！Spring Boot 并不是Spring功能上的增强，而是提供了一种快速使用Spring的方式。！！！ 本篇文章目标 12345- Spring概述、快速入门- SpringBoot配置文件- SpringBoot web开发- SpringBoot Junit单元测试- SpringBoot 数据访问    1 SpringBoot 快速入门01-Sprin">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/%E5%B0%81%E9%9D%A2.png">
<meta property="article:published_time" content="2022-04-27T08:51:59.000Z">
<meta property="article:modified_time" content="2022-08-06T14:34:45.452Z">
<meta property="article:author" content="高明辉">
<meta property="article:tag" content="springBoot">
<meta property="article:tag" content="springBoot整合Mybatis以及redis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/%E5%B0%81%E9%9D%A2.png"><link rel="shortcut icon" href="/img/%E7%BD%91%E7%AB%99%E5%9B%BE%E6%A0%87.png"><link rel="canonical" href="http://example.com/2022/04/27/springBoot%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'springBoot核心技术',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-08-06 22:34:45'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Jason" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/%E5%A4%B4%E5%83%8F.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">176</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">206</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">34</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E5%85%B3%E4%BA%8E"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/butterfly%E4%B8%BB%E9%A2%98"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/%E5%B0%81%E9%9D%A2.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jason</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E5%85%B3%E4%BA%8E"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/butterfly%E4%B8%BB%E9%A2%98"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">springBoot核心技术</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-27T08:51:59.000Z" title="发表于 2022-04-27 16:51:59">2022-04-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-08-06T14:34:45.452Z" title="更新于 2022-08-06 22:34:45">2022-08-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/spring/">spring</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="springBoot核心技术"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="SpringBoot-核心技术"><a href="#SpringBoot-核心技术" class="headerlink" title="SpringBoot 核心技术"></a>SpringBoot 核心技术</h2><p><strong>！！！Spring Boot 并不是Spring功能上的增强，而是提供了一种快速使用Spring的方式。！！！</strong></p>
<p><strong>本篇文章目标</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">-</span> <span class="string">Spring概述、快速入门</span></span><br><span class="line"><span class="meta">-</span> <span class="string">SpringBoot配置文件</span></span><br><span class="line"><span class="meta">-</span> <span class="string">SpringBoot web开发</span></span><br><span class="line"><span class="meta">-</span> <span class="string">SpringBoot Junit单元测试</span></span><br><span class="line"><span class="meta">-</span> <span class="string">SpringBoot 数据访问</span></span><br></pre></td></tr></table></figure>



<h2 id="1-SpringBoot-快速入门"><a href="#1-SpringBoot-快速入门" class="headerlink" title="1 SpringBoot 快速入门"></a>1 SpringBoot 快速入门</h2><h3 id="01-SpringBoot概述"><a href="#01-SpringBoot概述" class="headerlink" title="01-SpringBoot概述"></a>01-SpringBoot概述</h3><p><font color="red">目的：理解SpringBoot存在的意义是什么</font> </p>
<p>​        Spring Boot 可以帮助我们开发 <font color="red">基于Spring的</font> 、<font color="red">独立的</font> 、<font color="red">生产级的</font> 应用程序</p>
<p>它的主要目标是：</p>
<ul>
<li><p>为所有Spring开发提供<strong>更快</strong>的入门体验</p>
</li>
<li><p><strong>开箱即用，提供了自动配置</strong></p>
</li>
<li><p>提供一系列大型项目通用的非功能性特性</p>
<ul>
<li>外部化配置</li>
<li>嵌入式服务器</li>
<li>安全性</li>
<li>健康检查</li>
<li>指标</li>
</ul>
</li>
<li><p><strong>完全不需要代码生成，也不需要XML配置</strong></p>
</li>
</ul>
<p>官网地址：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html">https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html</a></p>
<p>参考官网，包含以下模块：</p>
<ul>
<li><strong>核心技术（Core Features）:</strong> <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-spring-application">SpringApplication</a> | <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-external-config">External Configuration</a> | <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-profiles">Profiles</a> | <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-logging">Logging</a></li>
<li><strong>web开发（Web Applications）:</strong> <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-spring-mvc">MVC</a> | <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-embedded-container">Embedded Containers</a></li>
<li><strong>数据访问（Working with data）:</strong> <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-sql">SQL</a> | <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-nosql">NO-SQL</a></li>
<li><strong>消息集成（Messaging）:</strong> <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-messaging">Overview</a> | <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-jms">JMS</a></li>
<li><strong>单元测试（Testing）:</strong> <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-testing">Overview</a> | <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-testing-spring-boot-applications">Boot Applications</a> | <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-test-utilities">Utils</a></li>
<li><strong>高级扩展（Extending）:</strong> <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-developing-auto-configuration">Auto-configuration</a> | <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-condition-annotations">@Conditions</a></li>
</ul>
<p><font color="red">小结：</font> </p>
<p><strong>Spring Boot 并不是Spring功能上的增强，而是提供了一种快速使用Spring的方式。</strong></p>
<h3 id="02-SpringBoot快速入门"><a href="#02-SpringBoot快速入门" class="headerlink" title="02-SpringBoot快速入门"></a>02-SpringBoot快速入门</h3><p><font color="red">目的：</font> 能基于SpringBoot快速开发一个Spring应用</p>
<p><strong>需求：</strong> 搭建SpringBoot工程，定义HelloController.hello()方法，返回”Hello SpringBoot!”。</p>
<p><font color="red">步骤：</font> </p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">创建Maven项目</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">导入SpringBoot起步依赖</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">编写引导类</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">定义HelloController类编写请求方法</span></span><br><span class="line"><span class="meta">5.</span> <span class="string">启动测试</span></span><br></pre></td></tr></table></figure>



<p><font color="red">实现：</font> </p>
<p>1、创建空Maven项目</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210502223550970.png" alt="image-20210502223550970"></p>
<blockquote>
<p><strong>三步： Maven的配置、JDK、编码。</strong></p>
<p>无论是新项目还是老项目你新打开，你都务必要三件事情</p>
<p>Maven aliyun jar下载加速地址：<a target="_blank" rel="noopener" href="https://maven.aliyun.com/mvn/guide">https://maven.aliyun.com/mvn/guide</a></p>
</blockquote>
<p>2、导入SpringBoot起步依赖</p>
<p>导入了依赖后，可以在maven管理看到前面用的spring核心包等依赖都被导进来了。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--springboot工程需要继承的父工程--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--web开发的起步依赖   场景启动器依赖--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--版本已经被父工程 锁定了，所以这里不用指定工程。--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3、编写引导类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 该注释表明当前类是springboot 的启动类/引导类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(HelloApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4、定义HelloController</p>
<p>（<strong>还是使用MVC</strong>，但是导入的依赖却非常简短，回顾前面整合spring ioc 与spring mvc，导入的依赖可繁乱了，又可能会发生冲突）</p>
<p>跟启动类同包package com.itheima下定义HelloController类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot; hello Spring Boot !&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5、运行引导类来启动测试，访问浏览器: <a target="_blank" rel="noopener" href="http://localhost:8082/hello">http://localhost:8082/hello</a></p>
<p>在控制台可以看到打印的信息，得到访问的端口：Tomcat started on port(s): 8082 (http)…</p>
<p><font color="red">小结：</font> </p>
<p>三步构建一个SpringBoot：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">添加依赖（场景依赖）</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">编写配置文件和启动类</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">编写业务代码</span></span><br></pre></td></tr></table></figure>



<h3 id="03-SpringBoot依赖原理分析及优势"><a href="#03-SpringBoot依赖原理分析及优势" class="headerlink" title="03-SpringBoot依赖原理分析及优势"></a>03-SpringBoot依赖原理分析及优势</h3><p><font color="red">目的：</font></p>
<ol>
<li>理解SpringBoot项目的pom依赖关系</li>
<li>理解SpringBoot对依赖的版本控制</li>
<li>掌握starter作用</li>
</ol>
<p><font color="red">讲解：</font></p>
<h4 id="1、SpringBoot项目的pom依赖关系"><a href="#1、SpringBoot项目的pom依赖关系" class="headerlink" title="1、SpringBoot项目的pom依赖关系"></a>1、SpringBoot项目的pom依赖关系</h4><p>通过点击 <code>spring-boot-starter-parent</code> 父工程发现，它的父工程是：</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210502224508970.png" alt="image-20210502224508970"></p>
<p>进入到 <code>spring-boot-dependencies</code> 工程中发现：<strong>声明了所有开发中常用的依赖的版本号,自动版本号的控制</strong>（当然也可以修改）</p>
<p>见到的 <code>spring-boot-starter-*</code>： 第三方为我们提供的简化开发的<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/using-spring-boot.html#using-boot-starter">场景启动器</a>。</p>
<h4 id="2、关于stater作用"><a href="#2、关于stater作用" class="headerlink" title="2、关于stater作用"></a>2、关于stater作用</h4><p>我们再次从工程中 点击 <code>spring-boot-starter-web</code> 进入依赖管理：</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210502225141936.png" alt="image-20210502225141936"></p>
<p><code>spring-boot-starter</code>是 <strong>所有场景启动器最底层的依赖,提供了各个场景所依赖的spring环境</strong></p>
<p>分析<code>spring-boot-starter-web</code>依赖发现：内部把关于web MVC开发所有的依赖都已经导入并且版本控制完成了，我们只需引入 <code>spring-boot-starter-web</code> 这个依赖就可以实现我们的 Web MVC的功能，是不是很强大！</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210502225908412.png" alt="image-20210502225908412"></p>
<p><font color="red">小结：</font></p>
<ol>
<li>只要SpringBoot父工程中帮助我们管理当前你需要使用的jar的依赖版本，开发人员则无需添加版本。</li>
<li>SpringBoot官方提供了大量stater场景启动器的目的：快速进入对应的服务，让开发人员将重点放在<strong>业务逻辑</strong>上。</li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">*</span> <span class="string">springboot依赖配置总结：</span></span><br><span class="line"><span class="meta">*</span>  <span class="string">1.定义了常用的资源版本，并进行了版本锁定，对于开发者来说，无需关心版本的依赖冲突问题</span></span><br><span class="line"><span class="meta">*</span>  <span class="string">2.定义了资源和插件的各种版本，对于开着者，直接使用即可</span></span><br><span class="line"><span class="meta">*</span>  <span class="string">3.定义了50多个通用的场景启动器，简化开发配置</span></span><br><span class="line"></span><br><span class="line"><span class="attr">一句话，资源版本插件等帮你导入，你可以方便使用，因此可以更专注业务开发！</span></span><br></pre></td></tr></table></figure>

<h2 id="2-SpringBoot-配置文件"><a href="#2-SpringBoot-配置文件" class="headerlink" title="2 SpringBoot 配置文件"></a>2 SpringBoot 配置文件</h2><h3 id="04-SpringBoot2核心技术-配置文件分类"><a href="#04-SpringBoot2核心技术-配置文件分类" class="headerlink" title="04-SpringBoot2核心技术-配置文件分类"></a>04-SpringBoot2核心技术-配置文件分类</h3><p><font color="red">目的：</font></p>
<ol>
<li>掌握SpringBoot加载配置文件作用</li>
<li>掌握配置文件<strong>分类有两大类</strong>，如果同时存在会怎么样？</li>
</ol>
<p><font color="red">讲解：</font></p>
<p><strong>配置文件的作用：</strong></p>
<ul>
<li><p>修改SpringBoot自动配置的默认值；SpringBoot在底层都给我们自动配置好；</p>
</li>
<li><p>SpringBoot官方讲解：<strong>约定</strong> 优于 <strong>配置</strong> 优于 <strong>编码</strong></p>
</li>
</ul>
<p><strong>配置文件分类：</strong></p>
<p>通过<code>spring-boot-starter-parent</code>依赖发现：</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210502231640928.png" alt="image-20210502231640928"></p>
<p>配置文件是两大类：<strong>yaml和properties</strong> 配置文件</p>
<p>以端口号修改为例：（<strong>框架的配置文件给我们配了很多默认值，我们想要修改默认配置，那么就需要自己建立配置文件，修改配置，由于自定义的配置文件优先级比较大，因此可以更改系统帮我们配置的默认值</strong>）</p>
<ol>
<li><p>在resources目录下新建 application.properties 配置文件，添加端口号：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8081   # 修改tomcat端口</span></span><br></pre></td></tr></table></figure>

<p>启动项目发现端口修改为 8081</p>
</li>
<li><p>注释application.properties目录下端口设置，添加 application.yml配置文件</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br></pre></td></tr></table></figure>

<p>启动项目发现端口修改为 8082</p>
</li>
<li><p>如果把application.properties中的注释取消，即两种配置文件同时存在，启动项目发现项目的端口是 <strong>8081</strong>，<strong>说明是application.properties配置文件生效</strong></p>
</li>
<li><p>分别在application.properties和application.yml 里添加</p>
<ul>
<li><p>company1=itheima、company2: itcast</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210502233124402.png" alt="image-20210502233124402"></p>
</li>
</ul>
</li>
<li><ul>
<li><strong>通过 @value注解注入读取配置</strong>（<strong>配置文件的内容已经被框架注入到Spring IOC容器中</strong>了，可以直接引用哈）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;company1&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String company1;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;company2&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String company2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot; hello Spring Boot !&quot;</span> + company1 +<span class="string">&quot;  &quot;</span> + company2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>访问浏览器：</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210502233345342.png" alt="image-20210502233345342"></p>
<p><strong>结论：</strong></p>
<p>两个配置文件同时都生效了，他们之间是取<strong>并集</strong>关系</p>
</li>
</ol>
<p><font color="red">小结：</font></p>
<ul>
<li><strong>约定</strong> 优于 <strong>配置</strong> 优于 <strong>编码</strong>  </li>
<li>两类配置文件如果<strong>同时存在，若 key 相同则 properties 优先级高，若key不同则合并</strong>（自定义</li>
</ul>
<h3 id="06-SpringBoot2核心技术-YAML介绍"><a href="#06-SpringBoot2核心技术-YAML介绍" class="headerlink" title="06-SpringBoot2核心技术-YAML介绍"></a>06-SpringBoot2核心技术-YAML介绍</h3><p><font color="red">目的：</font>了解yaml是什么，有什么作用</p>
<p>YAML 是 “YAML Ain’t Markup Language”（YAML 不是一种标记语言）的递归缩写。在开发的这种语言时，YAML 的意思其实是：”Yet Another Markup Language”（仍是一种标记语言）。 </p>
<p>非常适合用来做以数据为中心的配置文件</p>
<h3 id="07-SpringBoot2核心技术-YAML基本使用"><a href="#07-SpringBoot2核心技术-YAML基本使用" class="headerlink" title="07-SpringBoot2核心技术-YAML基本使用"></a>07-SpringBoot2核心技术-YAML基本使用</h3><p><font color="red">目的：</font>掌握Yaml语法的基本数据类型的配置</p>
<p><font color="red">步骤：</font></p>
<p>基本语法：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1-</span> <span class="string">大小写敏感</span></span><br><span class="line"><span class="meta">2-</span> <span class="string">数据值前边必须有空格，作为分隔符</span></span><br><span class="line"><span class="meta">3-</span> <span class="string">使用缩进表示层级关系</span></span><br><span class="line"><span class="meta">4-</span> <span class="string">缩进不允许使用Tab键，只许使用空格（各个系统 Tab对应的 空格数目可能不同，导致层次混乱）。</span></span><br><span class="line"><span class="meta">5-</span> <span class="string">缩进的空格数目不重要，只要相同层级的元素左侧对齐即可</span></span><br><span class="line"><span class="meta">6-</span> <span class="string">&#x27;&#x27;#&quot; 表示注释，从这个字符一直到行尾，都会被解析器忽略。</span></span><br><span class="line"><span class="meta">7-</span> <span class="string">字符串无需加引号，如果要加，`&#x27;&#x27;`与`&quot;&quot;`表示字符串内容 会被 转义/不转义</span></span><br></pre></td></tr></table></figure>

<p><font color="red">实现：</font></p>
<p><strong>1、配置文件：</strong></p>
<p>1 **对象(map)**：键值对的集合。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span>  </span><br><span class="line">   <span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line"><span class="comment"># 或者行内写法</span></span><br><span class="line"><span class="attr">person:</span> &#123;<span class="attr">name:</span> <span class="string">zhangsan</span>&#125;</span><br></pre></td></tr></table></figure>

<p>2 <strong>数组</strong>：一组按次序排列的值</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">address:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">beijing</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">shanghai</span></span><br><span class="line"><span class="comment"># 或者行内写法</span></span><br><span class="line"><span class="attr">address:</span> [<span class="string">beijing</span>,<span class="string">shanghai</span>]</span><br></pre></td></tr></table></figure>

<p>3 <strong>纯量</strong>：单个的、不可再分的值</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">msg1:</span> <span class="string">&#x27;hello \n world&#x27;</span>  <span class="comment"># 单引忽略转义字符</span></span><br><span class="line"><span class="attr">msg2:</span> <span class="string">&quot;hello \n world&quot;</span>  <span class="comment"># 双引识别转义字符</span></span><br></pre></td></tr></table></figure>

<p>4 <strong>参数引用</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">lisi</span> </span><br><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">$&#123;name&#125;</span> <span class="comment"># 引用上边定义的name值</span></span><br></pre></td></tr></table></figure>



<p><strong>2、使用 @value 读取配置：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取普通配置</span></span><br><span class="line"><span class="meta">@Value(&quot;$&#123;company1&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String company1;</span><br><span class="line"><span class="comment">//获取对象属性</span></span><br><span class="line"><span class="meta">@Value(&quot;$&#123;person.name&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="comment">//获取数组</span></span><br><span class="line"><span class="meta">@Value(&quot;$&#123;address[0]&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String address1;</span><br><span class="line"><span class="comment">//获取纯量</span></span><br><span class="line"><span class="meta">@Value(&quot;$&#123;msg1&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String msg1;</span><br><span class="line"><span class="comment">//获取纯量</span></span><br><span class="line"><span class="meta">@Value(&quot;$&#123;msg2&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String msg2;</span><br></pre></td></tr></table></figure>



<h3 id="08-SpringBoot2核心技术-YAML高级配置"><a href="#08-SpringBoot2核心技术-YAML高级配置" class="headerlink" title="08-SpringBoot2核心技术-YAML高级配置"></a>08-SpringBoot2核心技术-YAML高级配置</h3><p><font color="red">目的：</font>掌握自定义对象及成员属性是对象的数据类型</p>
<p><font color="red">步骤：</font></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">定义实体类 Man和Woman</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">添加配置文件</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">依赖注入测试</span></span><br></pre></td></tr></table></figure>

<p><font color="red">实现：</font></p>
<p>1、定义实体类 Man和Woman</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;man&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Man</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String userName;</span><br><span class="line">   <span class="keyword">private</span> Boolean boss;</span><br><span class="line">   <span class="keyword">private</span> Date birth;</span><br><span class="line">   <span class="keyword">private</span> Integer age;</span><br><span class="line">   <span class="keyword">private</span> String[] address;</span><br><span class="line">   <span class="keyword">private</span> List&lt;String&gt; addressList;</span><br><span class="line">   <span class="keyword">private</span> Map&lt;String, Object&gt; hobbies;  <span class="comment">// 爱好</span></span><br><span class="line">   <span class="keyword">private</span> Woman woman;</span><br><span class="line">   <span class="keyword">private</span> List&lt;Woman&gt; wifes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Woman</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; addresses;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、添加配置文件</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br><span class="line"></span><br><span class="line"><span class="attr">company2:</span> <span class="string">itcast</span></span><br><span class="line"><span class="attr">company1:</span> <span class="string">itheima</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">man:</span></span><br><span class="line">  <span class="attr">userName:</span> <span class="string">laowang</span></span><br><span class="line">  <span class="attr">boss:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">1980</span><span class="string">/09/09</span> <span class="number">01</span><span class="string">:01:01</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">41</span></span><br><span class="line">  <span class="attr">address:</span> [<span class="string">beijing</span>, <span class="string">shanghai</span>]</span><br><span class="line">  <span class="attr">addressList:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">北京</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">上海</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">深圳</span></span><br><span class="line">  <span class="attr">hobbies:</span></span><br><span class="line">    <span class="attr">sports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">badminton</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">basketball</span></span><br><span class="line">    <span class="attr">musics:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">dj</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">23</span></span><br><span class="line">  <span class="attr">woman:</span></span><br><span class="line">    <span class="attr">userName:</span> <span class="string">xiaohua</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">addresses:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">北京</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">上海</span></span><br><span class="line">  <span class="attr">wifes:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">userName:</span> <span class="string">xiaosan1</span></span><br><span class="line">       <span class="attr">age:</span> <span class="number">25</span></span><br><span class="line">       <span class="attr">addresses:</span></span><br><span class="line">         <span class="bullet">-</span> <span class="string">北京</span></span><br><span class="line"></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">userName:</span> <span class="string">xiaosan2</span></span><br><span class="line">       <span class="attr">age:</span> <span class="number">20</span></span><br><span class="line">       <span class="attr">addresses:</span></span><br><span class="line">         <span class="bullet">-</span> <span class="string">上海</span></span><br></pre></td></tr></table></figure>

<p><strong>3、依赖注入测试</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">前导：</span></span><br><span class="line"><span class="attr">这里的依赖注入意思是：将配置文件中配置的对应的属性值注入到Man这个类中对应的属性变量</span></span><br><span class="line"></span><br><span class="line"><span class="meta">注意：配置文件中的变量，本来就被spring</span> <span class="string">boot 框架 注入到spring ioc容器中了哦</span></span><br><span class="line"><span class="attr">我们可以像前面讲的如下方式引用配置文件的值：</span></span><br><span class="line">    <span class="attr">@Value(&quot;$&#123;company1&#125;&quot;)</span></span><br><span class="line">    <span class="attr">private</span> <span class="string">String company1;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">使用</span> <span class="string"></span></span><br><span class="line"><span class="meta">@</span> <span class="string">ConfigurationProperties(prefix = &quot;man”) 注解的类表示属性类。</span></span><br><span class="line"><span class="attr">public</span> <span class="string">class Man&#123;...&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">prefix</span> = <span class="string">&quot;man” 表示：如果在自定义配置文件中有man开头的配置，如上面配置类</span></span><br><span class="line"><span class="attr">那么就会将配置文件中配置的值跟Man类属性对应的属性绑定，注入！这就是我们的目的！</span></span><br><span class="line"><span class="attr">如果没有自定义配置文件或者自定义配置文件中没有man开头对应值配置，</span></span><br><span class="line"><span class="attr">那么在注入Man类bean时，bean对象属性就会是默认属性值</span></span><br><span class="line"></span><br><span class="line"><span class="meta">然后</span> <span class="string">通过常规的 @Component 将man这个bean注入到spring ioc容器中！</span></span><br><span class="line"><span class="meta">或者在启动类前添加：@EnableConfigurationProperties(Man.class)</span> <span class="string">使得man这个bean被注入到IOC中！</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">这里与属性类绑定，只是为了自动化配置Bean（下一篇博客讲解）</span> <span class="string">时 能使用自定义的值，而不是默认值！</span></span><br><span class="line"><span class="meta">如自定义配置文件配置了port</span>: <span class="string">80 那么就会更改默认的端口置！</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>方式1：引导类开启注解支持(推荐)</strong></p>
<p>@自定义类上ConfigurationProperties(prefix = “man”)+ 启动类上 @EnableConfigurationProperties(Man.class)</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503001542063.png" alt="image-20210503001542063"></p>
<p><strong>方式2：自定义类上：@ConfigurationProperties(prefix = “man”)+@Component</strong></p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503002259114.png" alt="image-20210503002259114"></p>
<p>Controller编写代码测试：<a target="_blank" rel="noopener" href="http://localhost:8082/getman">http://localhost:8082/getman</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Man man;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;getman&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Man <span class="title">man</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> man;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>优化：将 Woman类放在 Man类中，作为内部类</strong></p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503001903469.png" alt="image-20210503001903469"></p>
<h3 id="09-SpringBoot2核心技术-实现配置文件自动提示"><a href="#09-SpringBoot2核心技术-实现配置文件自动提示" class="headerlink" title="09-SpringBoot2核心技术-实现配置文件自动提示"></a>09-SpringBoot2核心技术-实现配置文件自动提示</h3><p><font color="red">目的：</font>解决实体类配置文件 出现以下现象：<img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503002632632.png" alt="image-20210503002632632"></p>
<p><strong>自定义的类和配置文件绑定</strong>一般没有提示。</p>
<p><font color="red">步骤：</font></p>
<ol>
<li><p>打开<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-custom-starter-module-autoconfigure">官网</a>查看步骤</p>
</li>
<li><p>添加依赖实现自动提示</p>
</li>
</ol>
<p><font color="red">实现：</font></p>
<p>1 在pom文件中添加：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--解决SpringBoot自定义配置提示问题--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--因为只是在编写代码起作用，实际打包时不需要这个依赖，所有要排除--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="10-SpringBoot2核心技术-多环境切换"><a href="#10-SpringBoot2核心技术-多环境切换" class="headerlink" title="10-SpringBoot2核心技术-多环境切换"></a>10-SpringBoot2核心技术-多环境切换</h3><p><font color="red">目的：</font>profile是用来完成不同环境下，配置动态切换功能的</p>
<p><font color="red">实现：</font></p>
<p>profile配置方式：</p>
<p>​    多profile文件方式：<strong>提供多个配置文件，每个代表一种环境</strong>。</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">application-dev.properties/yml</span> <span class="string">开发环境</span></span><br><span class="line"><span class="meta">application-test.properties/yml</span> <span class="string">测试环境</span></span><br><span class="line"><span class="meta">application-pro.properties/yml</span> <span class="string">生产环境</span></span><br></pre></td></tr></table></figure>

<p><strong>方式1：使用多个配置文档：</strong></p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503010721064.png" alt="image-20210503010721064"></p>
<p>​    </p>
<p><strong>方式2：单个yml配置文档，文档中使用  — 分隔不同配置</strong></p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503011014412.png" alt="image-20210503011014412"></p>
<p><strong>profile激活三种方式</strong></p>
<ul>
<li><p><strong>1 配置文件： 再配置文件中配置：spring.profiles.active=dev</strong></p>
</li>
<li><p>2 虚拟机参数：在VM options 指定：-Dspring.profiles.active=dev</p>
</li>
<li><p><strong>3 命令行参数：java -jar XXX.jar –spring.profiles.active=dev</strong> </p>
<p>先把工程打包，进入包的目录，然后运行上面的命令便可以jar包形式将工程跑起来，激活环境为dev，其中xxx是包的名称。</p>
</li>
</ul>
<p><font color="red">小结：</font></p>
<ul>
<li>实际开发使用 多profile形式，主要用于<strong>切换不同的环境，便于项目维护</strong>；</li>
</ul>
<h3 id="11-SpringBoot2核心技术-项目内部配置文件加载顺序"><a href="#11-SpringBoot2核心技术-项目内部配置文件加载顺序" class="headerlink" title="11-SpringBoot2核心技术-项目内部配置文件加载顺序"></a>11-SpringBoot2核心技术-项目内部配置文件加载顺序</h3><p><font color="red">目的：</font>掌握配置文件加载顺序问题</p>
<p><font color="red">步骤：</font></p>
<p>1、查看<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-external-config">官网</a>，可以看出给了17种方式的配置加载形式</p>
<p>2、按照官网说明，添加配置实现</p>
<p><font color="red">实现：</font></p>
<p><strong>优先级：由高到底</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1-</span> <span class="string">file:./config/：当前项目下的/config目录下</span></span><br><span class="line"><span class="meta">2-</span> <span class="string">file:./           ：当前项目的根目录</span></span><br><span class="line"><span class="meta">3-</span> <span class="string">classpath:/config/：classpath的/config目录</span></span><br><span class="line"><span class="meta">4-</span> <span class="string">classpath:/  ：classpath的根目录</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ps</span>:<span class="string"></span></span><br><span class="line"><span class="meta">1,2</span> <span class="string">是模块外，工程下的目录。</span></span><br><span class="line"><span class="meta">3,4</span> <span class="string">是resources下，或者说是模块的根目录。</span></span><br></pre></td></tr></table></figure>



<h3 id="12-SpringBoot2核心技术-项目外部配置文件加载顺序"><a href="#12-SpringBoot2核心技术-项目外部配置文件加载顺序" class="headerlink" title="12-SpringBoot2核心技术-项目外部配置文件加载顺序"></a>12-SpringBoot2核心技术-项目外部配置文件加载顺序</h3><p><font color="red">目的：</font>可以在jar包外修改配置文件；外部配置文件的使用是为了对内部文件的配合</p>
<p><strong>整体加载优先级： jar包外  到  jar包内</strong>，也就是包外的优先级大于包内</p>
<p>外部配置文件加载顺序如下四种优先级：<strong>4&gt;3&gt;2&gt;1</strong></p>
<ol>
<li><p><strong>jar包同级没有任何配置文件</strong>，也没有config目录下的配置文件时，默认使用jar内的配置优先级</p>
<p>注意：jar包打包的时候 只会去打包classpath(src|main/resources)的配置文件，项目的根目录下（也就是工程内模块下）的配置文件不会被打包到jar包中。因此使用jar包内的优先级。</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">java</span> <span class="string">-jar app.jar</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>jar包同级目录下有如下文件</strong>,则配置文件会生效，会被自动的加载</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1</span>:<span class="string">/config/application.properties</span></span><br><span class="line"><span class="attr">2</span>:<span class="string">application.properties</span></span><br><span class="line"><span class="meta">命令：java</span> <span class="string">-jar app.jar</span></span><br><span class="line"><span class="attr">1</span> <span class="string">优先级大于2</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>指定配置文件位置</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">java</span> <span class="string">-jar app.jar --spring.config.location=e://application.properties</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>指定参数</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">java</span> <span class="string">-jar app.jar  --server.port=9000</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="3-SpringBoot-Web-MVC开发"><a href="#3-SpringBoot-Web-MVC开发" class="headerlink" title="3 SpringBoot Web MVC开发"></a>3 SpringBoot Web MVC开发</h2><h3 id="14-SpringBoot2核心技术-SpringMVC自动配置概述"><a href="#14-SpringBoot2核心技术-SpringMVC自动配置概述" class="headerlink" title="14-SpringBoot2核心技术-SpringMVC自动配置概述"></a>14-SpringBoot2核心技术-SpringMVC自动配置概述</h3><p><font color="red">目的：</font>掌握SpringBoot对Web MVC的自动化配置支持</p>
<p><strong>Spring Boot为Spring MVC提供了自动配置</strong>，可与大多数应用程序一起很好地工作。<strong>SpringMVC 有了SpringBoot加持，让开发web应用更加的简单。</strong></p>
<p>参考<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/spring-boot-features.html#boot-features-developing-web-applications">官网</a>；介绍如下：自动配置在Spring的默认值之上添加了以下功能：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">-</span> <span class="string">包含`ContentNegotiatingViewResolver`和`BeanNameViewResolver`视图解析器。</span></span><br><span class="line"><span class="meta">-</span> <span class="string">支持服务静态资源，包括对WebJars的支持。</span></span><br><span class="line"><span class="meta">-</span> <span class="string">自动注册`Converter`，`GenericConverter`和`Formatter`。</span></span><br><span class="line"><span class="meta">-</span> <span class="string">支持`HttpMessageConverters`。</span></span><br><span class="line"><span class="meta">-</span> <span class="string">自动注册`MessageCodesResolver`国际化。</span></span><br><span class="line"><span class="meta">-</span> <span class="string">静态`index.html`欢迎页支持。</span></span><br><span class="line"><span class="meta">-</span> <span class="string">定制`Favicon`网站icon图片支持。</span></span><br><span class="line"><span class="meta">-</span> <span class="string">自动使用`ConfigurableWebBindingInitializer`bean。</span></span><br></pre></td></tr></table></figure>

<p>如果要保留这些Spring Boot MVC定制并进行更多的<a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/5.2.14.RELEASE/spring-framework-reference/web.html#mvc">MVC定制</a>（拦截器，格式化程序，视图控制器和其他功能），<strong>不用@EnableWebMvc注解。使用</strong> <strong><code>@Configuration</code></strong> <strong>+</strong> <strong><code>WebMvcConfigurer</code></strong> <strong>自定义规则</strong></p>
<h3 id="15-SpringBoot2核心技术-静态资源支持"><a href="#15-SpringBoot2核心技术-静态资源支持" class="headerlink" title="15-SpringBoot2核心技术-静态资源支持"></a>15-SpringBoot2核心技术-静态资源支持</h3><p><font color="red">目的：</font></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">了解 SpringBoot对静态资源（js/css/image等）支持</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">能修改原属性配置</span></span><br></pre></td></tr></table></figure>

<p><strong>1、默认情况下：</strong></p>
<p>Spring Boot从类路径中名为**<code>/static</code>（<code>/public</code>或<code>/resources</code>或<code>/META-INF/resources</code>）**的目录中或从的根中提供静态内容。</p>
<p>新建一个Maven项目，将<code>图片</code> 下的图片分别放在对应的目录下：</p>
<img src="/img/java/04阶段热门框架/day10-day11springboot+/image-20210503015019177.png" alt="image-20210503015019177" style="zoom:50%;" />

<img src="/img/java/04阶段热门框架/day10-day11springboot+/image-20210503015216202.png" alt="image-20210503015216202" style="zoom:50%;" />

<blockquote>
<p>注意：<code>/META-INF/resources</code>是两级文件夹</p>
</blockquote>
<p>浏览器访问：<a target="_blank" rel="noopener" href="http://localhost:8080/4.jpg">http://localhost:8080/4.jpg</a></p>
<p><strong>2、修改默认配置：</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置自定义的静态资源路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式1：自定义静态资源的路径，</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">static-locations:</span> <span class="string">classpath:/web/</span></span><br><span class="line">    <span class="comment">#http://localhost:8082/5.jpg   5.jpg 是web目录下的照片</span></span><br><span class="line"><span class="comment">#方式1 会覆盖默认的路径 /resources/ 、 /public/  、 /META-INF/resources/ 、 /static/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式2：自定义访问静态资源的url通配 ，这里并不是指定静态资源路径，</span></span><br><span class="line">		<span class="comment">#而是给默认路径或者自定义路径添加前缀。</span></span><br><span class="line">		<span class="comment">#如下，必须以web开头的url才能访问静态资源</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">static-path-pattern:</span> <span class="string">/web/**</span></span><br><span class="line">	<span class="comment"># 资源public下的2.jpg 访问路径 http://localhost:8080/web/5.jpg，多了web。</span></span><br></pre></td></tr></table></figure>

<p>静态资源路径配置 对应属性配置源码：</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503015824230.png" alt="image-20210503015824230"></p>
<h3 id="16-SpringBoot2核心技术-拦截器支持"><a href="#16-SpringBoot2核心技术-拦截器支持" class="headerlink" title="16-SpringBoot2核心技术-拦截器支持"></a>16-SpringBoot2核心技术-拦截器支持</h3><p><font color="red">目的：</font>理解SpringBoot对拦截器支持，并且能够独立配置拦截器</p>
<p><font color="red">步骤：</font></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">编写MyInterceptor类拦截类，实现HandlerInterceptor接口，并@Component交给容器管理</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">拦截器注册到容器中（实现WebMvcConfigurer的addInterceptors）</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">释放静态资源</span></span><br></pre></td></tr></table></figure>

<p><font color="red">实现：</font></p>
<p><strong>第一步：MyInterceptor类重写 类中的方法：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.heima.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;preHandle run....&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>第二步：拦截器注册到容器中（实现WebMvcConfigurer的addInterceptors）：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.heima.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.heima.interceptor.MyInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MyInterceptor myInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册拦截器</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addInterceptor(myInterceptor).addPathPatterns(<span class="string">&quot;/**&quot;</span>)<span class="comment">//拦截所有，但释放如下静态资源：</span></span><br><span class="line">        .excludePathPatterns(<span class="string">&quot;/**/*.css&quot;</span>,<span class="string">&quot;/**/*.jpg&quot;</span>,<span class="string">&quot;/**/*.js&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h3 id="17-SpringBoot2核心技术-Servlet、Filter、Listener支持"><a href="#17-SpringBoot2核心技术-Servlet、Filter、Listener支持" class="headerlink" title="17-SpringBoot2核心技术-Servlet、Filter、Listener支持"></a>17-SpringBoot2核心技术-Servlet、Filter、Listener支持</h3><p><font color="red">目的：</font>理解SpringBoot对SpringMVC原生组件的支持</p>
<p><font color="red">步骤：</font></p>
<p>1、添加注解支持 @ServletComponentScan(basePackages = <strong>“com.itheima.sh”</strong>) :指定原生Servlet组件都放在那里</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503023851378.png" alt="image-20210503023851378"></p>
<p>2、新建com.itheima.sh 包，在该包下建立三文件MyFilter.java;MyServlet.java;MySwervletContextListener.java。（编写对应的组件）</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(name</span>=<span class="string">“”, urlPatterns = **&quot;/my&quot;**)：效果：直接响应</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns</span>=<span class="string">&#123;**&quot;/css/\*&quot;**,**&quot;/images/\*&quot;**&#125;)</span></span><br><span class="line"><span class="attr">@WebListener</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.heima.web;</span><br><span class="line">...</span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@WebFilter(filterName=&quot;myFilter&quot;, urlPatterns=&#123;&quot;/css/*&quot;,&quot;/images/*&quot;&#125;)</span> <span class="comment">//my</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyFilter初始化完成&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyFilter工作&quot;</span>);</span><br><span class="line">        chain.doFilter(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyFilter销毁&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.heima.web;</span><br><span class="line">...</span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/myServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;66666&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.heima.web;</span><br><span class="line">...</span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySwervletContextListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MySwervletContextListener监听到项目初始化完成&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MySwervletContextListener监听到项目销毁&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3、启动测试</p>
<h2 id="4-SpringBoot-单元测试集成"><a href="#4-SpringBoot-单元测试集成" class="headerlink" title="4 SpringBoot 单元测试集成"></a>4 SpringBoot 单元测试集成</h2><h3 id="19-SpringBoot2核心技术-整合Junit4"><a href="#19-SpringBoot2核心技术-整合Junit4" class="headerlink" title="19-SpringBoot2核心技术-整合Junit4"></a>19-SpringBoot2核心技术-整合Junit4</h3><p><font color="red">目的：</font>掌握SpringBoot整合 Junit4 单元测试</p>
<p><font color="red">步骤：</font></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">引入场景（test）依赖</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">编写测试类，添加注解</span></span><br><span class="line"><span class="attr">注意：</span></span><br><span class="line"><span class="meta">junit4整合springboot</span> <span class="string">约定：</span></span><br><span class="line"><span class="attr">test目录下的测试类要与main目录下的springboot启动类同路径或者子路径下</span></span><br><span class="line"><span class="meta">否则测试类需要添加注解：@ContextConfiguration(classes</span> = <span class="string">InterceptorApplication.class)</span></span><br></pre></td></tr></table></figure>

<p><font color="red">实现：</font></p>
<p>第一步 pom依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第二步：编写测试类，添加注解``@SpringBootTest和@RunWith(SpringRunner.class)` </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com;</span><br><span class="line">（略）</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span><span class="comment">//必须指定</span></span><br><span class="line"><span class="comment">//junit4整合springboot 约定：测试类要与springboot启动类同路径或者子路径下</span></span><br><span class="line"><span class="comment">//如何解决？</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = InterceptorApplication.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAll</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 测试类被加载时只运行一次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@BeforeClass</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">beforeAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before Testclass run...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserServiceImpl userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">        String name = userService.getName();</span><br><span class="line">        System.out.println(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test2 run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterClass</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">afterClass</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after class run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>执行测试类，控制台打印结果：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">before</span> <span class="string">Testclass run...</span></span><br><span class="line"><span class="attr">...(略)</span></span><br><span class="line"><span class="attr">before</span> <span class="string">run....</span></span><br><span class="line"><span class="attr">user..</span></span><br><span class="line"><span class="attr">after</span> <span class="string">run....</span></span><br><span class="line"><span class="attr">before</span> <span class="string">run....</span></span><br><span class="line"><span class="attr">test2</span> <span class="string">run....</span></span><br><span class="line"><span class="attr">after</span> <span class="string">run....</span></span><br><span class="line"><span class="attr">after</span> <span class="string">class run....</span></span><br></pre></td></tr></table></figure>



<h3 id="20-SpringBoot2核心技术-整合Junit5"><a href="#20-SpringBoot2核心技术-整合Junit5" class="headerlink" title="20-SpringBoot2核心技术-整合Junit5"></a>20-SpringBoot2核心技术-整合Junit5</h3><p><font color="red">目的：</font>掌握SpringBoot整合 Junit5单元测试及新特性</p>
<p><font color="red">讲解：</font></p>
<p><strong>Spring Boot 2.2.0 版本开始引入 JUnit 5 作为单元测试默认库，2.3.X版本还保留了Junit4版本测试，但是在2.4.X则不再支持Junit4（<a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.4-Release-Notes">参考官方</a>）</strong></p>
<p>作为最新版本的JUnit框架，<a target="_blank" rel="noopener" href="https://junit.org/junit5/">JUnit5</a>与之前版本的Junit框架有很大的不同。由三个不同子项目的几个不同模块组成。</p>
<p>JUnit 5 = JUnit Platform + JUnit Jupiter + JUnit Vintage</p>
<img src="/img/java/04阶段热门框架/day10-day11springboot+/image-20210503105101344.png" alt="image-20210503105101344" style="zoom:23%;" />

<p><strong>JUnit Platform</strong>: Junit Platform是在JVM上启动测试框架的基础，不仅支持Junit自制的测试引擎，其他测试引擎也都可以接入。</p>
<p><strong>JUnit Jupiter</strong>: JUnit Jupiter提供了JUnit5的新的编程模型，是JUnit5新特性的核心。内部 包含了一个<strong>测试引擎</strong>，用于在Junit Platform上运行。</p>
<p><strong>JUnit Vintage</strong>: 由于JUint已经发展多年，为了照顾老的项目，JUnit Vintage提供了兼容JUnit4.x,Junit3.x的测试引擎。</p>
<p><font color="red">实现：</font></p>
<p>依赖不变：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试类中移除 <code>@RunWith(SpringRunner.class) </code>注解，直接添加<code>@SpringBootTest</code>注解即可。</p>
<p>注意，在使用Test注解时，idea提示中选用第二个，第一个是JUnit4的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.heima;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@DisplayName(&quot;测试单元测试5的API&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJunit5Api</span> </span>&#123;</span><br><span class="line">    <span class="meta">@BeforeAll</span><span class="comment">//等价于@BeforeClass</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">beforeAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;beforeAll run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每个测试方法运行都执行一次，等价于<span class="doctag">@Before</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@BeforeEach</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeEach</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;beforeEach run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test1 run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test2 run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@AfterEach</span> <span class="comment">//等价于@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterEach</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after each run...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterAll</span> <span class="comment">//等价于@AfterClass</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">afterAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterAll run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行整个测试类测试：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">beforeAll</span> <span class="string">run....</span></span><br><span class="line"><span class="attr">beforeEach</span> <span class="string">run....</span></span><br><span class="line"><span class="attr">test1</span> <span class="string">run....</span></span><br><span class="line"><span class="attr">after</span> <span class="string">each run...</span></span><br><span class="line"><span class="attr">beforeEach</span> <span class="string">run....</span></span><br><span class="line"><span class="attr">test2</span> <span class="string">run....</span></span><br><span class="line"><span class="attr">after</span> <span class="string">each run...</span></span><br><span class="line"><span class="attr">afterAll</span> <span class="string">run....</span></span><br></pre></td></tr></table></figure>

<p><font color="red">小结：</font></p>
<ul>
<li> @BeforeAll和@AfterAll 只会运行一次</li>
<li> @BeforeEach和@AfterEach 每个测试类的测试方法都会运行</li>
</ul>
<h3 id="21-SpringBoot2核心技术-Junit5扩展（了解）"><a href="#21-SpringBoot2核心技术-Junit5扩展（了解）" class="headerlink" title="21-SpringBoot2核心技术-Junit5扩展（了解）"></a>21-SpringBoot2核心技术-Junit5扩展（了解）</h3><p>JUnit5的注解与JUnit4的注解有所变化</p>
<p>参考官网：<a target="_blank" rel="noopener" href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations">https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations</a></p>
<ul>
<li>**@Test :**表示方法是测试方法。但是与JUnit4的@Test不同，他的职责非常单一不能声明任何属性，拓展的测试将会由Jupiter提供额外测试</li>
<li>**@ParameterizedTest :**表示方法是参数化测试，下方会有详细介绍</li>
<li>**@RepeatedTest :**表示方法可重复执行，下方会有详细介绍</li>
<li>**@DisplayName :**为测试类或者测试方法设置展示名称</li>
<li>**@BeforeEach :**表示在每个单元测试之前执行</li>
<li>**@AfterEach :**表示在每个单元测试之后执行</li>
<li>**@BeforeAll :**表示在所有单元测试之前执行</li>
<li>**@AfterAll :**表示在所有单元测试之后执行</li>
<li>**@Tag :**表示单元测试类别，类似于JUnit4中的@Categories</li>
<li>**@Disabled :**表示测试类或测试方法不执行，类似于JUnit4中的@Ignore</li>
<li>**@Timeout :**表示测试方法运行如果超过了指定时间将会返回错误</li>
<li>**@ExtendWith :**为测试类或测试方法提供扩展类引用</li>
</ul>
<p>实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.heima;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.*; <span class="comment">//将所有的静态方法，变量都导进来</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assumptions.*;<span class="comment">//将所有的静态方法，变量都导进来</span></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.*;</span><br><span class="line"><span class="comment">//import org.omg.CORBA.PUBLIC_MEMBER;</span></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@SpringBootTest       //这里连这个注解都不用了。</span></span><br><span class="line"><span class="meta">@DisplayName(&quot;单元测试5核心测试API&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJunit5Demo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@DisplayName(&quot;前置测试&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeCondition</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> c=add(<span class="number">3</span>,<span class="number">2</span>);<span class="comment">//5</span></span><br><span class="line"><span class="comment">//        Assumptions.assumeTrue(c==5,&quot;测试值与期望值6不相同&quot;);</span></span><br><span class="line">        <span class="comment">//将所有的静态方法都导进来，直接用静态方法就好啦，哈哈；同下</span></span><br><span class="line">        assumeTrue(c==<span class="number">5</span>,<span class="string">&quot;测试值与期望值6不相同&quot;</span>);</span><br><span class="line">        <span class="comment">//断言类</span></span><br><span class="line"><span class="comment">//        Assertions.assertEquals(5,c,&quot;获取的值与真实值不符&quot;);</span></span><br><span class="line">        assertEquals(<span class="number">5</span>,c,<span class="string">&quot;获取的值与真实值不符&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a+b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@DisplayName(&quot;测试期望值&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">assertArray</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Object target = <span class="keyword">new</span> Object();</span><br><span class="line">        Object tagert2=target;</span><br><span class="line">        <span class="comment">// 如果不同时，打印&quot;两个对象不相同&quot;</span></span><br><span class="line">        assertEquals(target,tagert2,<span class="string">&quot;两个对象不相同&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@DisplayName(&quot;组合断言&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">all</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 所有断言全部需要成功</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        assertAll(<span class="string">&quot;test&quot;</span>,</span><br><span class="line">                  <span class="comment">//为true，或者相等就通过，不打印后面信息。</span></span><br><span class="line">                () -&gt; assertTrue(<span class="keyword">true</span> &amp;&amp; <span class="keyword">true</span>, <span class="string">&quot;结果不为true&quot;</span>),</span><br><span class="line">                () -&gt; assertEquals(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;结果不是1&quot;</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;=====&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DisplayName(&quot;异常断言&quot;)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String str=<span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//断定业务逻辑一定出现异常</span></span><br><span class="line">        assertThrows(ArithmeticException.class, () -&gt; &#123;</span><br><span class="line"><span class="comment">//            int i = 10 / 0;</span></span><br><span class="line">            str.equals(<span class="string">&quot;xx&quot;</span>);</span><br><span class="line">        &#125;, <span class="string">&quot;业务逻辑居然正常运行？&quot;</span>); <span class="comment">// 有异常就打印这里的信息。</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DisplayName(&quot;快速失败&quot;)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFail</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//xxxxx</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="number">1</span> == <span class="number">1</span>)&#123;</span><br><span class="line">            fail(<span class="string">&quot;测试失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Disabled</span>   <span class="comment">// 这个方法不让他测试。比如说运行整个class时，该方法不被执行。</span></span><br><span class="line">    		<span class="comment">//但是当你手动运行时，还是会运行的。</span></span><br><span class="line">    <span class="meta">@DisplayName(&quot;测试方法2&quot;)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 重复测试5次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RepeatedTest(5)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 规定方法超时时间。超出时间测试出异常</span></span><br><span class="line"><span class="comment">     *如下表示，方法执行超过500ms时，就会抛出异常。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Timeout(value = 500, unit = TimeUnit.MILLISECONDS)</span></span><br><span class="line">    <span class="meta">@Test</span><span class="comment">//jupiter对应的注解</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">testTimeout</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread.sleep(<span class="number">400</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>扩展学习：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/111706639">https://zhuanlan.zhihu.com/p/111706639</a></p>
</blockquote>
<h2 id="5-SpringBoot-数据访问集成"><a href="#5-SpringBoot-数据访问集成" class="headerlink" title="5 SpringBoot 数据访问集成"></a>5 SpringBoot 数据访问集成</h2><h3 id="22-SpringBoot2核心技术-数据源自动配置-HikariDataSource"><a href="#22-SpringBoot2核心技术-数据源自动配置-HikariDataSource" class="headerlink" title="22-SpringBoot2核心技术-数据源自动配置-HikariDataSource"></a>22-SpringBoot2核心技术-数据源自动配置-HikariDataSource</h3><p><font color="red">目的：</font>能够<strong>使用SpringBoot操作MySQL实现 CRUD 操作</strong></p>
<p><font color="red">步骤：</font></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">引入jdbc场景依赖;即导入jar：spring-boot-starter-data-jdbc</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">修改配置文件 application.yml   配置数据源环境</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">创建数据库表</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">创建对应的实体类</span></span><br><span class="line"><span class="meta">5.</span> <span class="string">单元测试</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><font color="red">实现：</font></p>
<p>1、新建工程，引入jdbc场景依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--springboot工程需要继承的父工程--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--web开发的起步依赖   场景启动器依赖--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--JDBC--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--mysql驱动--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、创建引导类和配置文件 application.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># datasource</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.253.129:3306/SpringBoot?characterEncoding=utf8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">zhangjie</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></table></figure>

<p>3、创建数据库表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> tb_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_user</span><br><span class="line">(</span><br><span class="line">    id       <span class="type">bigint</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    user_name     <span class="type">varchar</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    sex      tinyint,</span><br><span class="line">    birthday datetime,</span><br><span class="line">    created  datetime,</span><br><span class="line">    modified datetime</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_user</span><br><span class="line"><span class="keyword">values</span> (<span class="number">1</span>, <span class="string">&#x27;赵一伤&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;2000-1-1&#x27;</span>, now(), now()),</span><br><span class="line">       (<span class="number">2</span>, <span class="string">&#x27;钱二败&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;2000-1-1&#x27;</span>, now(), now()),</span><br><span class="line">       (<span class="number">3</span>, <span class="string">&#x27;孙三毁&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;2000-1-1&#x27;</span>, now(), now()),</span><br><span class="line">       (<span class="number">4</span>, <span class="string">&#x27;李四摧&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;2000-1-1&#x27;</span>, now(), now()),</span><br><span class="line">       (<span class="number">5</span>, <span class="string">&#x27;周五输&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;2000-1-1&#x27;</span>, now(), now()),</span><br><span class="line">       (<span class="number">6</span>, <span class="string">&#x27;吴六破&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;2000-1-1&#x27;</span>, now(), now()),</span><br><span class="line">       (<span class="number">7</span>, <span class="string">&#x27;郑七灭&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;2000-1-1&#x27;</span>, now(), now()),</span><br><span class="line">       (<span class="number">8</span>, <span class="string">&#x27;王八衰&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;2000-1-1&#x27;</span>, now(), now()),</span><br><span class="line">       (<span class="number">9</span>, <span class="string">&#x27;张无忌&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;2010-3-1&#x27;</span>, now(), now()),</span><br><span class="line">       (<span class="number">10</span>, <span class="string">&#x27;赵敏&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;2010-4-1&#x27;</span>, now(), now());</span><br></pre></td></tr></table></figure>

<p>4、创建对应的实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> Integer sex;</span><br><span class="line">    <span class="keyword">private</span> LocalDate birthday;</span><br><span class="line">    <span class="keyword">private</span> Date created;</span><br><span class="line">    <span class="keyword">private</span> Date modified;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5、单元测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh;</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line">    <span class="comment">// 配置文件配置了数据源，那么datasource就会交给IOC管理，JdbcTemplate也一样，因此这里可以直接依赖注入。</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// HikariDataSource (HikariPool-1)</span></span><br><span class="line">        System.out.println(dataSource);</span><br><span class="line"></span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; maps = jdbcTemplate.queryForList(<span class="string">&quot;select * from tb_user&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Map&lt;String, Object&gt; map : maps) &#123;</span><br><span class="line">            System.out.println(map);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="23-SpringBoot2核心技术-数据源切换为Druid"><a href="#23-SpringBoot2核心技术-数据源切换为Druid" class="headerlink" title="23-SpringBoot2核心技术-数据源切换为Druid"></a>23-SpringBoot2核心技术-数据源切换为Druid</h3><p><font color="red">目的：</font>能够切换数据库连接池为<a target="_blank" rel="noopener" href="https://github.com/alibaba/druid">Druid</a>，并完成相关高级配置</p>
<p><font color="red">步骤：</font></p>
<ol>
<li>依赖添加第三方Druid starter</li>
<li>修改配置文件 application.yml</li>
</ol>
<p><font color="red">实现：</font></p>
<p>1、依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、配置文件</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># datasource</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.200.150:3306/springboot?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">aop-patterns:</span> <span class="string">com.itheima.sh.*</span>  <span class="comment">#监控SpringBean</span></span><br><span class="line">      <span class="attr">filters:</span> <span class="string">stat,wall,slf4j</span>     <span class="comment"># 底层开启功能，stat（sql监控），wall（防火墙）</span></span><br><span class="line">      <span class="attr">stat-view-servlet:</span>   <span class="comment"># 配置监控页功能</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">login-username:</span> <span class="string">admin</span></span><br><span class="line">        <span class="attr">login-password:</span> <span class="string">admin</span></span><br><span class="line">        <span class="attr">resetEnable:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">web-stat-filter:</span>  <span class="comment"># 监控web</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">urlPattern:</span> <span class="string">/*</span></span><br><span class="line">        <span class="attr">exclusions:</span> <span class="string">&#x27;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&#x27;</span></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">stat:</span>    <span class="comment"># 对上面filters里面的stat的详细配置</span></span><br><span class="line">          <span class="attr">slow-sql-millis:</span> <span class="number">1000</span></span><br><span class="line">          <span class="attr">logSlowSql:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">wall:</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">config:</span></span><br><span class="line">            <span class="attr">drop-table-allow:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>参考<a target="_blank" rel="noopener" href="https://github.com/alibaba/druid/wiki/DruidDataSource%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E5%88%97%E8%A1%A8">官网</a></p>
<p>3、测试上面的测试类</p>
<p><font color="red">小结：</font></p>
<p>druid starter为什么需要添加依赖版本？</p>
<p>帮助我们做了哪些自动化配置功能？</p>
<ul>
<li><p>扩展配置项 <strong>spring.datasource.druid</strong></p>
</li>
<li><p>DruidSpringAopConfiguration.<strong>class</strong>,  监控SpringBean的；配置项：<strong>spring.datasource.druid.aop-patterns</strong></p>
</li>
<li><p>DruidStatViewServletConfiguration.<strong>class</strong>, 监控页的配置：<strong>spring.datasource.druid.stat-view-servlet；默认开启</strong></p>
</li>
<li><p>DruidWebStatFilterConfiguration.<strong>class</strong>, web监控配置；<strong>spring.datasource.druid.web-stat-filter；默认开启</strong></p>
</li>
<li><p>DruidFilterConfiguration.<strong>class</strong>}) 所有Druid自己filter的配置</p>
</li>
</ul>
<p><strong>其他配置：</strong></p>
<p>参考官网介绍：<a target="_blank" rel="noopener" href="https://github.com/alibaba/druid/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">https://github.com/alibaba/druid/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98</a></p>
<p>Druid starter介绍：<a target="_blank" rel="noopener" href="https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter">https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter</a></p>
<h3 id="24-SpringBoot2核心技术-整合MyBatis"><a href="#24-SpringBoot2核心技术-整合MyBatis" class="headerlink" title="24-SpringBoot2核心技术-整合MyBatis"></a>24-SpringBoot2核心技术-整合MyBatis</h3><p><font color="red">目的：能独立完成SpringBoot整合Mybatis【重要】</font></p>
<p><font color="red">步骤：</font></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">添加依赖</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">编写Mapper接口</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">在resources下创建 `com/itheima/sh/mapper` 文件夹</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">编写Controller测试/编写单元测试类</span></span><br></pre></td></tr></table></figure>

<p><font color="red">实现：</font></p>
<p>1、添加依赖，<a target="_blank" rel="noopener" href="https://github.com/mybatis/spring-boot-starter">官网参考</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、编写Mapper接口（**@Mapper注解**）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="meta">@Mapper</span>    <span class="comment">//这里要使用mapper注解哈。</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3、在resources下创建 <code>com/itheima/sh/mapper</code> 文件夹</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.sh.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.sh.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from tb_user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4、编写Controller测试/编写单元测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>浏览器测试：<a target="_blank" rel="noopener" href="http://localhost/user">http://localhost/user</a></p>
<p>我们发现 Mybatis的<strong>所有的配置是按照我们学习的默认规则，Mybatis starter 帮助我们做成了自动化配置</strong>，开发是不是越来越简单了。前面学习mybatis 框架 时需要mybatis单独的核心配置文件，或者spring IOC 整合mybatis 时也需要mybatis单独的核心配置文件，或者整合到Spring 的核心配置文件，繁琐，而<strong>使用Spring Boot时，只需要在application.yml 配置文件中添加数据源</strong>，多简单！</p>
<blockquote>
<ul>
<li><p>全局配置文件</p>
</li>
<li><p>SqlSessionFactory: 自动配置好了</p>
</li>
<li><p>SqlSession：自动配置了 <strong>SqlSessionTemplate 组合了SqlSession</strong></p>
</li>
<li><p>@Import(<strong>AutoConfiguredMapperScannerRegistrar</strong>.<strong>class</strong>）；</p>
</li>
<li><p>Mapper： 只要写的操作MyBatis的<strong>接口标准@Mapper 就会自动扫描进来</strong></p>
</li>
</ul>
</blockquote>
<p>完整截图：</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503133354025.png" alt="image-20210503133354025"></p>
<p>那么如果我改变了默认的配置会怎么样呢？</p>
<p><font color="blue">1、破坏Mapper配置文件存放的位置：</font> </p>
<p>在 <code>resources</code> 路径下创建 mapper 文件夹，并且将UserMapper.xml放在mapper文件夹下：</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503133539262.png" alt="image-20210503133539262"></p>
<p>运行测试 访问浏览器，发现会出异常：</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503133702931.png" alt="image-20210503133702931"></p>
<p>解决方案：在 application.yml 配置文件添加：指定映射文件位置呗。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/**Mapper.xml</span>  </span><br><span class="line">  <span class="comment"># mapper 映射文件位置</span></span><br></pre></td></tr></table></figure>



<p><font color="blue">2、驼峰命名规范：</font> </p>
<p>数据库表结构：</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503134155676.png" alt="image-20210503134155676"></p>
<p>实体类：    private String userName;</p>
<p>发现现象：</p>
<img src="/img/java/04阶段热门框架/day10-day11springboot+/image-20210503134307517.png" alt="image-20210503134307517" style="zoom:50%;" />

<p>解决方案：在 application.yml 配置文件添加：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>



<p><font color="blue">3、省略@Mapper注解：</font> (接口的代理类注入失败呗)</p>
<img src="/img/java/04阶段热门框架/day10-day11springboot+/image-20210503134449972.png" alt="image-20210503134449972" style="zoom:50%;" />

<p>启动项目，出现异常：</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503134549596.png" alt="image-20210503134549596"></p>
<p>解决方案：<strong>在引导类上添加 <code>@MapperScan</code> 注解</strong>：</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/image-20210503134710486.png" alt="image-20210503134710486"></p>
<p><font color="red">小结：</font></p>
<ul>
<li>以上是项目中常用的内容，其他配置可以参考官网查看</li>
</ul>
<h3 id="25-SpringBoot2核心技术-整合Mybatis实现分页"><a href="#25-SpringBoot2核心技术-整合Mybatis实现分页" class="headerlink" title="25-SpringBoot2核心技术-整合Mybatis实现分页"></a>25-SpringBoot2核心技术-整合Mybatis实现分页</h3><p><font color="red">目的：能够实现SpringBoot整合Mybatis完成分页功能</font></p>
<p><font color="red">步骤：</font></p>
<p>1、依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、配置</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pagehelper:</span></span><br><span class="line">  <span class="attr">helperDialect:</span> <span class="string">mysql</span></span><br><span class="line">  <span class="attr">reasonable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">supportMethodsArguments:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">params:</span> <span class="string">count=countSql</span></span><br></pre></td></tr></table></figure>

<p><font color="red">实现：。。。</font></p>
<h3 id="26-SpringBoot2核心技术-整合Redis"><a href="#26-SpringBoot2核心技术-整合Redis" class="headerlink" title="26-SpringBoot2核心技术-整合Redis"></a>26-SpringBoot2核心技术-整合Redis</h3><p><font color="red">目的：</font>能够独立使用SpringBoot整合Redis</p>
<p><font color="red">步骤：</font></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.</span> <span class="string">场景（redis）依赖</span></span><br><span class="line"><span class="meta">2.</span> <span class="string">配置文件</span></span><br><span class="line"><span class="meta">3.</span> <span class="string">配置类实现key和value序列化和反序列化，同时注入 RedisTemplate 这个bean 用来操作 redis。</span></span><br><span class="line"><span class="meta">4.</span> <span class="string">准备Redis（redis，启动后就可以使用  RedisTemplate 这个bean 用来操作 redis）</span></span><br><span class="line"><span class="meta">5.</span> <span class="string">编写测试类</span></span><br></pre></td></tr></table></figure>

<p><font color="red">实现：</font></p>
<p>1、依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、配置文件</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">  	<span class="attr">host:</span> <span class="number">192.168</span><span class="number">.200</span><span class="number">.150</span>  <span class="comment"># 默认localhost</span></span><br><span class="line">  	<span class="attr">port:</span> <span class="number">6379</span>   <span class="comment"># 默认6379</span></span><br><span class="line">  	<span class="attr">database:</span> <span class="number">1</span> <span class="comment"># 默认0</span></span><br></pre></td></tr></table></figure>

<p>3、配置类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.config;</span><br><span class="line"></span><br><span class="line">略</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: V1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisSerializer&lt;Object&gt; <span class="title">redisKeySerializer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Jackson2JsonRedisSerializer&lt;Object&gt;(Object.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisSerializer&lt;Object&gt; <span class="title">redisValueSerializer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Jackson2JsonRedisSerializer&lt;Object&gt;(Object.class);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * RedisTemplate配置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> factory</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title">redisTemplate</span><span class="params">(RedisConnectionFactory factory</span></span></span><br><span class="line"><span class="params"><span class="function">            , RedisSerializer&lt;Object&gt; redisKeySerializer, RedisSerializer&lt;Object&gt; redisValueSerializer)</span> </span>&#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; redisTemplate = <span class="keyword">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line">        redisTemplate.setConnectionFactory(factory);</span><br><span class="line">        redisTemplate.setDefaultSerializer(redisValueSerializer);</span><br><span class="line">        redisTemplate.setKeySerializer(redisKeySerializer);</span><br><span class="line">        redisTemplate.setHashKeySerializer(redisKeySerializer);</span><br><span class="line">        redisTemplate.afterPropertiesSet();</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4、启动Redis服务 </p>
<p>5、编写测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.controller;</span><br><span class="line"></span><br><span class="line">略</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: V1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;findAll&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// String</span></span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Hash  Map</span></span><br><span class="line">        redisTemplate.opsForHash().put(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;k1&quot;</span>, <span class="string">&quot;v1&quot;</span>);</span><br><span class="line">        redisTemplate.opsForHash().put(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;k2&quot;</span>, <span class="string">&quot;v2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// set  无序不重复</span></span><br><span class="line">        redisTemplate.opsForSet().add(<span class="string">&quot;setkey&quot;</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// list 有序可重复</span></span><br><span class="line">        redisTemplate.opsForList().leftPush(<span class="string">&quot;lkey&quot;</span>, <span class="number">1</span>);</span><br><span class="line">        redisTemplate.opsForList().leftPush(<span class="string">&quot;lkey&quot;</span>, <span class="number">1</span>);</span><br><span class="line">        redisTemplate.opsForList().leftPush(<span class="string">&quot;lkey&quot;</span>, <span class="number">2</span>);</span><br><span class="line">        redisTemplate.opsForList().leftPush(<span class="string">&quot;lkey&quot;</span>, <span class="number">3</span>);</span><br><span class="line">        redisTemplate.opsForList().leftPush(<span class="string">&quot;lkey&quot;</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 取值</span></span><br><span class="line">        Object value = redisTemplate.opsForValue().get(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(value);</span><br><span class="line"></span><br><span class="line">        Object k1 = redisTemplate.opsForHash().get(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;k1&quot;</span>);</span><br><span class="line">        System.out.println(k1);</span><br><span class="line"></span><br><span class="line">        Set setkey = redisTemplate.opsForSet().members(<span class="string">&quot;setkey&quot;</span>);</span><br><span class="line">        System.out.println(setkey);</span><br><span class="line"></span><br><span class="line">        List lkey = redisTemplate.opsForList().range(<span class="string">&quot;lkey&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">        System.out.println(lkey);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; userList = userMapper.findAll();</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">高明辉</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/04/27/springBoot%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/">http://example.com/2022/04/27/springBoot%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Jason</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/springBoot/">springBoot</a><a class="post-meta__tags" href="/tags/springBoot%E6%95%B4%E5%90%88Mybatis%E4%BB%A5%E5%8F%8Aredis/">springBoot整合Mybatis以及redis</a></div><div class="post_share"><div class="social-share" data-image="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/%E5%B0%81%E9%9D%A2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="添加微信"/></a><div class="post-qr-code-desc">添加微信</div></li><li class="reward-item"><a href="/img/pay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/pay.jpg" alt="付款码"/></a><div class="post-qr-code-desc">付款码</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/04/27/springBoot%E9%AB%98%E7%BA%A7%E5%8E%9F%E7%90%86/"><img class="prev-cover" src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/%E5%B0%81%E9%9D%A2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">springBoot高级原理</div></div></a></div><div class="next-post pull-right"><a href="/2022/04/26/%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8AOP%E5%AE%9E%E7%8E%B0%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95/"><img class="next-cover" src="/img/%E4%B8%BB%E9%A1%B5%E9%9D%A2%E5%9B%BE%E7%89%87.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">日志技术以及使用AOP实现日志记录</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/04/27/springBoot%E5%81%A5%E5%BA%B7%E6%A3%80%E6%B5%8B/" title="springBoot健康检测"><img class="cover" src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/%E5%B0%81%E9%9D%A2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-27</div><div class="title">springBoot健康检测</div></div></a></div><div><a href="/2022/04/28/springBoot%E6%94%B9%E9%80%A0ssm%E6%97%85%E6%B8%B8%E5%B1%95%E7%A4%BA%E9%A1%B9%E7%9B%AE-%E6%95%B4%E5%90%88Mybatis-Plus-%E6%95%B4%E5%90%88redis%E7%BC%93%E5%AD%98/" title="springBoot改造ssm旅游展示项目+整合Mybatis-Plus+整合redis缓存"><img class="cover" src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/%E5%B0%81%E9%9D%A2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-28</div><div class="title">springBoot改造ssm旅游展示项目+整合Mybatis-Plus+整合redis缓存</div></div></a></div><div><a href="/2022/04/27/springBoot%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" title="springBoot项目部署"><img class="cover" src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/%E5%B0%81%E9%9D%A2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-27</div><div class="title">springBoot项目部署</div></div></a></div><div><a href="/2022/04/27/springBoot%E9%AB%98%E7%BA%A7%E5%8E%9F%E7%90%86/" title="springBoot高级原理"><img class="cover" src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day10-day11springboot+/%E5%B0%81%E9%9D%A2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-27</div><div class="title">springBoot高级原理</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot-%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF"><span class="toc-number">1.</span> <span class="toc-text">SpringBoot 核心技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-SpringBoot-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">2.</span> <span class="toc-text">1 SpringBoot 快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#01-SpringBoot%E6%A6%82%E8%BF%B0"><span class="toc-number">2.1.</span> <span class="toc-text">01-SpringBoot概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#02-SpringBoot%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">2.2.</span> <span class="toc-text">02-SpringBoot快速入门</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#03-SpringBoot%E4%BE%9D%E8%B5%96%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%E5%8F%8A%E4%BC%98%E5%8A%BF"><span class="toc-number">2.3.</span> <span class="toc-text">03-SpringBoot依赖原理分析及优势</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81SpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84pom%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB"><span class="toc-number">2.3.1.</span> <span class="toc-text">1、SpringBoot项目的pom依赖关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%85%B3%E4%BA%8Estater%E4%BD%9C%E7%94%A8"><span class="toc-number">2.3.2.</span> <span class="toc-text">2、关于stater作用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-SpringBoot-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">2 SpringBoot 配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#04-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%88%86%E7%B1%BB"><span class="toc-number">3.1.</span> <span class="toc-text">04-SpringBoot2核心技术-配置文件分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#06-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-YAML%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.2.</span> <span class="toc-text">06-SpringBoot2核心技术-YAML介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#07-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-YAML%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">3.3.</span> <span class="toc-text">07-SpringBoot2核心技术-YAML基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#08-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-YAML%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE"><span class="toc-number">3.4.</span> <span class="toc-text">08-SpringBoot2核心技术-YAML高级配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#09-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%AE%9E%E7%8E%B0%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%87%AA%E5%8A%A8%E6%8F%90%E7%A4%BA"><span class="toc-number">3.5.</span> <span class="toc-text">09-SpringBoot2核心技术-实现配置文件自动提示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%88%87%E6%8D%A2"><span class="toc-number">3.6.</span> <span class="toc-text">10-SpringBoot2核心技术-多环境切换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E9%A1%B9%E7%9B%AE%E5%86%85%E9%83%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-number">3.7.</span> <span class="toc-text">11-SpringBoot2核心技术-项目内部配置文件加载顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E9%A1%B9%E7%9B%AE%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-number">3.8.</span> <span class="toc-text">12-SpringBoot2核心技术-项目外部配置文件加载顺序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-SpringBoot-Web-MVC%E5%BC%80%E5%8F%91"><span class="toc-number">4.</span> <span class="toc-text">3 SpringBoot Web MVC开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-SpringMVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">4.1.</span> <span class="toc-text">14-SpringBoot2核心技术-SpringMVC自动配置概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%94%AF%E6%8C%81"><span class="toc-number">4.2.</span> <span class="toc-text">15-SpringBoot2核心技术-静态资源支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%8B%A6%E6%88%AA%E5%99%A8%E6%94%AF%E6%8C%81"><span class="toc-number">4.3.</span> <span class="toc-text">16-SpringBoot2核心技术-拦截器支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-Servlet%E3%80%81Filter%E3%80%81Listener%E6%94%AF%E6%8C%81"><span class="toc-number">4.4.</span> <span class="toc-text">17-SpringBoot2核心技术-Servlet、Filter、Listener支持</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-SpringBoot-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E9%9B%86%E6%88%90"><span class="toc-number">5.</span> <span class="toc-text">4 SpringBoot 单元测试集成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B4%E5%90%88Junit4"><span class="toc-number">5.1.</span> <span class="toc-text">19-SpringBoot2核心技术-整合Junit4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B4%E5%90%88Junit5"><span class="toc-number">5.2.</span> <span class="toc-text">20-SpringBoot2核心技术-整合Junit5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-Junit5%E6%89%A9%E5%B1%95%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">5.3.</span> <span class="toc-text">21-SpringBoot2核心技术-Junit5扩展（了解）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-SpringBoot-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E9%9B%86%E6%88%90"><span class="toc-number">6.</span> <span class="toc-text">5 SpringBoot 数据访问集成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#22-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E6%BA%90%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE-HikariDataSource"><span class="toc-number">6.1.</span> <span class="toc-text">22-SpringBoot2核心技术-数据源自动配置-HikariDataSource</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E6%BA%90%E5%88%87%E6%8D%A2%E4%B8%BADruid"><span class="toc-number">6.2.</span> <span class="toc-text">23-SpringBoot2核心技术-数据源切换为Druid</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B4%E5%90%88MyBatis"><span class="toc-number">6.3.</span> <span class="toc-text">24-SpringBoot2核心技术-整合MyBatis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B4%E5%90%88Mybatis%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5"><span class="toc-number">6.4.</span> <span class="toc-text">25-SpringBoot2核心技术-整合Mybatis实现分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-SpringBoot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B4%E5%90%88Redis"><span class="toc-number">6.5.</span> <span class="toc-text">26-SpringBoot2核心技术-整合Redis</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 高明辉</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'Aaee0Vekhg5KbLhMOJQrEU6A-gzGzoHsz',
      appKey: 'mmLHPEEtqvOSJhsqWra8Sq6K',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script type="text/javascript" src="/js/fairyDustCursor.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>