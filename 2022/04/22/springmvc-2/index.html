<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>springmvc-2 | Jason</title><meta name="keywords" content="springmvc"><meta name="author" content="高明辉"><meta name="copyright" content="高明辉"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一、响应和封装返回值SpringMVC返回值的方式可以分为两大类:  ​     1.同步请求的响应: ​            请求转发 或 重定向 ​     2.异步请求的响应（平时开发的大部分响应方式） ​            前端发起ajax请求的方式，后端直接返回字符串作为响应 1.0 SpringMVC中响应的多种方式* SpringMVC的响应: *      1 同步响应: *">
<meta property="og:type" content="article">
<meta property="og:title" content="springmvc-2">
<meta property="og:url" content="http://example.com/2022/04/22/springmvc-2/index.html">
<meta property="og:site_name" content="Jason">
<meta property="og:description" content="一、响应和封装返回值SpringMVC返回值的方式可以分为两大类:  ​     1.同步请求的响应: ​            请求转发 或 重定向 ​     2.异步请求的响应（平时开发的大部分响应方式） ​            前端发起ajax请求的方式，后端直接返回字符串作为响应 1.0 SpringMVC中响应的多种方式* SpringMVC的响应: *      1 同步响应: *">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day05-springmvc-2/%E5%B0%81%E9%9D%A2.png">
<meta property="article:published_time" content="2022-04-22T09:20:00.000Z">
<meta property="article:modified_time" content="2024-01-15T08:12:04.560Z">
<meta property="article:author" content="高明辉">
<meta property="article:tag" content="springmvc">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day05-springmvc-2/%E5%B0%81%E9%9D%A2.png"><link rel="shortcut icon" href="/img/%E7%BD%91%E7%AB%99%E5%9B%BE%E6%A0%87.png"><link rel="canonical" href="http://example.com/2022/04/22/springmvc-2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'springmvc-2',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-15 16:12:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Jason" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/%E5%A4%B4%E5%83%8F.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">185</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">206</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">35</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E5%85%B3%E4%BA%8E"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/butterfly%E4%B8%BB%E9%A2%98"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day05-springmvc-2/%E5%B0%81%E9%9D%A2.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jason</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E5%85%B3%E4%BA%8E"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/butterfly%E4%B8%BB%E9%A2%98"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">springmvc-2</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-22T09:20:00.000Z" title="发表于 2022-04-22 17:20:00">2022-04-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-15T08:12:04.560Z" title="更新于 2024-01-15 16:12:04">2024-01-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/spring/">spring</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="springmvc-2"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一、响应和封装返回值"><a href="#一、响应和封装返回值" class="headerlink" title="一、响应和封装返回值"></a>一、响应和封装返回值</h1><p>SpringMVC<strong>返回值的方式可以分为两大类</strong>: </p>
<p>​     <strong>1.同步请求的响应:</strong></p>
<p>​            请求<strong>转发 或 重定向</strong></p>
<p>​     <strong>2.异步请求的响应</strong>（平时开发的大部分响应方式）</p>
<p>​            前端发起ajax请求的方式，后端直接返回字符串作为响应</p>
<h2 id="1-0-SpringMVC中响应的多种方式"><a href="#1-0-SpringMVC中响应的多种方式" class="headerlink" title="1.0 SpringMVC中响应的多种方式"></a>1.0 SpringMVC中响应的多种方式</h2><pre><code>* SpringMVC的响应:
*      1 同步响应:
*          (1)请求转发: 一次请求的延续,浏览器地址栏地址不会发生改变
*              原生API: HttpServletRequest
*              forward:物理视图路径
*              逻辑视图 + 视图解析器
*          (2)重定向:
 *              原生API: HttpServletResponse
 *              redirect:重定向的物理逻辑
 *
 *      2 以流的形式写回给浏览器
 
 * 请求转发与重定向的区别:
 *      请求转发是一次请求的延续
 *      请求转发可以共享Request对象
 *      请求转发是服务器内部行为,只能转发到服务器内部的资源上
 *      请求转发时地址栏地址不变
 *      请求转发是Request的行为
 *
 *      重定向,改变方向发送多次请求
 *      重定向不可以共享Request对象
 *      重定向可以跳转到任何路径上
 *      重定向时浏览器地址栏显示最后一次请求的路径
 *      重定向是Response对象的行为
</code></pre>
<h4 id="【1】原生API和SpringMVC实现转发"><a href="#【1】原生API和SpringMVC实现转发" class="headerlink" title="【1】原生API和SpringMVC实现转发"></a>【1】原生API和SpringMVC实现转发</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForwardController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求转发与重定向区别？</span></span><br><span class="line"><span class="comment">     *   请求转发：</span></span><br><span class="line"><span class="comment">     *      1.请求转发是一次请求的延续，浏览器地址栏只显示第一次访问到url</span></span><br><span class="line"><span class="comment">     *      2.请求转发是服务器内部的请求行为；</span></span><br><span class="line"><span class="comment">     *      3.请求转发是request对象的行为；</span></span><br><span class="line"><span class="comment">     *      4.请求转发可以共享request域下的数据；</span></span><br><span class="line"><span class="comment">     *   重定向：</span></span><br><span class="line"><span class="comment">     *      1.重定向是多次请求，浏览器地址栏显示最后一次请求的url；</span></span><br><span class="line"><span class="comment">     *      2.重定向可以跨服务器请求；</span></span><br><span class="line"><span class="comment">     *      3.请求转发是response对象的行为；</span></span><br><span class="line"><span class="comment">     *      4.重定向不可以共享request域下的数据；</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 测试原生API实现转发</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nativeForward</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">           HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;nativeForward run....&quot;</span>);</span><br><span class="line">        <span class="comment">//请求转发的地址可以是jsp资源的物理路径，也可以是springmvc提供的handler地址</span></span><br><span class="line">       <span class="comment">// request.getRequestDispatcher(</span></span><br><span class="line">        <span class="comment">// &quot;/WEB-INF/pages/success.jsp&quot;).forward(request,response);</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/test2&quot;</span>).forward(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">success</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a=<span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;success run.....&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用forward请求转发的关键字实现请求转发</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test3&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">springForward</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;springForward run....&quot;</span>);</span><br><span class="line"><span class="comment">//        return &quot;forward:/WEB-INF/pages/success.jsp&quot;;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/test2&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="【2】原生API和SpringMVC实现重定向"><a href="#【2】原生API和SpringMVC实现重定向" class="headerlink" title="【2】原生API和SpringMVC实现重定向"></a>【2】原生API和SpringMVC实现重定向</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试重定向</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedirectController</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用原生API实现请求的重定向</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test4&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nativeRedirect</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;nativeRedirect run....&quot;</span>);</span><br><span class="line">        <span class="comment">//1 </span></span><br><span class="line">        <span class="comment">//http:localhost:8080/WEB-INF/pages/success.jsp </span></span><br><span class="line">        <span class="comment">//response.sendRedirect(&quot;/WEB-INF/pages/success.jsp&quot;);[不能够访问]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//2 </span></span><br><span class="line">        <span class="comment">//response.sendRedirect(&quot;index.jsp&quot;); //webapp目录下存放index.jsp,可以重定向</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//3 </span></span><br><span class="line">        <span class="comment">//重定向到本处理器的 success 处理器（如下seccess方法）</span></span><br><span class="line">        <span class="comment">//http:localhost:8080/success</span></span><br><span class="line">        <span class="comment">//response.sendRedirect(&quot;/success&quot;); </span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//4 </span></span><br><span class="line">        <span class="comment">//跨服务器重定向</span></span><br><span class="line">        response.sendRedirect(<span class="string">&quot;https://www.baidu.com/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/success&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">success</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用redirect重定向关键字实现请求的重定向操作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test5&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">springmvcRedirect</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;springmvcRedirect run....&quot;</span>);</span><br><span class="line">        <span class="comment">//1 </span></span><br><span class="line">        <span class="comment">//等价于 response.sendRedirect(&quot;/success&quot;);</span></span><br><span class="line">        <span class="comment">//return &quot;redirect:/success&quot;;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//2 </span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:https://www.baidu.com/&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="【3】原生API和SpringMVC以流的形式写回字符串"><a href="#【3】原生API和SpringMVC以流的形式写回字符串" class="headerlink" title="【3】原生API和SpringMVC以流的形式写回字符串"></a><strong>【3】原生API和SpringMVC以流的形式写回字符串</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 响应前端ajax异步请求</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringResponseController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用原生API响应字符串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test6&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nativeResponse</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1.设置响应给浏览器的内容格式</span></span><br><span class="line">        <span class="comment">//response.setContentType(&quot;text/plain;charset=utf-8&quot;);</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;&lt;h1&gt;native test !!&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用springmvc响应字符串</span></span><br><span class="line"><span class="comment">     * produces = &quot;text/plain;charset=utf-8&quot;</span></span><br><span class="line"><span class="comment">     * 等价于response.setContentType(&quot;text/plain;charset=utf-8&quot;);</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test7&quot;,produces = &quot;text/html;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span><span class="comment">//等价于使用response对象将方法返回的字符串响应给浏览器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">springmvcResponse</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&lt;h1&gt;native test !!&lt;/h1&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * springmvc响应vo类型，底层会将vo转化成json格式的字符串</span></span><br><span class="line"><span class="comment">     * 前提：</span></span><br><span class="line"><span class="comment">     *  1.导入jackson相关的依赖</span></span><br><span class="line"><span class="comment">     *  2.开启springmvc注解驱动支持</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test8&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">responseVo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setId(<span class="number">1</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="comment">//json==&gt;&#123;name:zhangsan,id:1&#125;</span></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>了解几个常用的数据类型：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">常用的Content-Type类型：</span></span><br><span class="line"><span class="meta">1【text/html</span>  <span class="string">：HTML格式】 ***</span></span><br><span class="line"><span class="meta">2【text/plain</span> <span class="string">：纯文本格式】 ***</span></span><br><span class="line"><span class="attr">3</span> <span class="string">text/xml   ：XML格式</span></span><br><span class="line"></span><br><span class="line"><span class="attr">4</span> <span class="string">image/gif  ：gif图片格式    </span></span><br><span class="line"><span class="attr">5</span> <span class="string">image/jpeg ：jpg图片格式 </span></span><br><span class="line"><span class="attr">6</span> <span class="string">image/png  ：png图片格式</span></span><br><span class="line"></span><br><span class="line"><span class="attr">7</span> <span class="string">application/xml     ： XML数据格式 ***</span></span><br><span class="line"><span class="attr">8</span> <span class="string">【application/json    ： JSON数据格式】 ***</span></span><br><span class="line"><span class="attr">9</span> <span class="string">application/pdf     ： pdf格式  </span></span><br><span class="line"><span class="attr">10</span> <span class="string">application/msword  ： Word文档格式</span></span><br><span class="line"><span class="attr">11</span> <span class="string">application/octet-stream ： 二进制流数据（如文件下载）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">12</span> <span class="string">【application/x-www-form-urlencoded ： </span></span><br><span class="line">    <span class="meta">&lt;form</span> <span class="string">encType=&quot;&quot;&gt;中默认的encType，</span></span><br><span class="line">    <span class="attr">form表单数据被编码为key/value格式发送到服务器（表单默认的提交数据的格式）】</span></span><br><span class="line"></span><br><span class="line"><span class="attr">13</span> <span class="string">【multipart/form-data ： 表单上传文件】 ***</span></span><br></pre></td></tr></table></figure>

<p>小结：</p>
<p>SpringMVC返回值，如果方法返回值为String（public String hello…)默认会被解析成视图名称，即<strong>默认返回值是转发</strong>，如果要返回其他的类型（重定向，字符串，图片，二进制流等）<strong>需要指定返回类型</strong>，特别是返回一个普通字符串，要指定返回的内容类型，而不是只在方法定义的时候返回String类型（默认是返回试图名称）。可以通过如下两种方式指定返回值类型：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1</span> <span class="string">可以通过 @RequestMapping注解的prodeces属性指定，比如:</span></span><br><span class="line"><span class="meta">@RequestMapping(value</span> = <span class="string">&quot;/test7&quot;,produces = &quot;text/html;charset=utf-8&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2</span> <span class="string">也可以通过原生HttpServletResponse对象指定，比如:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">如果返回类型为json类型（和普通字符串），还可以通过@ResponseBody注解标识：</span></span><br><span class="line">    <span class="attr">@RequestMapping(&quot;/test8&quot;)</span></span><br><span class="line">    <span class="attr">@ResponseBody</span></span><br><span class="line">    <span class="attr">public</span> <span class="string">User responseVo()&#123;...&#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="1-1-响应时数据共享问题"><a href="#1-1-响应时数据共享问题" class="headerlink" title="1.1 响应时数据共享问题"></a>1.1 响应时数据共享问题</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请求转发: 数据都会存放到Request域中</span><br><span class="line">重定向: 将共享的数据拼接在请求路径的后面</span><br></pre></td></tr></table></figure>

<h5 id="【1】转发响应时共享数据"><a href="#【1】转发响应时共享数据" class="headerlink" title="【1】转发响应时共享数据"></a>【1】转发响应时共享数据</h5><p>通过<strong>Request域，Model或者ModelAndView</strong>都可实现；</p>
<h3 id="1-1-1-使用request域对象封装响应结果"><a href="#1-1-1-使用request域对象封装响应结果" class="headerlink" title="1.1.1 使用request域对象封装响应结果"></a>1.1.1 使用request域对象封装响应结果</h3><p>从http请求到服务器处理结束的整个过程中，多次请求转发过程中request域下的变量共享；</p>
<p>**使用这种方式需要导入servlet的包 **</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo1</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    request.setAttribute(<span class="string">&quot;user&quot;</span>,<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-1-2-使用Model封装结果"><a href="#1-1-2-使用Model封装结果" class="headerlink" title="1.1.2 使用Model封装结果"></a>1.1.2 使用Model封装结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo2</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;user&quot;</span>,<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-1-3-使用ModelAndView封装结果"><a href="#1-1-3-使用ModelAndView封装结果" class="headerlink" title="1.1.3 使用ModelAndView封装结果"></a>1.1.3 使用ModelAndView封装结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">demo3</span><span class="params">(ModelAndView modelAndView)</span></span>&#123;</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;user&quot;</span>,<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>补充点:<strong>ModelAndView和Model是框架给我们准备好的</strong>,我们直接拿过来使用的即可,我们称这些对象为<strong>隐式对象</strong>。 </p>
<h5 id="【2】重定向时共享数据"><a href="#【2】重定向时共享数据" class="headerlink" title="【2】重定向时共享数据"></a>【2】重定向时共享数据</h5><p>数据存放到session域下，会占用服务器内存空间；【不可取】</p>
<p>重定向时，request域下的数据不能共享，但是<strong>使用Model或者ModelAndView</strong>可以自动<strong>将数据以参数的方式拼接到请求路径中</strong>；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//url:http://localhost:8080/test12?name=xxx&amp;age=xx</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/test12&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">show</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">       String name = request.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">       String age = request.getParameter(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">       System.out.println(<span class="string">&quot;name:&quot;</span>+name+<span class="string">&quot;,age:&quot;</span>+age);</span><br><span class="line">       request.setAttribute(<span class="string">&quot;msg&quot;</span>,name+<span class="string">&quot;:&quot;</span>+age);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;show&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   从test12到show是请求转发哈</span><br><span class="line">   下面演示访问test13以及访问test14，他们都重定向到test12中，</span><br><span class="line">   通过model或者modelandview设置参数，然后自动拼接到转发的url中！</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 使用model在重定向时实现数据共享</span></span><br><span class="line"><span class="comment">    * url:http://localhost:8080/test13?name=zhangsan&amp;age=18</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/test13&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">modelRedirect</span><span class="params">(String name,Integer age,Model model)</span></span>&#123;</span><br><span class="line">       model.addAttribute(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">       model.addAttribute(<span class="string">&quot;age&quot;</span>,age);</span><br><span class="line">	<span class="comment">//model对象在请求重定向时，会自动将model中的数据拼接到重定向的url地址下</span></span><br><span class="line">       <span class="comment">//相当于：http://localhost:8080/test12?name=zhangsan&amp;age=18</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/test12&quot;</span>; </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 使用modelAndView 在重定向时实现数据共享</span></span><br><span class="line"><span class="comment">    * http://localhost:8080/test14?name=zhangsan&amp;age=18</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> age</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/test14&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">modelRedirect2</span><span class="params">(String name, Integer age)</span></span>&#123;</span><br><span class="line">       ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">       mv.addObject(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">       mv.addObject(<span class="string">&quot;age&quot;</span>,age);</span><br><span class="line">       <span class="comment">//model对象在请求重定向时，会自动将model中的数据拼接到重定向的url地址下</span></span><br><span class="line">       <span class="comment">//相当于：http://localhost:8080/test12?name=zhangsan&amp;age=18</span></span><br><span class="line">       mv.setViewName(<span class="string">&quot;redirect:/test12&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> mv;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h2 id="1-2-异步请求的响应"><a href="#1-2-异步请求的响应" class="headerlink" title="1.2 异步请求的响应"></a>1.2 异步请求的响应</h2><h3 id="1-2-1-使用Response-原生API响应结果"><a href="#1-2-1-使用Response-原生API响应结果" class="headerlink" title="1.2.1 使用Response 原生API响应结果"></a>1.2.1 使用Response 原生API响应结果</h3><p><strong>1 返回普通字符串</strong></p>
<div style='background-color:orange;'>示例1:</div>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test15&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test15</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    response.setContentType(<span class="string">&quot;text/plain;charset=utf-8&quot;</span>);<span class="comment">// 1 普通字符串</span></span><br><span class="line">    response.getWriter().write(<span class="string">&quot;juest test!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test16&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test16</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">&quot;gaominghui&quot;</span>);</span><br><span class="line">    response.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);<span class="comment">//2 json格式字符串</span></span><br><span class="line">    response.getWriter().write(JSON.toJSONString(user);<span class="comment">// 注意要手动序列化后再传值哦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2 返回JSON字符串</strong></p>
<div style='background-color:orange;'>示例2:</div>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test16&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test16</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">       User user = <span class="keyword">new</span> User();</span><br><span class="line">       user.setName(<span class="string">&quot;gaominghui&quot;</span>);</span><br><span class="line">       response.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);<span class="comment">//2 json格式字符串</span></span><br><span class="line">       response.getWriter().write(JSON.toJSONString(user);<span class="comment">// 注意要手动序列化后再传值哦</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h3 id="1-2-2-使用-ResponseBody注解"><a href="#1-2-2-使用-ResponseBody注解" class="headerlink" title="1.2.2 使用@ResponseBody注解"></a>1.2.2 使用@ResponseBody注解</h3><h4 id="1-返回普通字符串"><a href="#1-返回普通字符串" class="headerlink" title="1 返回普通字符串"></a>1 返回普通字符串</h4><div style='background-color:orange;'>示例2:</div>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test16&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test16</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;test16&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-返回json字符串"><a href="#2-返回json字符串" class="headerlink" title="2 返回json字符串"></a>2 返回json字符串</h4><div style='background-color:orange;'>示例3:</div>

<p>先要导入JSON转换需要的包 </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">将返回结果转成json字符串返回给浏览器</span><br><span class="line">--------------------------------------</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test05&quot;,produces = &quot;application/json;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="comment">//虽然浏览器携带的数据为json格式，但是由于注解RequestBody，因此json转为了vo对象。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserVo <span class="title">test05</span><span class="params">(<span class="meta">@RequestBody</span> UserVo userVo)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test05方法执行了&quot;</span>);</span><br><span class="line">        System.out.println(userVo);</span><br><span class="line">        userVo.setAge(<span class="number">21</span>);</span><br><span class="line">        userVo.setUsername(<span class="string">&quot;笑雯&quot;</span>);</span><br><span class="line">    <span class="comment">//虽然返回的是一个对象，但是由于注解ResponseBody，这里会先转为json字符串，再写回给浏览器</span></span><br><span class="line">        <span class="keyword">return</span> userVo; </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-4-RequestBody和-ResponseBody的区别"><a href="#1-2-4-RequestBody和-ResponseBody的区别" class="headerlink" title="1.2.4 @RequestBody和@ResponseBody的区别"></a>1.2.4 @RequestBody和@ResponseBody的区别</h3><p>@RequestBody</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.@RequestBody核心作用是接收客户端发送的json格式字符串，并封装到某个vo下(反序列化过程)；</span></span><br><span class="line"><span class="attr">2.get请求是没有请求体,而请求携带的json格式数据必须存放在请求体中携带给服务器</span></span><br><span class="line"><span class="meta">3.编写位置</span>: <span class="string">参数列表中参数的前面</span></span><br></pre></td></tr></table></figure>

<p>@ResponseBody</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">@ResponseBody使用在方法上或方法的返回值前面</span></span><br><span class="line"><span class="attr">表示以流的形式写回字符串给浏览器</span></span><br><span class="line"><span class="attr">如果返回的是对象，先将对象转成json字符串,将转完后的字符串以流的形式写回给浏览器</span></span><br><span class="line"><span class="meta">需要设置返回数据的mime类型</span>: <span class="string">produces = &quot;application/json;charset=utf-8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">如果类的返回值全部都为字符串（普通字符串或者JSON字符串&lt;对象序列化后字符串&gt;)</span></span><br><span class="line"><span class="attr">那么ResponseBody可以放在类前面，与Controller合并为@RestController注解！</span></span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">注意事项：</span></span><br><span class="line"><span class="meta">在SpringMvc配置文件中添加&lt;mvn</span>:<span class="string">default-servlet-handler/&gt;防止访问静态资源时被核心控制器拦截；</span></span><br></pre></td></tr></table></figure>

<h5 id="后台代码"><a href="#后台代码" class="headerlink" title="后台代码"></a>后台代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/ajax&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo4Controller</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test01&quot;,produces = &quot;text/html;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test01</span><span class="params">(String username,Integer age)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test01方法执行了&quot;</span>  + username +<span class="string">&quot; : &quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;你好美女&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test02&quot;,produces = &quot;text/html;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test02</span><span class="params">(UserVo userVo)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test02方法执行了&quot;</span>  + userVo);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;你好美女&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取请求携带的json字符串,将字符串存放到一个变量中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@RequestBody</span>:</span></span><br><span class="line"><span class="comment">     *      获取请求体中的字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test03&quot;,produces = &quot;text/html;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test03</span><span class="params">(<span class="meta">@RequestBody</span> String str)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test03方法执行了&quot;</span>);</span><br><span class="line">        System.out.println(str);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;你好美女&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取请求携带的json字符串,将字符串存放到一个变量中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@RequestBody</span>:</span></span><br><span class="line"><span class="comment">     *      注意: 需要导入jackson的jar包</span></span><br><span class="line"><span class="comment">     *      解析请求体中的json字符串,并将数据封装到vo对象中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userVo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test04&quot;,produces = &quot;application/json;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test04</span><span class="params">(<span class="meta">@RequestBody</span> UserVo userVo)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test04方法执行了&quot;</span>);</span><br><span class="line">        System.out.println(userVo);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;你好美女&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 响应数据:</span></span><br><span class="line"><span class="comment">     *      响应json格式的数据给浏览器</span></span><br><span class="line"><span class="comment">     *      <span class="doctag">@ResponseBody</span> + 对象</span></span><br><span class="line"><span class="comment">     *          可以直接将对象转成json字符串写回给浏览器</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userVo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test05&quot;,produces = &quot;application/json;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserVo <span class="title">test05</span><span class="params">(<span class="meta">@RequestBody</span> UserVo userVo)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test05方法执行了&quot;</span>);</span><br><span class="line">        System.out.println(userVo);</span><br><span class="line">        userVo.setAge(<span class="number">21</span>);</span><br><span class="line">        userVo.setUsername(<span class="string">&quot;笑雯&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> userVo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="前端代码"><a href="#前端代码" class="headerlink" title="前端代码"></a>前端代码</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>发送ajax请求<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- V:视图 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        用户名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.username&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        年龄: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.age&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sendAjax1()&quot;</span>&gt;</span>get方式-发送ajax请求1<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sendAjax2()&quot;</span>&gt;</span>get方式-发送ajax请求2<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sendAjax3()&quot;</span>&gt;</span>post方式-发送ajax请求3<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sendAjax4()&quot;</span>&gt;</span>post方式-发送ajax请求4<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sendAjax5()&quot;</span>&gt;</span>post方式-发送ajax请求5-返回json格式的数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;msg&#125;&#125; == &#123;&#123;resultUser.username&#125;&#125; == &#123;&#123;resultUser.age&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>, <span class="comment">// 将vue对象挂载到指定的视图上</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">data</span>:&#123; <span class="comment">// model,存放数据的位置</span></span></span><br><span class="line"><span class="javascript">            <span class="attr">msg</span>:<span class="string">&quot;默认值&quot;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">user</span>:&#123;</span></span><br><span class="line"><span class="javascript">                <span class="attr">username</span>:<span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="javascript">                <span class="attr">age</span>:<span class="number">0</span></span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="attr">resultUser</span>:&#123;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">sendAjax1</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 发送ajax请求</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//alert(&quot;函数执行了,即将发送ajax请求...&quot;);</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> url = <span class="string">&quot;/ajax/test01&quot;</span>;</span></span><br><span class="line"><span class="javascript">                axios.get(url,&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="attr">params</span>: <span class="built_in">this</span>.user</span></span><br><span class="line"><span class="javascript">                &#125;).then(<span class="function"><span class="params">resp</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.msg = resp.data;</span></span><br><span class="line"><span class="javascript">                &#125;);</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">sendAjax2</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 发送ajax请求</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//alert(&quot;函数执行了,即将发送ajax请求...&quot;);</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> url = <span class="string">&quot;/ajax/test02&quot;</span>;</span></span><br><span class="line"><span class="javascript">                axios.get(url,&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="attr">params</span>: <span class="built_in">this</span>.user</span></span><br><span class="line"><span class="javascript">                &#125;).then(<span class="function"><span class="params">resp</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.msg = resp.data;</span></span><br><span class="line"><span class="javascript">                &#125;);</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">sendAjax3</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// axios的post请求默认携带的参数类为 json 字符串</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// 发送ajax请求</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//alert(&quot;函数执行了,即将发送ajax请求...&quot;);</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> url = <span class="string">&quot;/ajax/test03&quot;</span>;</span></span><br><span class="line"><span class="javascript">                axios.post(url,<span class="built_in">this</span>.user).then(<span class="function"><span class="params">resp</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.msg = resp.data;</span></span><br><span class="line"><span class="javascript">                &#125;);</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">sendAjax4</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// axios的post请求默认携带的参数类为 json 字符串</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// 发送ajax请求</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//alert(&quot;函数执行了,即将发送ajax请求...&quot;);</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> url = <span class="string">&quot;/ajax/test04&quot;</span>;</span></span><br><span class="line"><span class="javascript">                axios.post(url,<span class="built_in">this</span>.user).then(<span class="function"><span class="params">resp</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.msg = resp.data;</span></span><br><span class="line"><span class="javascript">                &#125;);</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">sendAjax5</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// axios的post请求默认携带的参数类为 json 字符串</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// 发送ajax请求</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//alert(&quot;函数执行了,即将发送ajax请求...&quot;);</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> url = <span class="string">&quot;/ajax/test05&quot;</span>;</span></span><br><span class="line"><span class="javascript">                axios.post(url,<span class="built_in">this</span>.user).then(<span class="function"><span class="params">resp</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(resp.data);</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.resultUser = resp.data;</span></span><br><span class="line"><span class="javascript">                &#125;);</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="二、RESTFul风格的路径"><a href="#二、RESTFul风格的路径" class="headerlink" title="二、RESTFul风格的路径"></a>二、RESTFul风格的路径</h1><h3 id="2-1-REST"><a href="#2-1-REST" class="headerlink" title="2.1 REST"></a>2.1 REST</h3><p>Rest（ Representational State Transfer 即表述性状态传递） 一种<font color='red'>网络资源的访问风格</font>，定义了网络资源的访问方式;</p>
<ul>
<li><ul>
<li><p><strong>传统风格访问路径</strong><br> <a target="_blank" rel="noopener" href="http://localhost/user/getUser?id=1">http://localhost/user/getUser?id=1</a><br> <a target="_blank" rel="noopener" href="http://localhost/deleteUser?id=1">http://localhost/deleteUser?id=1</a></p>
</li>
<li><p><strong>Rest风格访问路径</strong><br> <a target="_blank" rel="noopener" href="http://localhost/user/1">http://localhost/user/1</a>        请求方式：get</p>
<p> <a target="_blank" rel="noopener" href="http://localhost/user/1">http://localhost/user/1</a>        请求方式：delete</p>
</li>
</ul>
</li>
<li><p>Restful是按照Rest风格访问网络资源</p>
</li>
<li><p>优点<br>1  <font color='red'>隐藏资源的访问行为</font>，通过地址无法得知做的是何种操作<br> 2 书写简化</p>
</li>
</ul>
<h3 id="2-2-Rest行为约定方式"><a href="#2-2-Rest行为约定方式" class="headerlink" title="2.2  Rest行为约定方式"></a>2.2  Rest行为约定方式</h3><p> GET（查询） <a target="_blank" rel="noopener" href="http://localhost/user/1">http://localhost/user/1</a> GET<br> POST（保存） <a target="_blank" rel="noopener" href="http://localhost/user">http://localhost/user</a> POST<br> PUT（更新） <a target="_blank" rel="noopener" href="http://localhost/user">http://localhost/user</a> PUT<br> DELETE（删除） <a target="_blank" rel="noopener" href="http://localhost/user">http://localhost/user</a> DELETE<br><strong>注意：</strong></p>
<p>1.上述行为是约定方式，约定不是规范，可以打破，所以<strong>称Rest风格，而不是Rest规范</strong> ；</p>
<p>2.RESTFul就是路径编写的另一种格式,这种格式面向的是资源(核心思想：<font color='red'>资源即路径</font>),而非具体的功能.；</p>
<p>3.在springmvc中使用@<strong>PathVariable注解</strong>就可以<strong>从Rest风格的URL中获取参数的值</strong>；</p>
<p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试restFull风格的路径书写</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//@Controller</span></span><br><span class="line"><span class="comment">//@ResponseBody//注解打在类上，那么当前handler下的所有方法的返回值，都被序列化成字符串，响应给客户端</span></span><br><span class="line"><span class="meta">@RestController</span><span class="comment">//等价于Controller+@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RestFullController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//localhost:8080/user/1</span></span><br><span class="line">    <span class="comment">//类前的@RequestMapping(&quot;/user&quot;)+这里的@GetMapping(&quot;/&#123;id&#125;&quot;)注解等价于：</span></span><br><span class="line">    <span class="comment">//@RequestMapping(value = &quot;/user/&#123;id&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//@ResponseBody 由于类前写了，这里就不用写了哈！</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUserById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setId(id);</span><br><span class="line">        user.setName(<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//post: url==&gt;localhost:8080/user/2/lisi</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/&#123;id&#125;/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">addUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span></span><br><span class="line"><span class="params"><span class="function">                        <span class="meta">@PathVariable(&quot;name&quot;)</span> String name)</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setId(id);</span><br><span class="line">        user.setName(<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新使用put</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/&#123;id&#125;/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">updateUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span></span><br><span class="line"><span class="params"><span class="function">                        <span class="meta">@PathVariable(&quot;name&quot;)</span> String name)</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setId(id);</span><br><span class="line">        user.setName(<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">deleteUserById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setId(id);</span><br><span class="line">        user.setName(<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>路径参数和普通参数的优缺点</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">路径参数优缺点：</span></span><br><span class="line"><span class="attr">优点：</span></span><br><span class="line"><span class="attr">1</span> <span class="string">资源定位明确：路径参数能更直观地表达API所操作的具体资源，使得URL更具语义化。</span></span><br><span class="line"><span class="attr">2</span> <span class="string">可扩展性：如果需要添加更多层级或分类，路径参数能更好地适应这种需求。</span></span><br><span class="line"><span class="attr">3</span> <span class="string">安全性：相较于普通参数，路径参数不太可能受到常见的注入攻击。</span></span><br><span class="line"><span class="attr">缺点：</span></span><br><span class="line"><span class="attr">1</span> <span class="string">路径长度限制：每个URL都有一定的长度限制，过多的路径参数可能导致URL超出限制。</span></span><br><span class="line"><span class="attr">2</span> <span class="string">修改困难：一旦设计好路径参数，后续修改可能会影响所有使用这个API的地方。</span></span><br><span class="line"><span class="attr">3</span> <span class="string">不支持复杂数据类型：路径参数通常只支持基本的数据类型，如整数、字符串等。</span></span><br><span class="line"></span><br><span class="line"><span class="attr">普通参数的优缺点：</span></span><br><span class="line"><span class="attr">优点：</span></span><br><span class="line"><span class="attr">1</span> <span class="string">支持复杂数据类型：普通参数可以接受复杂的数据类型，如JSON、XML等。</span></span><br><span class="line"><span class="attr">2</span> <span class="string">灵活性强：可以接受任意格式和类型的参数，便于传递大量数据。</span></span><br><span class="line"><span class="attr">3</span> <span class="string">易于修改和扩展：普通参数通常放在查询字符串中，修改和扩展相对容易。</span></span><br><span class="line"><span class="attr">缺点：</span></span><br><span class="line"><span class="attr">1</span> <span class="string">URL可读性差：过多的普通参数会使URL变得冗长且难以阅读。</span></span><br><span class="line"><span class="attr">2</span> <span class="string">可能受到注入攻击：如果没有正确处理普通参数，可能会遭受SQL注入等攻击。</span></span><br><span class="line"><span class="attr">3</span> <span class="string">不利于资源定位：普通参数通常用于操作或查询条件，不如路径参数直观地表示资源位置。</span></span><br><span class="line"></span><br><span class="line"><span class="attr">总结：</span></span><br><span class="line"><span class="attr">选择使用路径参数还是普通参数，需要根据具体的需求和场景来决定。如果需要明确地标识资源，并且URL的长度不会成为问题，那么路径参数可能是一个更好的选择。如果需要传递复杂的数据或查询条件，或者不能确定资源的具体位置，那么普通参数可能更加合适。无论选择哪种方式，都需要确保其安全性，并保持一致性。</span></span><br></pre></td></tr></table></figure>

<p><strong>结合SpringMVC1，从请求和响应两个方面，进行总结（方便下次写接口时，如何快速正确写出来我想要的接口</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1</span> <span class="string">Controller类上直接使用RestController注解</span></span><br><span class="line"><span class="attr">2</span> <span class="string">Controller类上使用RequestMapping注解，具体方法再具体写成GetMapping，PostMapping等注解</span></span><br><span class="line"><span class="attr">3</span> <span class="string">MVC请求参数（非原生API）：</span></span><br><span class="line">	<span class="attr">如果是基本类型，使用@RequestParam(&quot;前端参数名称&quot;)</span></span><br><span class="line">	<span class="attr">如果是对象或者集合，则使用@RequestBody注解</span></span><br><span class="line">	<span class="attr">如果是路径参数则使用@PathVariable</span></span><br><span class="line"><span class="attr">4</span> <span class="string">返回参数： </span></span><br><span class="line"><span class="attr">如果返回字符串，如已有上面第1点，则不用管</span></span><br><span class="line"><span class="attr">如果返回非字符串类型，则再GetMapping，PostMapping等注解中的produces属性中指定返回类型</span></span><br><span class="line"><span class="attr">如果有必要也可以使用原生的HttpServletResponse指定返回类型并封装返回内容</span></span><br><span class="line"><span class="attr">如果下载文件，可以返回ResponseEntity&lt;T&gt;对象！</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="三、静态资源映射"><a href="#三、静态资源映射" class="headerlink" title="三、静态资源映射"></a>三、静态资源映射</h1><p>静态资源访问不到的原因</p>
<p><img src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day05-springmvc-2/image-20201203163634467.png" alt="image-20201203163634467"></p>
<p>总之，通过资源URL<strong>根据处理器映射器找不到对应的Handler处理器</strong>；</p>
<h4 id="【1】解决方式1-了解即可-："><a href="#【1】解决方式1-了解即可-：" class="headerlink" title="【1】解决方式1(了解即可)："></a>【1】解决方式1(了解即可)：</h4><p>方案一：激活Tomcat的defaultServlet来处理静态文件</p>
<p>用原生servlet方式在web.xml中配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置静态资源处理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>default<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.html<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.css<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.js<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.png<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="【2】解决方式2："><a href="#【2】解决方式2：" class="headerlink" title="【2】解决方式2："></a>【2】解决方式2：</h4><p>  在springmvc.xml文件中配置：</p>
<p>&lt; mvc:resources mapping=”匹配请求路径” location=”真实路径”&gt;  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 设置静态资源不过滤 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/css/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/css/&quot;</span> /&gt;</span>  <span class="comment">&lt;!-- 样式 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/images/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/images/&quot;</span> /&gt;</span>  <span class="comment">&lt;!-- 图片 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/js/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/js/&quot;</span> /&gt;</span>  <span class="comment">&lt;!-- javascript --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/html/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/html/&quot;</span> /&gt;</span>  <span class="comment">&lt;!-- html资源 --&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="【3】解决方式3：（我们采用的就是这种方式）"><a href="#【3】解决方式3：（我们采用的就是这种方式）" class="headerlink" title="【3】解决方式3：（我们采用的就是这种方式）"></a>【3】解决方式3：（我们采用的就是这种方式）</h4><p>  在springmvc.xml文件中配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">&lt;!-- 统一配置 ★ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 代替以上所有的配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="四、异常处理机制"><a href="#四、异常处理机制" class="headerlink" title="四、异常处理机制"></a>四、异常处理机制</h1><h3 id="4-1-为什么使用异常处理机制"><a href="#4-1-为什么使用异常处理机制" class="headerlink" title="4.1 为什么使用异常处理机制?"></a>4.1 为什么使用异常处理机制?</h3><p>【1】在我们项目中避免不了有异常的情况,当异常的情况发生时,我们<strong>不能将异常信息直接返回给用户(浏览器),    我们采用友好的方式告知用户</strong>. 告知的方式就是我们要用的统一异常处理；</p>
<p>处理方式?</p>
<p>​        <strong>项目中所有的异常都可以向上抛出,最终抛给异常处理类,</strong></p>
<p>​         <strong>然后在异常处理类中定义友好的提示信息,并返回给用户.</strong></p>
<p>【2】在Java中所有的异常最终的归宿都是被抓取的.抓取后进行处理，而对于异常的处理一般有两种方式: </p>
<p>​        一种是当前方法处理，这种处理方式会造成业务代码和异常处理代码的耦合。 </p>
<p>​        另一种是<strong>抛给调用者处理，在这种方法的基础上，衍生出了SpringMVC的异常处理机制</strong>。 </p>
<p>​        由于我们的代码最后都是有Spring框架来调用的，所以我们可以<strong>直接将异常抛给框架，然后由框架统一处理。</strong> </p>
<h3 id="4-2-统一异常处理实现"><a href="#4-2-统一异常处理实现" class="headerlink" title="4.2 统一异常处理实现"></a>4.2 统一异常处理实现</h3><p><strong>SpringMVC的异常处理思路:<strong>【</strong>所有异常都往上抛，然后指定一个统一的异常处理器进行处理</strong>】</p>
<h4 id="方式1：基于HandlerExceptionResolver接口实现"><a href="#方式1：基于HandlerExceptionResolver接口实现" class="headerlink" title="方式1：基于HandlerExceptionResolver接口实现"></a>方式1：基于HandlerExceptionResolver接口实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">自定义异常处理器</span><br><span class="line"> a）.编写一个类,实现 HandlerExceptionResolver 接口</span><br><span class="line"> b）.重写 resolveException方法：完成异常处理</span><br><span class="line">        <span class="number">1.</span>跳转到公共的错误页面</span><br><span class="line">        <span class="number">2.</span>携带错误信息</span><br><span class="line">        返回：ModelAndView</span><br><span class="line">           addObject：  携带参数</span><br><span class="line">           setViewName：指定页面跳转</span><br><span class="line"> c.配置异常处理器（交给spring容器管理）</span><br><span class="line">	&lt;bean id=<span class="string">&quot;exceptionResolver&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;com.itheima.exception.MyHandlerExceptionResolver&quot;</span> /&gt;	 或者使用注解加入spring的ioc容器中；</span><br></pre></td></tr></table></figure>

<p>实现代码如下：</p>
<h5 id="自定义异常处理类"><a href="#自定义异常处理类" class="headerlink" title="自定义异常处理类"></a>自定义异常处理类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHandlerExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandlerExceptionResolver</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request : 请求对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response : 响应对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler : 处理器对象(哪个处理器方法抛出的异常)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex : 抛出的异常是什么</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        HttpServletRequest request, </span></span></span><br><span class="line"><span class="params"><span class="function">        HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">        Object handler, </span></span></span><br><span class="line"><span class="params"><span class="function">        Exception ex)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg&quot;</span>,ex.getMessage());</span><br><span class="line">        <span class="comment">// 设置视图</span></span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;forward:/pages/error.jsp&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>测试类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testException&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testException</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">            System.out.println(<span class="number">1</span>/<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">当发生异常时，会定位到自定义编写的MyHandlerExceptionResolver类</span><br><span class="line">同时会调用其resolveException方法，然后跳转并返回错误页面给前端</span><br></pre></td></tr></table></figure>

<h4 id="方式2：注解开发异常处理器（推荐）"><a href="#方式2：注解开发异常处理器（推荐）" class="headerlink" title="方式2：注解开发异常处理器（推荐）"></a>方式2：注解开发异常处理器（推荐）</h4><p>使用@ControllerAdvice注解以及 @ExceptionHandler注解来定位映射抛出来的异常类型</p>
<p>对不同的异常类型作出响应的处理方法。</p>
<p> 名称： @ControllerAdvice<br> 类型： 类注解<br> 位置：<font color='red'>异常处理器类上方</font><br> 作用：<strong>设置当前类为异常处理器类</strong><br> 范例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionAdvice</span> </span>&#123;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>


<p> 名称： @ExceptionHandler<br> 类型： 方法注解<br> 位置：<font color='red'>异常处理器类中针对指定异常进行处理的方法上方</font><br> 作用：设置指定异常的处理方式<br> 范例：<br> 说明：处理器方法可以设定多个</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(Exception.class)</span> <span class="comment">//指定异常类型</span></span><br><span class="line"><span class="meta">@ResponseBody</span> <span class="comment">// 如果是转发到某个页面，那么该注解就用不着了。</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">doOtherException</span><span class="params">(Exception ex)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;出错啦，请联系管理员！ &quot;</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="4-3-理想的异常处理解决方案（采用上述方式2）"><a href="#4-3-理想的异常处理解决方案（采用上述方式2）" class="headerlink" title="4.3  理想的异常处理解决方案（采用上述方式2）"></a>4.3  理想的异常处理解决方案（采用上述方式2）</h3><h4 id="【1】异常处理方案"><a href="#【1】异常处理方案" class="headerlink" title="【1】异常处理方案"></a>【1】异常处理方案</h4><ul>
<li>1 <strong>业务异常：</strong>（自己定义的异常，如前端请求携带的参数不规范）<br> 发送对应消息传递给用户，提醒规范操作</li>
<li>2 <strong>系统异常：</strong> （代码出错异常）<br> 发送固定消息传递给用户，安抚用户<br> 发送特定消息给运维人员，提醒维护<br> 记录日志</li>
<li>3 <strong>其他异常：</strong><br> 发送固定消息传递给用户，安抚用户<br> 发送特定消息给编程人员，提醒维护<br> 纳入预期范围内<br> 记录日志  </li>
</ul>
<p>1 业务异常：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义异常继承RuntimeException，覆盖父类所有的构造方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BusinessException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(String message, Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message, cause);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(cause);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(String message, Throwable cause, <span class="keyword">boolean</span> enableSuppression, <span class="keyword">boolean</span> writableStackTrace)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message, cause, enableSuppression, writableStackTrace);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2 系统异常：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.heima.exception;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义系统异常，一般是编译器检查异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SystemException</span>  <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SystemException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SystemException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SystemException</span><span class="params">(String message, Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message, cause);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SystemException</span><span class="params">(Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(cause);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SystemException</span><span class="params">(String message, Throwable cause, <span class="keyword">boolean</span> enableSuppression, <span class="keyword">boolean</span> writableStackTrace)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message, cause, enableSuppression, writableStackTrace);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.定义分类异常<strong>管理器</strong>,当发生了指定异常时，就会调用指定了异常的处理器方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 异常分类管理器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> laofang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021-06-15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyControllerAdvice</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@ExceptionHandler</span>(BusinessException.class)</span></span><br><span class="line"><span class="comment">     * 表示当前方法只处理BusinessException异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(BusinessException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">resolveBusinessException</span><span class="params">(BusinessException ex)</span></span>&#123;</span><br><span class="line">        <span class="comment">// do:安抚用户</span></span><br><span class="line">        <span class="comment">// 记录日志</span></span><br><span class="line">        String errorMsg = ex.getMessage();</span><br><span class="line">        <span class="keyword">return</span> errorMsg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 出现系统异常时，跳转到error.jsp页面</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(SystemException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveSystemException</span><span class="params">(SystemException ex)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 安抚用户</span></span><br><span class="line">        <span class="comment">// 通知运维人员 调用短信接口 调用邮箱接口 调用站内信</span></span><br><span class="line">        <span class="comment">// 记录日志</span></span><br><span class="line">        String errorMsg = ex.getMessage();</span><br><span class="line">        ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        mv.setViewName(<span class="string">&quot;forward:/WEB-INF/pages/error.jsp&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;error&quot;</span>,errorMsg);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//其他异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">resolverException</span><span class="params">(Exception e)</span></span>&#123;</span><br><span class="line">        String message = e.getMessage();</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 业务中抛出的任何异常都会被本类捕获，根据抛出的类型作相对应的处理方式。</span></span><br></pre></td></tr></table></figure>

<p>3.触发业务异常测试代码示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestExceptionController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUser</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="comment">//举例业务异常说明</span></span><br><span class="line">        <span class="keyword">if</span>(name.trim().length()&lt;<span class="number">4</span> )&#123;</span><br><span class="line">            <span class="comment">//尽管抛就好啦，对应的异常处理器会进行处理。</span></span><br><span class="line">            <span class="keyword">throw</span>  <span class="keyword">new</span> BusinessException(<span class="string">&quot;用户名长度必须在2-4位之间，请重新输入！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>总之，通过自定义异常将所有的异常现象进行分类管理，以统一的格式对外呈现异常消息</strong>  </p>
<h1 id="五、文件上传"><a href="#五、文件上传" class="headerlink" title="五、文件上传"></a>五、文件上传</h1><p>用户通过客户端,<strong>将用户本地文件传递到服务器上</strong>,并<strong>在服务器上将用户上传的文件进行保存</strong>；</p>
<h3 id="5-1-文件上传三要素"><a href="#5-1-文件上传三要素" class="headerlink" title="5.1 文件上传三要素"></a>5.1 文件上传三要素</h3><p>【1】<strong>请求方式必须是Post</strong>    因为get请求携带的数据量受限</p>
<p>【2】form表单的enctype取值必须是:<strong>multipart/form-data</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">enctype</span>:<span class="string">是表单请求正文的类型, 而设置为multipart/form-data 表示多部分表单项</span></span><br><span class="line"><span class="attr">作用：</span></span><br><span class="line"><span class="attr">1.将普通表单项与文件上传项分离,普通表单项可以直接被解析.</span></span><br><span class="line"><span class="attr">2.而上传文件项需要对上传的文件进行解析,并保存文件</span></span><br></pre></td></tr></table></figure>

<p>【3】前端代码：提供一个文件输入框<input type="file" name="xxx"/></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    用户名: <span class="tag">&lt;<span class="name">input</span>  <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>/&gt;</span> 【普通表单项】</span><br><span class="line">    密码: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span> 【普通表单项】</span><br><span class="line">    头像: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;filename&quot;</span> /&gt;</span>   【上传文件项】</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交表单&quot;</span> /&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="5-2-SpringMVC实现文件上传"><a href="#5-2-SpringMVC实现文件上传" class="headerlink" title="5.2 SpringMVC实现文件上传"></a>5.2 SpringMVC实现文件上传</h3><p>代码编写步骤：</p>
<p>1.导入Fileupload的jar包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--普通文件上传--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.配置文件解析器</p>
<p>配置到springmvc.xml文件中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置文件上传解析器 id为固定值,不能变--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--最大文件大小，单位字节 5m= 1024*1024*5--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5000000&quot;</span>/&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--指定默认编码格式--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3.编写前端页面(发送上传文件的请求)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">        &lt;%-- TODO:普通表单项 --%&gt;</span><br><span class="line">        用户名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;tom&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        &lt;%-- TODO:普通表单项 --%&gt;</span><br><span class="line">        年龄: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;18&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        &lt;%-- TODO:文件上传项 --%&gt;</span><br><span class="line">        头像: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;filename&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交表单&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>4.编写上传的方法(单文件)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/file&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileUploadController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username : 普通表单项</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> age : 普通表单项</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filename : 文件上传项,在此对象中存放有上传的文件的所有信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/fileUpload&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handler01</span><span class="params">(String username, Integer age, MultipartFile filename)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(username+<span class="string">&quot; : &quot;</span>+age);</span><br><span class="line">        <span class="comment">// 文件对象,需要处理</span></span><br><span class="line">        <span class="comment">// 获取上传文件项的名称  name=&quot;filename&quot;(获取name属性的值)</span></span><br><span class="line">        String name = filename.getName();</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        <span class="comment">// 1 获取上传的文件的名称</span></span><br><span class="line">        String originalName = filename.getOriginalFilename();</span><br><span class="line">        System.out.println(originalName);</span><br><span class="line">        <span class="comment">// 2 截取文件的扩展名</span></span><br><span class="line">        <span class="keyword">int</span> startIndex = originalName.lastIndexOf(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">        String fileStr = originalName.substring(startIndex, originalName.length());</span><br><span class="line">        System.out.println(fileStr);</span><br><span class="line">        <span class="comment">// 3 生成唯一的文件名称</span></span><br><span class="line">        originalName = UUID.randomUUID().toString()+fileStr;</span><br><span class="line">        <span class="comment">// 4 将上传的文件保存到本地</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">&quot;G:/upload116/&quot;</span>+originalName);</span><br><span class="line">        filename.transferTo(file);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 多文件上传：</p>
<p>前端：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;/uploadMany&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    姓名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userName&quot;</span> &gt;&lt;br&gt;</span><br><span class="line">    年龄：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    简历：&lt;br&gt;</span><br><span class="line">    简历<span class="number">1</span>：&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;resumes&quot;</span>&gt;简历<span class="number">2</span>：&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;resumes&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;%--头像：&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;headImg&quot;</span>&gt;&lt;br&gt;--%&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>后台代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试上传多文件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> userName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> age</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resumes</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/uploadMany&quot;,method = RequestMethod.POST)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">uploadMany</span><span class="params">(String userName, Integer age, MultipartFile[] resumes)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;name:&quot;</span>+userName+<span class="string">&quot;---age:&quot;</span>+age);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (MultipartFile re : resumes) &#123;</span><br><span class="line">        <span class="comment">//获取form表达中file对象的输入项名称 headImg</span></span><br><span class="line">        String name = re.getName();</span><br><span class="line">        <span class="comment">//文件的原始名称</span></span><br><span class="line">        String oName = re.getOriginalFilename();</span><br><span class="line">        <span class="comment">//获取文件后缀</span></span><br><span class="line">        String suffixType = oName.substring(oName.lastIndexOf(<span class="string">&quot;.&quot;</span>), oName.length());</span><br><span class="line">        <span class="comment">//使用UUID随机生成文件名称</span></span><br><span class="line">        String newName= UUID.randomUUID().toString()+ suffixType;</span><br><span class="line">        <span class="comment">//保存图片 图片保存到本地</span></span><br><span class="line">        <span class="comment">//实际项目开发开发中保存在第三方服务器下：阿里云oss等</span></span><br><span class="line">        re.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;C:\\Users\\Administrator\\Desktop\\imgs\\&quot;</span>,newName));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>文件下载：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> laofang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021-06-14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DownLoadController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 原生API实现下载</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/d1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">downLoad1</span><span class="params">(HttpServletResponse response)</span></span>&#123;</span><br><span class="line">        OutputStream out=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            File file = <span class="keyword">new</span> File(<span class="string">&quot;C:\\Users\\Administrator\\Desktop\\imgs\\one.png&quot;</span>);</span><br><span class="line">            response.reset();</span><br><span class="line">            <span class="comment">//设置响应数据类型</span></span><br><span class="line">            response.setContentType(<span class="string">&quot;application/octet-stream; charset=utf-8&quot;</span>);</span><br><span class="line">            <span class="comment">//   Content-disposition 是 MIME 协议的扩展，MIME 协议指示 MIME 用户代理如何显示附加的文件。</span></span><br><span class="line">            <span class="comment">//   当 Internet Explorer 接收到头时，它会激活文件下载对话框，</span></span><br><span class="line">            <span class="comment">//   它的文件名框自动填充了头中指定的文件名。</span></span><br><span class="line">            response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=&quot;</span> + file.getName());</span><br><span class="line">            out = response.getOutputStream();</span><br><span class="line">            out.write(FileUtils.readFileToByteArray(file));</span><br><span class="line">            out.flush();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                out.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * springmvc api实现下载</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/d2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; download() <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">&quot;C:\\Users\\Administrator\\Desktop\\imgs\\one.png&quot;</span>);</span><br><span class="line">      <span class="comment">//  String dfileName = new String(fileName.getBytes(&quot;gb2312&quot;), &quot;iso8859-1&quot;);</span></span><br><span class="line">        HttpHeaders headers = <span class="keyword">new</span> HttpHeaders();</span><br><span class="line">        <span class="comment">//response.setContentType(&quot;application/octet-stream; charset=utf-8&quot;);</span></span><br><span class="line">        headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);</span><br><span class="line">        <span class="comment">//  response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + file.getName());</span></span><br><span class="line">        headers.setContentDispositionFormData(<span class="string">&quot;attachment&quot;</span>, file.getName());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt;(FileUtils.readFileToByteArray(file),</span><br><span class="line">                headers, HttpStatus.CREATED);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="面试可能会问到的问题："><a href="#面试可能会问到的问题：" class="headerlink" title="面试可能会问到的问题："></a>面试可能会问到的问题：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">问答题:</span><br><span class="line">    1 请求携带日期类型的数据如何接收?</span><br><span class="line">    2 请求参数名与形参名不一致时如何接收参数?</span><br><span class="line">    3 如何获取请求携带的cookie的值?</span><br><span class="line">    4 如何处理post请求的乱码问题?</span><br><span class="line">    5 SpringMVC生成响应的方式有哪些?</span><br><span class="line">    6 SpringMVC生成响应时如何共享数据?</span><br><span class="line">    7 @RequestBody和@ResponseBody的区别?</span><br><span class="line">    8 静态资源过滤的三种方式?</span><br><span class="line">    9 什么是SpringMVC的统一异常处理机制? 如何实现?</span><br><span class="line">    10 文件上传前端三要素是什么?</span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1</span> :<span class="string">请求携带日期类型的数据如何接收?</span></span><br><span class="line">    <span class="attr">方法1：自定义类型转换器：实现Convert&lt;source,target&gt;</span></span><br><span class="line">	<span class="meta">方法2：@DateTimeFormart(pattern</span>=<span class="string">&quot;格式&quot;)</span></span><br><span class="line">	<span class="attr">如：</span></span><br><span class="line">	<span class="attr">@RequestMapping(&quot;/test05&quot;)</span></span><br><span class="line">	<span class="attr">public</span> <span class="string">String test05( @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;) Date birthday)&#123;</span></span><br><span class="line"><span class="attr">2</span> :<span class="string">请求参数名与形参名不一致时如何接收参数?</span></span><br><span class="line">	<span class="attr">@RequestParam(&quot;请求携带的参数名&quot;)</span></span><br><span class="line">	<span class="attr">如：</span></span><br><span class="line">	<span class="attr">@RequestMapping(&quot;demo8&quot;)</span></span><br><span class="line">	<span class="attr">public</span> <span class="string">String demo1(@RequestParam(&quot;name&quot;) String username)&#123;</span></span><br><span class="line"><span class="attr">3</span> :<span class="string">如何获取请求携带的cookie的值?</span></span><br><span class="line">	<span class="attr">@CookieValue(&quot;cookie的名称&quot;)</span></span><br><span class="line"><span class="attr">4</span> :<span class="string">如何获取请求头中某个数据？</span></span><br><span class="line">	<span class="meta">@RequestHeader(&quot;请求头中对应的key&quot;)</span>  <span class="string"></span></span><br><span class="line">	<span class="attr">如：</span></span><br><span class="line">	<span class="attr">@RequestMapping(&quot;demo2&quot;)</span></span><br><span class="line">	<span class="attr">public</span> <span class="string">String demo2(@RequestHeader(&quot;cookie&quot;) String cookie)&#123;</span></span><br><span class="line"><span class="attr">5</span> :<span class="string">如何处理post请求的乱码问题?</span></span><br><span class="line">	<span class="attr">设置编码过滤器：CharacterEncodingFilter</span></span><br><span class="line"><span class="attr">6</span> :<span class="string">SpringMVC生成响应的方式有哪些?</span></span><br><span class="line">    <span class="attr">1</span> <span class="string">请求转发:</span></span><br><span class="line">    	<span class="attr">forward</span>:<span class="string">视图的物理路径</span></span><br><span class="line">    	<span class="meta">逻辑视图</span> <span class="string">+ 视图解析器</span></span><br><span class="line">    <span class="attr">2</span> <span class="string">重定向:</span></span><br><span class="line">    	<span class="attr">redirect</span>:<span class="string">视图的物理路径</span></span><br><span class="line">    <span class="attr">3</span> <span class="string">以流的形式写回一个字符串</span></span><br><span class="line">    	<span class="meta">前提：&lt;mvc</span>:<span class="string">annotation-driven/&gt;</span></span><br><span class="line">    	<span class="meta">@ResponseBody</span> <span class="string">+ String</span></span><br><span class="line">    	<span class="meta">@ResponseBody</span> <span class="string">+ 对象 : 将对象转成json字符串,将转完后的json写回给浏览器</span></span><br><span class="line">    	<span class="attr">引入jackson相关依赖，实现对象的序列化和反序列化操作；</span></span><br><span class="line"><span class="attr">7</span> :<span class="string">SpringMVC生成响应时如何共享数据?</span></span><br><span class="line">    <span class="meta">转发：</span>        <span class="string"></span></span><br><span class="line">    	<span class="attr">HttpServletRequest</span>        <span class="string"></span></span><br><span class="line">    	<span class="attr">model</span></span><br><span class="line">    	<span class="attr">modelAndView</span></span><br><span class="line">    <span class="attr">重定向：</span></span><br><span class="line">    	<span class="attr">model</span></span><br><span class="line">    	<span class="attr">modelAndView</span>  <span class="string"></span></span><br><span class="line">    	<span class="meta">策略：将model或者modelAndView中的数据以参数的形式拼接到请求url地址下；</span>    <span class="string"></span></span><br><span class="line"><span class="attr">8</span> :<span class="string">@RequestBody和@ResponseBody的区别?（位置，作用）</span></span><br><span class="line">    <span class="meta">@RequestBody</span>: <span class="string">解析post请求携带的json数据,将数据封装到对应的vo对象中</span></span><br><span class="line">    <span class="meta">@RestController(写在类上)</span>: <span class="string">= @Controller（类上）+@ResponseBody（类上或者方法上都行） </span></span><br><span class="line">    	<span class="attr">ResponseBody</span> <span class="string">+ String:以流的形式写回一个字符串</span></span><br><span class="line">    	<span class="attr">ResponseBody</span> <span class="string">+ 对象: 将对象转成Json,并以流的形式写回给浏览器(需导入Jackson的jar包)</span></span><br><span class="line"><span class="attr">9</span> :<span class="string">静态资源过滤的三种方式?</span></span><br><span class="line">    <span class="attr">1</span> <span class="string">defaultServlet的方式: 在web.xml文件中配置过滤的静态资源(了解)</span></span><br><span class="line">    <span class="attr">2</span> <span class="string">SpringMVC的方式:</span></span><br><span class="line">    <span class="attr">3</span> <span class="string">在SpringMVC的配置文件中一类一类的配置：&lt;mvc:resources mapping=&quot;指定匹配规则&quot;  location=&quot;资源的物理路径&quot;/&gt;</span></span><br><span class="line">	<span class="meta">可以配置所有的静态资源</span>:<span class="string">&lt;mvc:default-servlet-handler/&gt;</span></span><br><span class="line"><span class="attr">10</span> :<span class="string">什么是SpringMVC的统一异常处理机制? 如何实现?:</span></span><br><span class="line">	<span class="attr">使用SpringMVC框架时,遇到的所有异常都可以抛向SpringMVC框架；</span></span><br><span class="line">	<span class="attr">SpringMVC框架遇到异常后会找一个异常类进行统一处理</span></span><br><span class="line">	</span><br><span class="line">	<span class="attr">方式1：</span></span><br><span class="line">        <span class="attr">实现HandlerExceptionResolver接口，同时将对应的实现类加入ioc容器</span></span><br><span class="line">        <span class="attr">弊端：不同的异常做不同的处理时，维护性差；</span></span><br><span class="line">	<span class="attr">方式2：</span></span><br><span class="line">        <span class="meta">扩展</span>: <span class="string">注解方式实现异常处理</span></span><br><span class="line">        <span class="attr">@Component</span></span><br><span class="line">        <span class="attr">@ControllerAdvice---&gt;实现异常【分类】处理器</span></span><br><span class="line">        <span class="attr">可以定义若干个方法处理不同的异常：</span></span><br><span class="line">        <span class="attr">@ExceptionHandler(指定管理的异常的字节码对象)，作用于方法上的</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">11</span> :<span class="string">为什么使用同一异常，而不是逐个处理？</span></span><br><span class="line">    <span class="attr">1.如果逐个处理的话，开发繁琐，而且异常处理代码与业务代码耦合到一块；</span></span><br><span class="line">    <span class="attr">2.维护性差；</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">12</span> :<span class="string">文件上传前端三要素是什么?</span></span><br><span class="line"><span class="meta">前端准备：</span>    <span class="string"></span></span><br><span class="line">    <span class="meta">请求方式</span>: <span class="string">post</span></span><br><span class="line">    <span class="meta">请求参数类型</span>: <span class="string">enctype=&quot;multipart/form-data&quot;</span></span><br><span class="line">    <span class="attr">表单中提供文件输入框</span></span><br><span class="line"><span class="attr">后台：</span></span><br><span class="line"><span class="attr">1.引入文件上传的相关依赖：commons-fileupload.jar</span></span><br><span class="line"><span class="attr">2.在springmvc.xml中配置文件上传解析器：</span></span><br><span class="line">    <span class="meta">&lt;bean</span> <span class="string">id=&quot;multipartResolver&quot; class=&quot;xxx&quot;&gt;</span></span><br><span class="line">    <span class="attr">&lt;!--定义编码--&gt;</span></span><br><span class="line">    <span class="meta">&lt;prperty</span> <span class="string">name=&quot;encoding&quot; value=&quot;utf-8&quot;/&gt;</span></span><br><span class="line">    <span class="attr">&lt;!--定义文件上传的最大字节数,单位：字节--&gt;</span></span><br><span class="line">    <span class="meta">&lt;property</span> <span class="string">name=&quot;maxuploadsize&quot; value=&quot;xxxx&quot;</span></span><br><span class="line">    <span class="meta">&lt;/bean&gt;</span>    <span class="string"></span></span><br><span class="line"><span class="attr">3</span> <span class="string">后台controller层代码：见上面！</span></span><br></pre></td></tr></table></figure>







</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">高明辉</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/04/22/springmvc-2/">http://example.com/2022/04/22/springmvc-2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Jason</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/springmvc/">springmvc</a></div><div class="post_share"><div class="social-share" data-image="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day05-springmvc-2/%E5%B0%81%E9%9D%A2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="添加微信"/></a><div class="post-qr-code-desc">添加微信</div></li><li class="reward-item"><a href="/img/pay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/pay.jpg" alt="付款码"/></a><div class="post-qr-code-desc">付款码</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/04/23/ssm%E6%95%B4%E5%90%88/"><img class="prev-cover" src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day06-ssm%E6%95%B4%E5%90%88/%E5%B0%81%E9%9D%A2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">ssm整合</div></div></a></div><div class="next-post pull-right"><a href="/2022/04/22/springmvc-1/"><img class="next-cover" src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day04-springmvc-1/%E5%B0%81%E9%9D%A2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">springmvc-1</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/04/22/springmvc-1/" title="springmvc-1"><img class="cover" src="/img/java/04%E9%98%B6%E6%AE%B5%E7%83%AD%E9%97%A8%E6%A1%86%E6%9E%B6/day04-springmvc-1/%E5%B0%81%E9%9D%A2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-22</div><div class="title">springmvc-1</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%93%8D%E5%BA%94%E5%92%8C%E5%B0%81%E8%A3%85%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">1.</span> <span class="toc-text">一、响应和封装返回值</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-0-SpringMVC%E4%B8%AD%E5%93%8D%E5%BA%94%E7%9A%84%E5%A4%9A%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text">1.0 SpringMVC中响应的多种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%901%E3%80%91%E5%8E%9F%E7%94%9FAPI%E5%92%8CSpringMVC%E5%AE%9E%E7%8E%B0%E8%BD%AC%E5%8F%91"><span class="toc-number">1.1.0.1.</span> <span class="toc-text">【1】原生API和SpringMVC实现转发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%902%E3%80%91%E5%8E%9F%E7%94%9FAPI%E5%92%8CSpringMVC%E5%AE%9E%E7%8E%B0%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.1.0.2.</span> <span class="toc-text">【2】原生API和SpringMVC实现重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%903%E3%80%91%E5%8E%9F%E7%94%9FAPI%E5%92%8CSpringMVC%E4%BB%A5%E6%B5%81%E7%9A%84%E5%BD%A2%E5%BC%8F%E5%86%99%E5%9B%9E%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.1.0.3.</span> <span class="toc-text">【3】原生API和SpringMVC以流的形式写回字符串</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%93%8D%E5%BA%94%E6%97%B6%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.</span> <span class="toc-text">1.1 响应时数据共享问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E3%80%901%E3%80%91%E8%BD%AC%E5%8F%91%E5%93%8D%E5%BA%94%E6%97%B6%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.0.0.1.</span> <span class="toc-text">【1】转发响应时共享数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-%E4%BD%BF%E7%94%A8request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%B0%81%E8%A3%85%E5%93%8D%E5%BA%94%E7%BB%93%E6%9E%9C"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.1.1 使用request域对象封装响应结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-%E4%BD%BF%E7%94%A8Model%E5%B0%81%E8%A3%85%E7%BB%93%E6%9E%9C"><span class="toc-number">1.2.2.</span> <span class="toc-text">1.1.2 使用Model封装结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-3-%E4%BD%BF%E7%94%A8ModelAndView%E5%B0%81%E8%A3%85%E7%BB%93%E6%9E%9C"><span class="toc-number">1.2.3.</span> <span class="toc-text">1.1.3 使用ModelAndView封装结果</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E3%80%902%E3%80%91%E9%87%8D%E5%AE%9A%E5%90%91%E6%97%B6%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.3.0.1.</span> <span class="toc-text">【2】重定向时共享数据</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%E7%9A%84%E5%93%8D%E5%BA%94"><span class="toc-number">1.3.</span> <span class="toc-text">1.2 异步请求的响应</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-%E4%BD%BF%E7%94%A8Response-%E5%8E%9F%E7%94%9FAPI%E5%93%8D%E5%BA%94%E7%BB%93%E6%9E%9C"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.2.1 使用Response 原生API响应结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E4%BD%BF%E7%94%A8-ResponseBody%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.3.2.</span> <span class="toc-text">1.2.2 使用@ResponseBody注解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%BF%94%E5%9B%9E%E6%99%AE%E9%80%9A%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">1 返回普通字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%BF%94%E5%9B%9Ejson%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">2 返回json字符串</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-4-RequestBody%E5%92%8C-ResponseBody%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.3.3.</span> <span class="toc-text">1.2.4 @RequestBody和@ResponseBody的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%8E%E5%8F%B0%E4%BB%A3%E7%A0%81"><span class="toc-number">1.3.3.0.1.</span> <span class="toc-text">后台代码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81"><span class="toc-number">1.3.3.0.2.</span> <span class="toc-text">前端代码</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81RESTFul%E9%A3%8E%E6%A0%BC%E7%9A%84%E8%B7%AF%E5%BE%84"><span class="toc-number">2.</span> <span class="toc-text">二、RESTFul风格的路径</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-REST"><span class="toc-number">2.0.1.</span> <span class="toc-text">2.1 REST</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Rest%E8%A1%8C%E4%B8%BA%E7%BA%A6%E5%AE%9A%E6%96%B9%E5%BC%8F"><span class="toc-number">2.0.2.</span> <span class="toc-text">2.2  Rest行为约定方式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84"><span class="toc-number">3.</span> <span class="toc-text">三、静态资源映射</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%901%E3%80%91%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F1-%E4%BA%86%E8%A7%A3%E5%8D%B3%E5%8F%AF-%EF%BC%9A"><span class="toc-number">3.0.0.1.</span> <span class="toc-text">【1】解决方式1(了解即可)：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%902%E3%80%91%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F2%EF%BC%9A"><span class="toc-number">3.0.0.2.</span> <span class="toc-text">【2】解决方式2：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%903%E3%80%91%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F3%EF%BC%9A%EF%BC%88%E6%88%91%E4%BB%AC%E9%87%87%E7%94%A8%E7%9A%84%E5%B0%B1%E6%98%AF%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%89"><span class="toc-number">3.0.0.3.</span> <span class="toc-text">【3】解决方式3：（我们采用的就是这种方式）</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-number">4.</span> <span class="toc-text">四、异常处理机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-number">4.0.1.</span> <span class="toc-text">4.1 为什么使用异常处理机制?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.0.2.</span> <span class="toc-text">4.2 统一异常处理实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F1%EF%BC%9A%E5%9F%BA%E4%BA%8EHandlerExceptionResolver%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.0.2.1.</span> <span class="toc-text">方式1：基于HandlerExceptionResolver接口实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%B1%BB"><span class="toc-number">4.0.2.1.1.</span> <span class="toc-text">自定义异常处理类</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F2%EF%BC%9A%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-number">4.0.2.2.</span> <span class="toc-text">方式2：注解开发异常处理器（推荐）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E7%90%86%E6%83%B3%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%88%E9%87%87%E7%94%A8%E4%B8%8A%E8%BF%B0%E6%96%B9%E5%BC%8F2%EF%BC%89"><span class="toc-number">4.0.3.</span> <span class="toc-text">4.3  理想的异常处理解决方案（采用上述方式2）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%901%E3%80%91%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88"><span class="toc-number">4.0.3.1.</span> <span class="toc-text">【1】异常处理方案</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">5.</span> <span class="toc-text">五、文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%89%E8%A6%81%E7%B4%A0"><span class="toc-number">5.0.1.</span> <span class="toc-text">5.1 文件上传三要素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-SpringMVC%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">5.0.2.</span> <span class="toc-text">5.2 SpringMVC实现文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E5%8F%AF%E8%83%BD%E4%BC%9A%E9%97%AE%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="toc-number">5.0.2.1.</span> <span class="toc-text">面试可能会问到的问题：</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 高明辉</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'Aaee0Vekhg5KbLhMOJQrEU6A-gzGzoHsz',
      appKey: 'mmLHPEEtqvOSJhsqWra8Sq6K',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script type="text/javascript" src="/js/fairyDustCursor.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>