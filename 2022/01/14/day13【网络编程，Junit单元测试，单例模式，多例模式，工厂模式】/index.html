<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>day13【网络编程，Junit单元测试，单例模式，多例模式，工厂模式】 | Jason</title><meta name="keywords" content="网络编程,TCP通信,Junit单元测试,单例设计模式,多例设计模式,工厂设计模式"><meta name="author" content="高明辉"><meta name="copyright" content="高明辉"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="day13-网络编程学习内容 网络编程 TCP通信 Junit单元测试 单例设计模式 多例设计模式 工厂设计模式  首先先通过思维导图来快速了解一下今天学习的内容框架 ps：点击可以查看高清全图哦哈哈哈  1 网络编程1.1 软件架构 1 ： C&#x2F;S结构 ：  全称为Client&#x2F;Server结构，指客户端和服务器结构。常见程序有ＱＱ、迅雷等软件  2 ： B&#x2F;S结构 ：  Browser&#x2F;Ser">
<meta property="og:type" content="article">
<meta property="og:title" content="day13【网络编程，Junit单元测试，单例模式，多例模式，工厂模式】">
<meta property="og:url" content="http://example.com/2022/01/14/day13%E3%80%90%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%8CJunit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%EF%BC%8C%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%A4%9A%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E3%80%91/index.html">
<meta property="og:site_name" content="Jason">
<meta property="og:description" content="day13-网络编程学习内容 网络编程 TCP通信 Junit单元测试 单例设计模式 多例设计模式 工厂设计模式  首先先通过思维导图来快速了解一下今天学习的内容框架 ps：点击可以查看高清全图哦哈哈哈  1 网络编程1.1 软件架构 1 ： C&#x2F;S结构 ：  全称为Client&#x2F;Server结构，指客户端和服务器结构。常见程序有ＱＱ、迅雷等软件  2 ： B&#x2F;S结构 ：  Browser&#x2F;Ser">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/%E5%B0%81%E9%9D%A2.gif">
<meta property="article:published_time" content="2022-01-14T08:25:55.000Z">
<meta property="article:modified_time" content="2022-12-11T02:30:14.788Z">
<meta property="article:author" content="高明辉">
<meta property="article:tag" content="网络编程">
<meta property="article:tag" content="TCP通信">
<meta property="article:tag" content="Junit单元测试">
<meta property="article:tag" content="单例设计模式">
<meta property="article:tag" content="多例设计模式">
<meta property="article:tag" content="工厂设计模式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/%E5%B0%81%E9%9D%A2.gif"><link rel="shortcut icon" href="/img/%E7%BD%91%E7%AB%99%E5%9B%BE%E6%A0%87.png"><link rel="canonical" href="http://example.com/2022/01/14/day13%E3%80%90%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%8CJunit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%EF%BC%8C%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%A4%9A%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E3%80%91/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'day13【网络编程，Junit单元测试，单例模式，多例模式，工厂模式】',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-12-11 10:30:14'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Jason" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/%E5%A4%B4%E5%83%8F.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">193</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">231</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">36</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E5%85%B3%E4%BA%8E"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/butterfly%E4%B8%BB%E9%A2%98"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/%E5%B0%81%E9%9D%A2.gif')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jason</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E5%85%B3%E4%BA%8E"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/butterfly%E4%B8%BB%E9%A2%98"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">day13【网络编程，Junit单元测试，单例模式，多例模式，工厂模式】</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-14T08:25:55.000Z" title="发表于 2022-01-14 16:25:55">2022-01-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-12-11T02:30:14.788Z" title="更新于 2022-12-11 10:30:14">2022-12-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/">java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="day13【网络编程，Junit单元测试，单例模式，多例模式，工厂模式】"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="day13-网络编程"><a href="#day13-网络编程" class="headerlink" title="day13-网络编程"></a>day13-网络编程</h1><h2 id="学习内容"><a href="#学习内容" class="headerlink" title="学习内容"></a>学习内容</h2><ul>
<li><h5 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a>网络编程</h5></li>
<li><h5 id="TCP通信"><a href="#TCP通信" class="headerlink" title="TCP通信"></a>TCP通信</h5></li>
<li><h5 id="Junit单元测试"><a href="#Junit单元测试" class="headerlink" title="Junit单元测试"></a>Junit单元测试</h5></li>
<li><h5 id="单例设计模式"><a href="#单例设计模式" class="headerlink" title="单例设计模式"></a>单例设计模式</h5></li>
<li><h5 id="多例设计模式"><a href="#多例设计模式" class="headerlink" title="多例设计模式"></a>多例设计模式</h5></li>
<li><h5 id="工厂设计模式"><a href="#工厂设计模式" class="headerlink" title="工厂设计模式"></a>工厂设计模式</h5></li>
</ul>
<p>首先先通过思维导图来快速了解一下今天学习的内容框架</p>
<p>ps：点击可以查看高清全图哦哈哈哈</p>
<p><img src="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/day12%E3%80%90%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%8CJunit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%EF%BC%8C%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%A4%9A%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E3%80%91.png" alt="day12【网络编程，Junit单元测试，单例模式，多例模式，工厂模式】"></p>
<h2 id="1-网络编程"><a href="#1-网络编程" class="headerlink" title="1 网络编程"></a>1 网络编程</h2><h3 id="1-1-软件架构"><a href="#1-1-软件架构" class="headerlink" title="1.1 软件架构"></a>1.1 软件架构</h3><ul>
<li><p><strong>1 ： C/S结构</strong> ：</p>
</li>
<li><p>全称为Client/Server结构，指客户端和服务器结构。常见程序有<strong>ＱＱ、迅雷</strong>等软件</p>
</li>
<li><p><strong>2 ： B/S结构</strong> ：</p>
</li>
<li><p>Browser/Server结构，是指浏览器和服务器结构。常见浏览器有<strong>谷歌、火狐</strong>等</p>
<p>两种架构各有优势，但是都离不开网络的支持。<strong>网络编程 , 就是在一定的协议下，实现两台计算机的通信的程序</strong></p>
</li>
<li><p><img src="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6%5Cday13/image-20210418000257329.png" alt="image-20210418000257329"></p>
</li>
</ul>
<h3 id="1-2-什么是网络编程"><a href="#1-2-什么是网络编程" class="headerlink" title="1.2 什么是网络编程"></a>1.2 什么是网络编程</h3><ul>
<li>在网络通信协议下，不同计算机上运行的程序，可以进行数据传输</li>
</ul>
<h3 id="1-3-网络编程三要素"><a href="#1-3-网络编程三要素" class="headerlink" title="1.3 网络编程三要素"></a>1.3 网络编程三要素</h3><ul>
<li><strong>1  IP地址</strong> : 设备在网络中的地址，是唯一的标识。</li>
<li><strong>2  端口</strong> : 设备在网络中的地址，是唯一的标识。</li>
<li><strong>3</strong>  数据在网络中传输的<strong>协议规则</strong>，常见的协议有UDP协议和TCP协议。</li>
</ul>
<h3 id="1-4-IP地址"><a href="#1-4-IP地址" class="headerlink" title="1.4 IP地址"></a>1.4 IP地址</h3><ul>
<li><p>IP：全称”互联网协议地址”，也称IP地址。是分配给上网设备的数字标签。常见的IP分类为：ipv4和ipv6</p>
<p>简单来说 : 就是<strong>设备在网络中的唯一标识</strong> , 想要连接哪一台电脑 , 就找到此电脑在网络中的ip地址</p>
</li>
<li><p>IP地址常见分类 : <strong>ipv4和ipv6</strong></p>
</li>
<li><p>常用命令：</p>
<ul>
<li><strong>ipconfig</strong>：查看本机IP地址</li>
<li><strong>ping + IP</strong>：检查网络是否连通</li>
</ul>
</li>
<li><p>特殊IP地址：</p>
<ul>
<li><strong>127.0.0.1</strong>：是回送地址也称本地回环地址，可以代表本机的IP地址，一般用来测试使用</li>
</ul>
</li>
<li><p>为了方便我们对IP地址的获取和操作，Java提供了一个<strong>类InetAddress</strong> 供我们使用<br>InetAddress：此类表示Internet协议（IP）地址</p>
</li>
<li><p><strong>利用主机名或者外网地址得到 类 InetAddress的对象。</strong></p>
</li>
<li><table>
<thead>
<tr>
<th>static InetAddress getByName(String host)</th>
<th>在给定主机名/外网IP的情况下先得到InetAddress类对象，调用如下两个方法进而确定主机的 外网IP 地址/主机名</th>
</tr>
</thead>
<tbody><tr>
<td>String getHostName()</td>
<td>获取此 IP 地址的主机名</td>
</tr>
<tr>
<td>String getHostAddress()</td>
<td>返回 IP 地址字符串（以文本表现形式）。</td>
</tr>
</tbody></table>
</li>
</ul>
<p><strong>如何知道主机名</strong>：电脑，右击查看属性。</p>
<p><img src="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/%E6%9F%A5%E7%9C%8B%E7%94%B5%E8%84%91%E4%B8%BB%E6%9C%BA%E5%90%8D%E7%A7%B0.jpg" alt="查看电脑主机名称"></p>
<p><strong>如何知道本电脑的外网IP地址：ipconfig命令即可。</strong></p>
<p>代码实践：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.inetaddress_demo;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InetAddressDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//在给定主机名的情况下确定主机的 IP 地址</span></span><br><span class="line">        <span class="comment">// 参数也可以传入ip地址</span></span><br><span class="line">        InetAddress address = InetAddress.getByName(<span class="string">&quot;WIN-95NHH5SU5RD&quot;</span>);</span><br><span class="line">        InetAddress address1 = InetAddress.getByName(<span class="string">&quot;172.31.106.86&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2 String getHostName​()	获取此 IP 地址的主机名</span></span><br><span class="line">        System.out.println(address.getHostName());<span class="comment">//WIN-95NHH5SU5RD</span></span><br><span class="line">        System.out.println(address1.getHostName());<span class="comment">//WIN-95NHH5SU5RD</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3 String getHostAddress​()返回 IP 地址字符串</span></span><br><span class="line">        <span class="comment">//为什么是局域网内的IP??????</span></span><br><span class="line">     	System.out.println(address.getHostAddress());<span class="comment">//192.168.159.1</span></span><br><span class="line">        System.out.println(address1.getHostAddress());<span class="comment">//172.31.106.86</span></span><br><span class="line">		<span class="comment">// 1s内是否能联通！</span></span><br><span class="line">        System.out.println(address.isReachable(<span class="number">1000</span>));<span class="comment">//true</span></span><br><span class="line">        System.out.println(address1.isReachable(<span class="number">1000</span>));<span class="comment">//true.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-5-端口"><a href="#1-5-端口" class="headerlink" title="1.5 端口"></a>1.5 端口</h3><ul>
<li><p>端口：<strong>应用程序在设备中唯一的标识</strong>。</p>
</li>
<li><p>端口号：应用程序的唯一标识方式 , 用<strong>两个字节</strong>表示的整数，它的取值范围是<strong>0~65535</strong>。</p>
<pre><code>其中**0~1023之间的端口号**用于一些知名的网络服务或者应用。
我们自己**使用1024以上的端口号就可以**了。
</code></pre>
</li>
<li><p>注意：<strong>一个端口号只能被一个应用程序使用</strong>。</p>
</li>
</ul>
<h3 id="1-6-通信协议"><a href="#1-6-通信协议" class="headerlink" title="1.6 通信协议"></a>1.6 通信协议</h3><ul>
<li>协议：计算机网络中，连接和通信的规则被称为网络通信协议</li>
<li>UDP协议<ul>
<li>用户数据报协议(User Datagram Protocol)</li>
<li>UDP是面向<strong>无连接</strong>通信协议。</li>
<li><strong>速度快，有大小限制一次最多发送64K，数据不安全，易丢失数据</strong>。</li>
</ul>
</li>
<li>TCP协议<ul>
<li>传输控制协议 (Transmission Control Protocol)</li>
<li>TCP协议是面向<strong>连接</strong>的通信协议。</li>
<li><strong>速度慢，没有大小限制，数据安全</strong></li>
</ul>
</li>
</ul>
<h2 id="2-TCP通信"><a href="#2-TCP通信" class="headerlink" title="2 TCP通信"></a>2 TCP通信</h2><p>要<strong>先运行服务端代码</strong>，把服务器打开，再运行客户端。如果先运行客户端的话，会抛出异常。       </p>
<h3 id="2-1-TCP：客户端发送，接受-数据"><a href="#2-1-TCP：客户端发送，接受-数据" class="headerlink" title="2.1 TCP：客户端发送，接受 数据"></a>2.1 TCP：客户端发送，接受 数据</h3><p>客户端 :</p>
<p>发送、接受  数据的步骤<br>    <strong>1 创建客户端的Socket对象</strong> : <strong>Socket</strong>(String host, int port)<br>        <strong>host 表示服务器端的IP地址</strong>，也可以是服务器端的主机名，String类型<br>        <strong>port 表示服务器端的端口</strong></p>
<p>​    <strong>2 通获Socket对象取网络中的输出流，写数据</strong><br>​        OutputStream <strong>getOutputStream</strong>()，得到的流<strong>可以封装成高效缓冲字节流</strong>。        </p>
<p>​    <strong>3 通获Socket对象取网络中的输入流，读数据</strong>。</p>
<p>​        InputStream <strong>getInputStream</strong>();</p>
<p>​        得到的流看具体情况要不要封装成字符输入流，可封装成缓冲高效流。</p>
<p>​    <strong>4 释放资源</strong><br>​        void close()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.tcp_demo.demo1;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建客户端的Socket对象(Socket) 与指定服务端连接</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">10010</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 通获Socket对象取网络中的输出流，写数据</span></span><br><span class="line">        OutputStream os = socket.getOutputStream();</span><br><span class="line">        os.write(<span class="string">&quot;hello&quot;</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// while(true)&#123;&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        os.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-TCP接收，发送-数据"><a href="#2-2-TCP接收，发送-数据" class="headerlink" title="2.2 TCP接收，发送 数据"></a>2.2 TCP接收，发送 数据</h3><p> 服务端接收数据 :</p>
<p><strong>1 创建服务器端的Socket对象</strong> : ServerSocket类<br>    <strong>ServerSocket</strong>(int port)  : 构造方法需要绑定一个端口号 , port就是端口号</p>
<p><strong>2 监听客户端连接,并接受连接</strong>，返回一个Socket对象<br>    Socket <strong>accept</strong>() : 该方法会一直阻塞直到建立连接</p>
<p>3 通过Socket对象 获取网络中的输入字节流，用来读取客户端发送过来的数据<br>    InputStream <strong>getInputStream</strong>() （往往要封装成高效缓冲输入字<strong>节</strong>流）</p>
<p>4 通过Socket对象 获取网络中的输出流字节，用来向客户端发送确认信息。</p>
<p>OutputStream <strong>getOutputStream</strong>() （往往要封装成高效缓冲输出字<strong>符</strong>流）</p>
<p>5 释放资源 : <strong>服务端一般不会关闭</strong><br>    void close()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.tcp_demo.demo1;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">10010</span>);</span><br><span class="line"><span class="comment">//        2 监听客户端连接,并接受连接，返回一个Socket对象</span></span><br><span class="line"><span class="comment">//        Socket accept() : 该方法会一直阻塞直到建立连接</span></span><br><span class="line">        Socket socket = serverSocket.accept();</span><br><span class="line">        InputStream is = socket.getInputStream();</span><br><span class="line">        <span class="keyword">int</span> by;</span><br><span class="line">        System.out.println(<span class="string">&quot;read方法执行前&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> ((by = is.read()) != -<span class="number">1</span>) &#123;<span class="comment">//小tips：read方法也具有阻塞。</span></span><br><span class="line">            System.out.print((<span class="keyword">char</span>) by);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">&quot;read方法执行后&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">read方法执行前</span></span><br><span class="line"><span class="comment">hello</span></span><br><span class="line"><span class="comment">read方法执行后</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-TCP通信原理分析"><a href="#2-3-TCP通信原理分析" class="headerlink" title="2.3  TCP通信原理分析"></a>2.3  TCP通信原理分析</h3><p><img src="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/TCP%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86.png" alt="TCP通信原理"></p>
<h3 id="2-4-TCP三次握手"><a href="#2-4-TCP三次握手" class="headerlink" title="2.4 TCP三次握手"></a>2.4 TCP三次握手</h3><p><img src="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/04_TCP%E5%8D%8F%E8%AE%AE%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.png" alt="04_TCP协议三次握手"></p>
<h3 id="2-5-TCP练习1"><a href="#2-5-TCP练习1" class="headerlink" title="2.5 TCP练习1"></a>2.5 TCP练习1</h3><p>这里的代码比上个代码多了服务器给客户端发送的响应（客户端多了接受 输入字符流代码，服务端多了网络输出字符流）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.tcp_demo.test1;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建客户端的Socket对象(Socket) 与指定服务端连接</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">10010</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 通获Socket对象取网络中的输出流，写数据</span></span><br><span class="line">        <span class="comment">//这里还能再封装为高效的缓冲输出字节流</span></span><br><span class="line">        OutputStream os = socket.getOutputStream();</span><br><span class="line">        </span><br><span class="line">        os.write(<span class="string">&quot;hello&quot;</span>.getBytes());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 向服务端写入结束标记，##要不然服务器不知道客户端发送完了没有。</span></span><br><span class="line">        <span class="comment">//服务器是根据这个来判断回复接受完成的。</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line">        </span><br><span class="line">		<span class="comment">//网络输入字节流（即输入字节流） 转成 输入字符转换流 </span></span><br><span class="line">        <span class="comment">// 输入字符转换流（即输入字符流），再封装成 高效缓冲输入字符流。</span></span><br><span class="line">        <span class="comment">//总结就是：字节变字符，字符变高效字符。############</span></span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(</span><br><span class="line">            <span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">        String line = br.readLine();<span class="comment">//这里可以重复读哦。</span></span><br><span class="line">        System.out.println(line);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        br.close();</span><br><span class="line">        os.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.tcp_demo.test1;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">10010</span>);</span><br><span class="line">        Socket socket = serverSocket.accept();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//这里还能再封装为高效的缓冲输入字节流</span></span><br><span class="line">        InputStream is = socket.getInputStream();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> by;</span><br><span class="line">        <span class="keyword">while</span> ((by = is.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>) by);</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">//网络输出字节流 转 输出字符流 转 高效输出字符流</span></span><br><span class="line">        BufferedWriter bos = <span class="keyword">new</span> BufferedWriter(</span><br><span class="line">            <span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream()));</span><br><span class="line">        bos.write(<span class="string">&quot;你谁啊&quot;</span>);</span><br><span class="line">        bos.close();</span><br><span class="line">        is.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-6-TCP练习2"><a href="#2-6-TCP练习2" class="headerlink" title="2.6 TCP练习2"></a>2.6 TCP练习2</h3><p><strong>需求：</strong></p>
<p>客户端将客户端中的硬盘照片上传照片到服务器，服务器保存上传过来的照片到硬盘中，然后返回“上传成功”给客户端。</p>
<p><strong>流程图</strong>：</p>
<p><img src="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8A%E4%BC%A0%E7%85%A7%E7%89%87%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8.png" alt="客户端上传照片到服务器"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.tcp_demo.test2;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建客户端Socket对象</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">10086</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//字节输入流转换成高效的缓冲输入字节流。</span></span><br><span class="line">        BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;day13_demo\\liqin.jpg&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//网络字节输出流转换成高效的缓冲字节输出流哈。</span></span><br><span class="line">        BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(</span><br><span class="line">            socket.getOutputStream());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> by;</span><br><span class="line">        <span class="keyword">while</span> ((by = bis.read()) != -<span class="number">1</span>) &#123;<span class="comment">// 从本地中读一个字节</span></span><br><span class="line">            bos.write(by);<span class="comment">// 往服务器写一个字节</span></span><br><span class="line">            bos.flush(); <span class="comment">//这里要形成好习惯，一边输出（写）一边刷新。</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 写结束标记</span></span><br><span class="line">        socket.shutdownOutput();<span class="comment">//通知服务器客户端发送完了。</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 把网络中的字节输入流 , 封装成高效的字符输入流</span></span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(</span><br><span class="line">            <span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//读取多行时的代码。</span></span><br><span class="line">		<span class="comment">//String line;</span></span><br><span class="line">        <span class="comment">//读取到服务器发送的newline时才会等于null。</span></span><br><span class="line"><span class="comment">//        while ((line = br.readLine()) != null) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(line);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">//但由于服务器只是发送简单的响应信息，所以用不着用while哈。</span></span><br><span class="line">        String msg = br.readLine();<span class="comment">//读取服务器的响应信息。</span></span><br><span class="line">        System.out.println(msg);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        bis.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.tcp_demo.test2;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建服务端的连接对象</span></span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">10086</span>);</span><br><span class="line">        Socket socket = <span class="keyword">null</span>;</span><br><span class="line">        BufferedInputStream bis = <span class="keyword">null</span>;</span><br><span class="line">        BufferedWriter socketBw = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="comment">// 获取Socket对象</span></span><br><span class="line">            socket = serverSocket.accept();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取网络中的字节输入流  在封装成高效的字节输入流对象</span></span><br><span class="line">            bis = <span class="keyword">new</span> BufferedInputStream(socket.getInputStream());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 创建本地的字节输出流 , 封装成高效的字节输出流</span></span><br><span class="line">            BufferedOutputStream bw = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">&quot;day13_demo\\liqian_copy.jpg&quot;</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//从网络输入字节流中读，写到本地的IO输出流。</span></span><br><span class="line">            <span class="keyword">int</span> by;</span><br><span class="line">            <span class="keyword">while</span> ((by = bis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">                bw.write(by);</span><br><span class="line">                bw.flush();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//关闭本地流###本地流早早就关了！！！</span></span><br><span class="line">            bw.close();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取网络中的字节输出流 , 封装成高效的字符输出流</span></span><br><span class="line">            socketBw = <span class="keyword">new</span> BufferedWriter(</span><br><span class="line">                <span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream()));</span><br><span class="line">            socketBw.write(<span class="string">&quot;谢谢你&quot;</span>);</span><br><span class="line">            <span class="comment">//必须有换行 , 因为有了newline，客户端的readLine才会为null。</span></span><br><span class="line">            socketBw.newLine();</span><br><span class="line">            socketBw.flush();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 释放资源，可以省略</span></span><br><span class="line"><span class="comment">//        socketBw.close();</span></span><br><span class="line"><span class="comment">//        bis.close();</span></span><br><span class="line"><span class="comment">//        socket.close();</span></span><br><span class="line"><span class="comment">//        serverSocket.close();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>代码缺点：</strong></p>
<p>因为在while代码中接受客户端的连接，可以处理多个客户端；但是同时只能处理一个客户端的连接以及处理发送过来的数据。而且，每次接受新的客户端发送过来的照片，都会覆盖上一个客户端发送过来的照片（因为我们<strong>保存的图片名称都是一样的</strong>）</p>
<p><strong>代码改进1：</strong></p>
<p>保存每一个客户端发送过来的照片，</p>
<p><strong>不用覆盖上一个客户端发送过来的照片。</strong></p>
<p>只更改服务器代码就好啦：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用UUID. randomUUID()方法生成随机的文件名；</span><br><span class="line">每次接受到的照片都可以保存到硬盘中！！</span><br></pre></td></tr></table></figure>

<p>代码省略哈，看下面最终代码就好啦。</p>
<h3 id="2-7-TCP练习3"><a href="#2-7-TCP练习3" class="headerlink" title="2.7 TCP练习3"></a>2.7 TCP练习3</h3><p><strong>代码改进2：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 代码改进<span class="number">1</span>中虽然可以处理多个客户端请求，</span><br><span class="line">但是无法同时跟多个客户端进行通信;于是加入多线程；</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> 使用多线程虽然可以让服务器同时处理多个客户端请求。</span><br><span class="line">但是资源消耗太大；于是加入线程池.</span><br></pre></td></tr></table></figure>

<p>也是<strong>只更改服务器代码就可以啦</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.tcp_demo.test3;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建客户端Socket对象</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">10086</span>);</span><br><span class="line">		<span class="comment">//创建 本地 高效字节输入流</span></span><br><span class="line">        BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(</span><br><span class="line">            <span class="keyword">new</span> FileInputStream(<span class="string">&quot;day13_demo\\liqin.jpg&quot;</span>));</span><br><span class="line">		<span class="comment">//网络字节输出-&gt;高效字节输出</span></span><br><span class="line">        BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(</span><br><span class="line">            socket.getOutputStream());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4 高效 数组方式 传输。</span></span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">byte</span>[]bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span>((len=fis.read(bytes))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            bos.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">            bos.flush();<span class="comment">//可别忘咯。。。。。。。</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 写结束标记，可别忘咯。。。。否则服务器会reset。</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 把网络中的字节输入流 , 封装成高效的字符输入流</span></span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(</span><br><span class="line">            <span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">        <span class="comment">//读取多行时的代码。</span></span><br><span class="line"><span class="comment">//        String line;</span></span><br><span class="line"><span class="comment">//        while ((line = br.readLine()) != null) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(line);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        String msg = br.readLine();<span class="comment">//读取服务器给的反应！</span></span><br><span class="line">        System.out.println(msg);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        bis.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.tcp_demo.test3;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建服务端的连接对象</span></span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">10086</span>);</span><br><span class="line">		<span class="comment">//创建线程池并指定同时运行的线程个数。（超出10个，其他排队等候）</span></span><br><span class="line">        ExecutorService executorService = </span><br><span class="line">            Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="comment">// 获取Socket对象</span></span><br><span class="line">            Socket socket = serverSocket.accept();</span><br><span class="line">            <span class="comment">//向线程池提交任务。</span></span><br><span class="line">            executorService.submit(<span class="keyword">new</span> ServerThread(socket));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line"><span class="comment">//        socketBw.close();</span></span><br><span class="line"><span class="comment">//        bis.close();</span></span><br><span class="line"><span class="comment">//        socket.close();</span></span><br><span class="line"><span class="comment">//        serverSocket.close();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>多线程任务类：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.tcp_demo.test3;</span><br><span class="line"><span class="keyword">import</span> javax.management.relation.RoleUnresolved;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    Socket socket = <span class="keyword">null</span>;</span><br><span class="line">    BufferedOutputStream bw = <span class="keyword">null</span>;<span class="comment">//本地流，保存照片。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ServerThread</span><span class="params">(Socket socket)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1 高效网络输入字节流</span></span><br><span class="line">            BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(</span><br><span class="line">                socket.getInputStream());</span><br><span class="line">            <span class="comment">// 2 高效本地输出字节流</span></span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream</span><br><span class="line">                (<span class="string">&quot;day13_demo\\图片\\&quot;</span>+UUID.randomUUID()+<span class="string">&quot;.jpg&quot;</span>);</span><br><span class="line">            bos = <span class="keyword">new</span> BufferedOutputStream(fos);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//3 转存：</span></span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            <span class="keyword">byte</span>[]bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">while</span>((len=bis.read(bytes))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                fos.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 4 高效网络输出字符流</span></span><br><span class="line">            BufferedWriter socketBw = <span class="keyword">new</span> BufferedWriter(</span><br><span class="line">                <span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream()));</span><br><span class="line">            bw.write(<span class="string">&quot;美女照片收到，谢谢您！！！&quot;</span>);</span><br><span class="line">            bw.newLine();<span class="comment">//###可别忘咯。必须有换行 , 读到换行结束</span></span><br><span class="line">            bw.flush(); <span class="comment">//##########可别忘咯。</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//关闭本地流############Socket以及网络入出流自动关闭。</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                bw.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>先运行服务器，再运行客户端，客户端代码执行完之后可以看到图片传到服务器了，同时客户端收到服务器的响应。可以多次运行客户端代码，可以看到服务器可以保存多张图片。</p>
<h2 id="3-Junit单元测试"><a href="#3-Junit单元测试" class="headerlink" title="3 Junit单元测试"></a>3 Junit单元测试</h2><p><strong>好处</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 不用运行整个工程代码来测试，</span><br><span class="line">    而是直接可以运行测试方法，</span><br><span class="line">    跟整个线程运行独立开来</span><br><span class="line"><span class="number">2</span> 可以设定预期值跟目标方法运行结果的对比，达到方法功能的测试。</span><br></pre></td></tr></table></figure>

<p>在介绍3.1之前先总结：</p>
<p>我们用测试单元的目的是测试我们写好的类里面的方法有没有达到预期效果。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">操作：</span><br><span class="line"><span class="number">1</span>：写好我们的类（成员，方法...),</span><br><span class="line"><span class="number">2</span>：然后导入单元测试框架（Junit4）</span><br><span class="line"><span class="number">3</span>：alt+insert 自动生成测试类xxxTest，简单修改测试类里面的Test注解的方法</span><br><span class="line"><span class="number">4</span>：右击运行测试类里面的测试方法就可以 来验证我们写好的类方法是否正确。</span><br></pre></td></tr></table></figure>

<h3 id="3-1-Junit4单元测试概述"><a href="#3-1-Junit4单元测试概述" class="headerlink" title="3.1  Junit4单元测试概述"></a>3.1  Junit4单元测试概述</h3><ul>
<li><p>单元测试：<strong>编写测试代码</strong>，可以准确、快速地保证程序的<strong>正确性</strong>。</p>
</li>
<li><p>Junit：Java单元测试的<strong>框架</strong>。框架（测试代码）别人已经写好了，我们直接拿来用（测试自己的代码）就好啦。</p>
</li>
<li><p>JUnit4可以通过注解的方式来标记方法 , 让方法存某种意义 ，常见的注解有：</p>
<ul>
<li><p>1 <strong>@BeforeClass</strong> 全局只会执行一次，而且是第一个运行</p>
<p>​    （标记的方法需要是一个<strong>静态无参无返回值</strong>方法）</p>
</li>
<li><p>2 <strong>@Before</strong> 在测试方法运行之前运行（标记<strong>非静态无参无返回值</strong>方法）</p>
</li>
<li><p>3 **@Test 测试方法（此方法必须是非静态无参无返回值方法）, 主要用于测试的方法 **</p>
</li>
<li><p>4 <strong>@After</strong> 在测试方法运行之后运行（<strong>非静态无参无返回值</strong>方法）</p>
</li>
<li><p>5 <strong>@AfterClass</strong> 全局只会执行一次，而且是最后一个运行（标记的方法需要是一个<strong>静态无参无返回值</strong>方法）</p>
</li>
<li><p>6 <strong>@Ignore</strong> 忽略此方法 。</p>
</li>
</ul>
</li>
</ul>
<h3 id="3-2-Junit的基本使用"><a href="#3-2-Junit的基本使用" class="headerlink" title="3.2 Junit的基本使用"></a>3.2 Junit的基本使用</h3><ul>
<li>已知存在需要测试的类Calculator ，这是一个能够简单实现加减乘除、平方、开方的计算器类，然后对这些功能进行单元测试。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态变量，用于存储运行结果</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> result; <span class="comment">// 0</span></span><br><span class="line">    <span class="comment">// 1 加法运算</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        result = result + n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2 减法运算</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">substract</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Bug: 正确的应该是 result = result - n</span></span><br><span class="line">        result = result - <span class="number">1</span>;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3 乘法运算</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">multiply</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 此方法尚未写好</span></span><br><span class="line">    &#125;         </span><br><span class="line">    <span class="comment">//4 除法运算</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">divide</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        result = result / n;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 5 平方运算</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">square</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        result = n * n;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 6 平方根运算</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">squareRoot</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Bug : 死循环</span></span><br><span class="line">        <span class="keyword">for</span> (; ;) ;            </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将结果清零</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;     </span><br><span class="line">        result = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 返回运算结果</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getResult</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><h5 id="引入Junit4的jar包到模块中"><a href="#引入Junit4的jar包到模块中" class="headerlink" title="引入Junit4的jar包到模块中"></a>引入Junit4的jar包到模块中</h5><ul>
<li><p>第一步 :  在模块中新建文件夹lib，拷贝今天资料中junit4的jar包到模块中</p>
</li>
<li><p><img src="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/03_%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE.png" alt="03_通讯协议"></p>
</li>
<li><p>第二步 : 选中jar文件 , 右键选择 Add as Library</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><h5 id="生成Junit测试框架"><a href="#生成Junit测试框架" class="headerlink" title="生成Junit测试框架"></a>生成Junit测试框架</h5><ul>
<li><p>使用IDEA能够直接给需要测试的类生成测试框架，如下：</p>
</li>
<li><p>选中本类任何位置右键选择  Generate（Alt+Insert）/   go to 选项  ,  选择Test…</p>
<p><img src="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/image-20210304072444630.png" alt="image-20210304072444630"></p>
</li>
<li><p>选择需要进行测试的方法</p>
</li>
<li><p><img src="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/image-20210304074059399.png" alt="image-20210304074059399"></p>
</li>
<li><p>在上一步OK后系统会自动生成一个新类CalculatorTest，里面包含一些空的测试用例。</p>
<p>你只需要将这些测试用例稍作修改即可使用，完整的CalculatorTest代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.junit_demo;</span><br><span class="line"><span class="keyword">import</span> org.junit.Assert;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Ignore;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CalculatorTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> Calculator calculator = <span class="keyword">new</span> Calculator();</span><br><span class="line">    <span class="comment">// 无论运行哪个Test方法，都先运行这个方法，而且只运行一次。</span></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Before&quot;</span>);</span><br><span class="line">        calculator.clear();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test&quot;</span>);</span><br><span class="line">        calculator.add(<span class="number">10</span>);</span><br><span class="line">        calculator.add(<span class="number">20</span>);</span><br><span class="line">        calculator.add(<span class="number">30</span>);</span><br><span class="line">        <span class="keyword">int</span> result = calculator.getResult();</span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            //如果实际值和期望值相同，说明结果正确就测试通过,</span></span><br><span class="line"><span class="comment">            //如果不相同，说明结果是错误的,就会报错</span></span><br><span class="line"><span class="comment">            Assert.assertEquals( 期望值 , 实际值);</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Assert.assertEquals(<span class="number">60</span>, result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">substract</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        calculator.add(<span class="number">200</span>);</span><br><span class="line">        calculator.substract(<span class="number">50</span>);</span><br><span class="line">        calculator.substract(<span class="number">80</span>);</span><br><span class="line">        <span class="keyword">int</span> result = calculator.getResult();</span><br><span class="line">        Assert.assertEquals(<span class="number">70</span>, result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//功能还没有开发，那就先跳过该方法不测试呗。</span></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">multiply</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">divide</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        calculator.add(<span class="number">10</span>);</span><br><span class="line">        calculator.divide(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> result = calculator.getResult();</span><br><span class="line">        Assert.assertEquals(<span class="number">10</span>, result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">square</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        calculator.square(<span class="number">8</span>);</span><br><span class="line">        <span class="keyword">int</span> result = calculator.getResult();</span><br><span class="line">        Assert.assertEquals(<span class="number">64</span>,result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//限定运行时间</span></span><br><span class="line">    <span class="meta">@Test(timeout = 3000)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">squareRoot</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        calculator.squareRoot(<span class="number">4</span>);</span><br><span class="line">        assertEquals(<span class="number">2</span> , calculator.getResult());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<ul>
<li><h5 id="限时测试"><a href="#限时测试" class="headerlink" title="限时测试"></a>限时测试</h5><p>对于那些逻辑很复杂，循环嵌套比较深的程序，很有可能出现死循环，因此一定要采取一些预防措施。限时测试是一个很好的解决方案。我们给这些测试函数设定一个执行时间，超过了这个时间，他们就会被系统强行终止，并且系统还会向你汇报该函数结束的原因是因为超时，这样你就可以发现这些Bug了。要实现这一功能，只需要给@Test标注加一个参数即可，代码如下：</p>
<p><strong>被测方法：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">squareRoot</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Bug : 死循环</span></span><br><span class="line">        <span class="keyword">for</span> (; ; ) ;            </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="测试方法："><a href="#测试方法：" class="headerlink" title="测试方法："></a>测试方法：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test(timeout = 1000)</span></span><br><span class="line">    <span class="comment">// Timeout参数表明了你要设定的时间，单位为毫秒，因此1000就代表1秒。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">squareRoot</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        calculator.squareRoot(<span class="number">4</span>);</span><br><span class="line">        assertEquals(<span class="number">2</span> , calculator.getResult());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-3-断言"><a href="#3-3-断言" class="headerlink" title="3.3 断言"></a>3.3 断言</h3><ul>
<li><h5 id="概述"><a href="#概述" class="headerlink" title="概述 :"></a>概述 :</h5></li>
</ul>
<p>​        预先判断某个条件一定成立，如果条件不成立，则直接报错。 </p>
<ul>
<li><h5 id="使用"><a href="#使用" class="headerlink" title="使用 :"></a>使用 :</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果实际值和期望值相同，说明结果正确就测试通过,</span></span><br><span class="line"><span class="comment">//如果不相同，说明结果是错误的,就会报错</span></span><br><span class="line">Assert.assertEquals( 期望值, 实际值);</span><br><span class="line">Assert.assertEquals(<span class="string">&quot;异常原因&quot;</span>， 期望值, 实际值);</span><br><span class="line"><span class="comment">//例如：</span></span><br><span class="line"><span class="keyword">int</span> result = add(<span class="number">100</span>,<span class="number">200</span>);</span><br><span class="line">Assert.assertEquals(<span class="number">300</span>, result);  </span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="4-单例设计模式"><a href="#4-单例设计模式" class="headerlink" title="4 单例设计模式"></a>4 单例设计模式</h2><ul>
<li>正常情况下一个类可以创建多个对象 </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 正常情况下一个类可以创建多个对象</span></span><br><span class="line">	Person p1 = <span class="keyword">new</span> Person();</span><br><span class="line">	Person p2 = <span class="keyword">new</span> Person();</span><br><span class="line">	Person p3 = <span class="keyword">new</span> Person();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果说有时一个对象就能搞定的事情 , 非要创建多个对象 , <strong>浪费内存</strong>!!!</li>
</ul>
<h4 id="4-1-单例设计模式的作用"><a href="#4-1-单例设计模式的作用" class="headerlink" title="4.1 单例设计模式的作用"></a>4.1 单例设计模式的作用</h4><ul>
<li><p><strong>单例模式：</strong>是一种常用的软件设计模式。通过单例模式可以保证项目中，</p>
<p>应用该模式的<strong>这个类只有一个实例</strong>，即<strong>一个类只有一个对象实例</strong>。</p>
</li>
<li><p><strong>好处</strong> ：可以<strong>节省内存，共享数据</strong></p>
</li>
</ul>
<h4 id="4-2-单例设计模式实现步骤"><a href="#4-2-单例设计模式实现步骤" class="headerlink" title="4.2 单例设计模式实现步骤"></a>4.2 单例设计模式实现步骤</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 将构造方法私有化，使其不能在类的外部通过<span class="keyword">new</span>关键字实例化该类对象。</span><br><span class="line"><span class="number">2.</span> 在该类内部产生一个唯一的实例化对象，并且将其封装为</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> 类型的成员变量。</span><br><span class="line"><span class="number">3.</span> 定义一个静态方法返回这个唯一对象。</span><br></pre></td></tr></table></figure>

<h4 id="4-3-单例设计模式的类型"><a href="#4-3-单例设计模式的类型" class="headerlink" title="4.3 单例设计模式的类型"></a>4.3 单例设计模式的类型</h4><p>根据实例化对象的时机单例设计模式又分为以下两种:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 饿汉单例设计模式</span><br><span class="line"><span class="number">2.</span> 懒汉单例设计模式</span><br></pre></td></tr></table></figure>

<h4 id="4-4-饿汉单例设计模式"><a href="#4-4-饿汉单例设计模式" class="headerlink" title="4.4 饿汉单例设计模式"></a>4.4 饿汉单例设计模式</h4><ul>
<li><p>饿汉单例设计模式就是<strong>使用类的时候已经将对象创建完毕</strong>。不管以后会不会使用到该实例化对象，先创建了再说。很着急的样子，故被称为“饿汉模式”。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.将构造方法私有化</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.在该类内部产生一个唯一的实例化对象，</span></span><br><span class="line">    <span class="comment">//并且将其封装为private static 类型的成员变量。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3.定义一个静态方法返回这个唯一对象。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="4-5-懒汉单例设计模式"><a href="#4-5-懒汉单例设计模式" class="headerlink" title="4.5 懒汉单例设计模式"></a>4.5 懒汉单例设计模式</h4><ul>
<li>懒汉单例设计模式就是<strong>调用getInstance()方法时对象才被创建</strong>；也就是说先不急着实例化出对象，等要用的时候才实例化出对象。不着急，故称为“懒汉模式”。</li>
</ul>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"><span class="comment">//1 将构造函数私有化。</span></span><br><span class="line">     <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">     </span><br><span class="line">     <span class="comment">// 2.在该类内部产生一个唯一的实例化对象</span></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;<span class="comment">//此时为null；</span></span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">     <span class="comment">// 3.定义一个静态方法返回这个唯一对象。要用的时候才例化出对象</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">             instance = <span class="keyword">new</span> Singleton();<span class="comment">// 0x001</span></span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> instance;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><h5 id="注意-："><a href="#注意-：" class="headerlink" title="注意 ："></a>注意 ：</h5><p>懒汉单例设计模式在多线程环境下<strong>可能会实例化出多个对象</strong>，不能保证单例的状态，所以加上关键字：<strong>synchronized</strong>，保证其同步安全。</p>
<p>需求1：使用饿汉模式创建皇帝类。</p>
<p>需求2：使用懒汉模式创建皇帝类。</p>
<p>代码略~~</p>
<p>测试代码如下：</p>
<p>测试效果：每次打印都是<strong>相同的地址值</strong>，也只是说，只能创建一个实例对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.singledesign;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KingTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1 测试饿汉式单例模式</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            King k = King.getInstance();</span><br><span class="line">            System.out.println(k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//2 测试懒汉式单例模式</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            King2 k = King2.getInstance();</span><br><span class="line">            System.out.println(k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-多例设计模式"><a href="#5-多例设计模式" class="headerlink" title="5 多例设计模式"></a>5 多例设计模式</h2><h4 id="5-1-多例设计模式的作用"><a href="#5-1-多例设计模式的作用" class="headerlink" title="5.1 多例设计模式的作用"></a>5.1 多例设计模式的作用</h4><ul>
<li><p>通过多例模式可以保证项目中<strong>一个类有固定个数的实例</strong>, 在实现需求的基础上, 能够<strong>提高实例的复用性</strong></p>
</li>
<li><p>多例类要<strong>自我创建</strong>并<strong>管理自己的实例</strong>，还要<strong>向外界提供获取本类实例的方法</strong>。</p>
</li>
<li><p>使用场景：<strong>线程池</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">线程池 = Executors.newFixedThreadPool(<span class="number">3</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="5-2-实现步骤"><a href="#5-2-实现步骤" class="headerlink" title="5.2.实现步骤"></a>5.2.实现步骤</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">	<span class="number">1.</span>创建一个类,  构造方法私有化，使不能在类外部通过<span class="keyword">new</span>实例化该类对象。</span><br><span class="line">​	<span class="number">2.</span>在类中定义该类被创建对象的 总数量 以及存放类实例的 list集合</span><br><span class="line">​	<span class="number">4.</span>在类中提供**静态代码块**,在静态代码块中创建类的实例</span><br><span class="line">​	<span class="number">5.</span>提供获取类实例的静态方法.</span><br></pre></td></tr></table></figure>

<h4 id="5-3-实现代码"><a href="#5-3-实现代码" class="headerlink" title="5.3.实现代码"></a>5.3.实现代码</h4><ul>
<li><p>某一个学科有固定3位老师，年级中上该课程的老师就是这三位老师其中一位 </p>
<p>要求使用多例模式 ,每次获取的都是这三位老师其中一位</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.moreinstance_demo;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1 将构造方法私有化</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Teacher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2 在类中定义该类被创建对象的总数量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> maxCount = <span class="number">3</span>;</span><br><span class="line">    <span class="comment">//2 在类中定义存放类实例的list集合</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;Teacher&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="comment">//3 在类中提供静态代码块,在静态代码块中创建类的实例.</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            list.add(<span class="keyword">new</span> Teacher());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4 提供获取类实例的静态方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Teacher <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Random r = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="keyword">return</span> list.get(r.nextInt(list.size()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//上面代码块很清晰明了了。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.moreinstance_demo;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeacherTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            Teacher instance = Teacher.getInstance();</span><br><span class="line">            <span class="comment">//每次打印都是只有三个地址。验证方法的正确性。</span></span><br><span class="line">            System.out.println(instance);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-工厂设计模式"><a href="#6-工厂设计模式" class="headerlink" title="6 工厂设计模式"></a>6 工厂设计模式</h2><h4 id="6-1-概述"><a href="#6-1-概述" class="headerlink" title="6.1 概述"></a>6.1 概述</h4><ul>
<li>工厂模式（Factory Pattern）是 Java 中最常用的设计模式之一。这种类型的设计模式属于<strong>创建型模式</strong>，它提供了<strong>一种创建对象的最佳方式</strong>。之前我们创建类对象时, 都是使用 new 对象的形式创建, 除new 对象方式以外, <strong>工厂模式也可以创建对象.</strong></li>
</ul>
<h4 id="6-2作用"><a href="#6-2作用" class="headerlink" title="6.2作用"></a>6.2作用</h4><ul>
<li>工厂模式的存在可以<strong>改变创建对象的方式</strong>,降低<strong>类与类之间的耦合问题</strong>.</li>
<li><strong>如何体现：</strong><ul>
<li>首先工厂模式是<strong>使用包装类的静态方法获取类对象</strong>（虽然本质也是new 方式创建类对象，但是<strong>new的过程封装到了包装类</strong>了）；</li>
<li>如果目标对象类需要更改（比如构造器变成有参构造了），那么所有直接new 创建对象的代码都需要更改）；使用工厂模式来new的话，<strong>只需要更</strong>改工厂模式的静态获取类对象方法中的new，只加入参数就可以了。多简洁呀</li>
</ul>
</li>
</ul>
<h4 id="6-3案例实践"><a href="#6-3案例实践" class="headerlink" title="6.3案例实践"></a>6.3案例实践</h4><ul>
<li><p>需求：定义汽车工厂类，生产各种品牌的车</p>
</li>
<li><p>实现步骤</p>
<ul>
<li>编写一个<strong>Car</strong>接口, 提供run方法</li>
<li>编写一个<strong>Falali</strong>类实现Car接口,重写run方法</li>
<li>编写一个<strong>Benchi</strong>类实现Car接口</li>
<li>提供一个<strong>CarFactory</strong>(汽车工厂),用于生产汽车对象</li>
<li>定义<strong>CarFactoryTest</strong>测试汽车工厂（alt+enter 自动生成，然后修改）</li>
</ul>
<p>下面还使用到了<strong>枚举</strong>来优化代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用类静态方法获取对象在传参时，使用枚举类的作用：</span><br><span class="line"><span class="number">1</span> 提示参数错误功能</span><br><span class="line"><span class="number">2</span> 还有提示可供挑选的参数</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>实现代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.factorydesign_demo;</span><br><span class="line"><span class="comment">//汽车生产测试类。如何体现工厂模式方式创建对象 达到降低类之间的耦合性</span></span><br><span class="line"><span class="comment">//使用包装类的静态方法获取类对象</span></span><br><span class="line"><span class="comment">//（虽然本质也是new 方式创建类对象，但是new的过程封装到CarFactory类了）</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//方式1 直接使用new方式。</span></span><br><span class="line">        Falali falali = <span class="keyword">new</span> Falali();</span><br><span class="line">        falali.run();<span class="comment">//法拉利破百只需要 3秒!</span></span><br><span class="line">        <span class="comment">//方式2 工厂模式（多态接受对象car）**String作为参数</span></span><br><span class="line">        Car car = CarFactory.getInstance(<span class="string">&quot;奔驰&quot;</span>);</span><br><span class="line">        Car car1 = CarFactory.getInstance(<span class="string">&quot;法拉利&quot;</span>);</span><br><span class="line">        Car car2 = CarFactory.getInstance(<span class="string">&quot;大众&quot;</span>);<span class="comment">//品牌 大众 不在本厂生产范围内</span></span><br><span class="line">        <span class="keyword">if</span>(car!=<span class="keyword">null</span>)car.run();<span class="comment">//奔驰破百只需要 5秒!</span></span><br><span class="line">        <span class="keyword">if</span>(car1!=<span class="keyword">null</span>)car1.run();<span class="comment">//法拉利破百只需要 3秒!</span></span><br><span class="line">        <span class="keyword">if</span>(car2!=<span class="keyword">null</span>)car2.run();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//方式3 工厂模式（多态接受对象car）**枚举作为参数</span></span><br><span class="line">        Car car3 = CarFactory.getInstance1(CarType.BENCHI);</span><br><span class="line">        Car car4 = CarFactory.getInstance1(CarType.FALALI);</span><br><span class="line">        car3.run();<span class="comment">//奔驰破百只需要 5秒!</span></span><br><span class="line">        car4.run();<span class="comment">//法拉利破百只需要 3秒!</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个Car接口, 提供run方法</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个Falali类实现Car接口,重写run方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Falali</span> <span class="keyword">implements</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;法拉利破百只需要 3秒!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个Benchi类实现Car接口</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Benchi</span> <span class="keyword">implements</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;奔驰破百只需要 5秒!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 枚举项都是车的品牌</span></span><br><span class="line"><span class="comment">//上面用枚举类型，比Sring类型要好呀！！！</span></span><br><span class="line"><span class="comment">//当你要生产车时，可以很明确看到有什么类型时该工厂能生产的。</span></span><br><span class="line"><span class="comment">//当你输入车类型参数错误时还可以提醒参数有误。</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CarType</span> </span>&#123;</span><br><span class="line">    FALALI, BENCHI</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 提供一个CarFactory(汽车工厂),用于生产汽车对象</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1 String类型作为参数。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Car <span class="title">getInstance</span><span class="params">(String carName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (carName.equals(<span class="string">&quot;奔驰&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Benchi();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (carName.equals(<span class="string">&quot;法拉利&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Falali();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;品牌 &quot;</span>+carName+<span class="string">&quot; 不在本厂生产范围内&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2 枚举类作为参数</span></span><br><span class="line">    <span class="comment">//这里返回的是Car类哈。调用处也要Car变量多态接受</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Car <span class="title">getInstance1</span><span class="params">(CarType carType)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (carType) &#123;</span><br><span class="line">            <span class="keyword">case</span> FALALI:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Falali();</span><br><span class="line">            <span class="keyword">case</span> BENCHI:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Benchi();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line"><span class="comment">//                System.out.println(&quot;该品牌不在本厂生产范围内&quot;);</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//上面用枚举类型，比Sring类型要好呀！！！</span></span><br><span class="line"><span class="comment">//当你要生产车时，可以很明确看到有什么类型时该工厂能生产的。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">高明辉</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/01/14/day13%E3%80%90%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%8CJunit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%EF%BC%8C%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%A4%9A%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E3%80%91/">http://example.com/2022/01/14/day13%E3%80%90%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%8CJunit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%EF%BC%8C%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%A4%9A%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E3%80%91/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Jason</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">网络编程</a><a class="post-meta__tags" href="/tags/TCP%E9%80%9A%E4%BF%A1/">TCP通信</a><a class="post-meta__tags" href="/tags/Junit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">Junit单元测试</a><a class="post-meta__tags" href="/tags/%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">单例设计模式</a><a class="post-meta__tags" href="/tags/%E5%A4%9A%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">多例设计模式</a><a class="post-meta__tags" href="/tags/%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">工厂设计模式</a></div><div class="post_share"><div class="social-share" data-image="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day13/%E5%B0%81%E9%9D%A2.gif" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="添加微信"/></a><div class="post-qr-code-desc">添加微信</div></li><li class="reward-item"><a href="/img/pay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/pay.jpg" alt="付款码"/></a><div class="post-qr-code-desc">付款码</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/01/15/day14%E3%80%90%E5%8F%8D%E5%B0%84%EF%BC%8C%E6%B3%A8%E8%A7%A3%EF%BC%8C%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E3%80%91/"><img class="prev-cover" src="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day14/%E5%B0%81%E9%9D%A2.gif" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">day14【反射，注解，动态代理模式】</div></div></a></div><div class="next-post pull-right"><a href="/2022/01/13/day12%E3%80%90%E7%BC%93%E5%86%B2%E6%B5%81%E3%80%81%E8%BD%AC%E6%8D%A2%E6%B5%81%E3%80%81%E5%BA%8F%E5%88%97%E5%8C%96%E6%B5%81%E3%80%81%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F%E3%80%81commons-io%E5%B7%A5%E5%85%B7%E5%8C%85%E3%80%91/"><img class="next-cover" src="/img/java/01%E9%98%B6%E6%AE%B5SE%E8%BF%9B%E9%98%B6/day12/4.gif" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">day12【缓冲流、转换流、序列化流、装饰者模式、commons-io工具包】</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#day13-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text">day13-网络编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E5%86%85%E5%AE%B9"><span class="toc-number">1.1.</span> <span class="toc-text">学习内容</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="toc-number">1.1.0.0.1.</span> <span class="toc-text">网络编程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#TCP%E9%80%9A%E4%BF%A1"><span class="toc-number">1.1.0.0.2.</span> <span class="toc-text">TCP通信</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Junit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="toc-number">1.1.0.0.3.</span> <span class="toc-text">Junit单元测试</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.1.0.0.4.</span> <span class="toc-text">单例设计模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.1.0.0.5.</span> <span class="toc-text">多例设计模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.1.0.0.6.</span> <span class="toc-text">工厂设计模式</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="toc-number">1.2.</span> <span class="toc-text">1 网络编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.1 软件架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="toc-number">1.2.2.</span> <span class="toc-text">1.2 什么是网络编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%89%E8%A6%81%E7%B4%A0"><span class="toc-number">1.2.3.</span> <span class="toc-text">1.3 网络编程三要素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-IP%E5%9C%B0%E5%9D%80"><span class="toc-number">1.2.4.</span> <span class="toc-text">1.4 IP地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-%E7%AB%AF%E5%8F%A3"><span class="toc-number">1.2.5.</span> <span class="toc-text">1.5 端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.2.6.</span> <span class="toc-text">1.6 通信协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-TCP%E9%80%9A%E4%BF%A1"><span class="toc-number">1.3.</span> <span class="toc-text">2 TCP通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-TCP%EF%BC%9A%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%91%E9%80%81%EF%BC%8C%E6%8E%A5%E5%8F%97-%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.1.</span> <span class="toc-text">2.1 TCP：客户端发送，接受 数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-TCP%E6%8E%A5%E6%94%B6%EF%BC%8C%E5%8F%91%E9%80%81-%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.2 TCP接收，发送 数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-TCP%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="toc-number">1.3.3.</span> <span class="toc-text">2.3  TCP通信原理分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-number">1.3.4.</span> <span class="toc-text">2.4 TCP三次握手</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-TCP%E7%BB%83%E4%B9%A01"><span class="toc-number">1.3.5.</span> <span class="toc-text">2.5 TCP练习1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-TCP%E7%BB%83%E4%B9%A02"><span class="toc-number">1.3.6.</span> <span class="toc-text">2.6 TCP练习2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-TCP%E7%BB%83%E4%B9%A03"><span class="toc-number">1.3.7.</span> <span class="toc-text">2.7 TCP练习3</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Junit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.</span> <span class="toc-text">3 Junit单元测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-Junit4%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%A6%82%E8%BF%B0"><span class="toc-number">1.4.1.</span> <span class="toc-text">3.1  Junit4单元测试概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-Junit%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.2.</span> <span class="toc-text">3.2 Junit的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%95%E5%85%A5Junit4%E7%9A%84jar%E5%8C%85%E5%88%B0%E6%A8%A1%E5%9D%97%E4%B8%AD"><span class="toc-number">1.4.2.0.1.</span> <span class="toc-text">引入Junit4的jar包到模块中</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%9F%E6%88%90Junit%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6"><span class="toc-number">1.4.2.0.2.</span> <span class="toc-text">生成Junit测试框架</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%99%90%E6%97%B6%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.2.0.3.</span> <span class="toc-text">限时测试</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.4.2.0.4.</span> <span class="toc-text">测试方法：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E6%96%AD%E8%A8%80"><span class="toc-number">1.4.3.</span> <span class="toc-text">3.3 断言</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.4.3.0.1.</span> <span class="toc-text">概述 :</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.3.0.2.</span> <span class="toc-text">使用 :</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.5.</span> <span class="toc-text">4 单例设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.5.0.1.</span> <span class="toc-text">4.1 单例设计模式的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.5.0.2.</span> <span class="toc-text">4.2 单例设计模式实现步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.5.0.3.</span> <span class="toc-text">4.3 单例设计模式的类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-%E9%A5%BF%E6%B1%89%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.5.0.4.</span> <span class="toc-text">4.4 饿汉单例设计模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-%E6%87%92%E6%B1%89%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.5.0.5.</span> <span class="toc-text">4.5 懒汉单例设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F-%EF%BC%9A"><span class="toc-number">1.5.0.5.1.</span> <span class="toc-text">注意 ：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%A4%9A%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.6.</span> <span class="toc-text">5 多例设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%A4%9A%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.6.0.1.</span> <span class="toc-text">5.1 多例设计模式的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.6.0.2.</span> <span class="toc-text">5.2.实现步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="toc-number">1.6.0.3.</span> <span class="toc-text">5.3.实现代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.7.</span> <span class="toc-text">6 工厂设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.7.0.1.</span> <span class="toc-text">6.1 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2%E4%BD%9C%E7%94%A8"><span class="toc-number">1.7.0.2.</span> <span class="toc-text">6.2作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3%E6%A1%88%E4%BE%8B%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.7.0.3.</span> <span class="toc-text">6.3案例实践</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By 高明辉</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'Aaee0Vekhg5KbLhMOJQrEU6A-gzGzoHsz',
      appKey: 'mmLHPEEtqvOSJhsqWra8Sq6K',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script type="text/javascript" src="/js/fairyDustCursor.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>